// Copyright (c) 2012-2013 GREE, Inc - http://git.io/uvS3hQ
// Copyright (c) 2010-2012 Tween.js authors - http://git.io/tiDrNw
// Copyright (c) 2001 Robert Penner - http://goo.gl/Qjqc0
// Copyright (c) 2012 imaya - http://git.io/SKEzIQ http://git.io/cC8gDw
!function(){"undefined"==typeof global&&"undefined"!=typeof window?global=window:"undefined"!=typeof cc&&(global=cc),function(){var t,e,n,r,i,o,s,a,h,l,c,u,p,d,f,y,m,g,v,I,_,x,w,M,b,E,F,T,L,C,A,B,O,S,R,k,P,H,W,N,X,j,D,Y,G,U,V,z,K={}.hasOwnProperty,Q=function(t,e){function n(){this.constructor=t}for(var r in e)K.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};G=function(){function t(){}return t.available="undefined"!=typeof Float32Array,t}(),W=function(){return function(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}}(),D=function(){function t(t,e){null==t&&(t=0),null==e&&(e=0),this._=G.available?new Float32Array(2):[],this._[0]=t,this._[1]=e}return t.prototype.getTranslateX=function(){return this._[0]},t.prototype.setTranslateX=function(t){this._[0]=t},t.prototype.getTranslateY=function(){return this._[1]},t.prototype.setTranslateY=function(t){this._[1]=t},t}(),"undefined"!=typeof D.prototype.__defineGetter__?(D.prototype.__defineGetter__("translateX",function(){return this.getTranslateX()}),D.prototype.__defineSetter__("translateX",function(t){return this.setTranslateX(t)}),D.prototype.__defineGetter__("translateY",function(){return this.getTranslateY()}),D.prototype.__defineSetter__("translateY",function(t){return this.setTranslateY(t)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(D.prototype,"translateX",{get:function(){return this.getTranslateX()},set:function(t){return this.setTranslateX(t)}}),Object.defineProperty(D.prototype,"translateY",{get:function(){return this.getTranslateY()},set:function(t){return this.setTranslateY(t)}})),S=function(){function t(t,e,n,r,i,o){this._=G.available?new Float32Array(6):[],null!=t?(this._[0]=t,this._[1]=r,this._[2]=n,this._[3]=e,this._[4]=i,this._[5]=o):this.clear()}return t.prototype.clear=function(){this._[0]=1,this._[1]=0,this._[2]=0,this._[3]=1,this._[4]=0,this._[5]=0},t.prototype.set=function(t){var e,n;for(e=n=0;6>n;e=++n)this._[e]=t._[e];return this},t.prototype.setWithComparing=function(t){var e,n,r;if(null===t)return!1;for(e=!1,n=r=0;6>r;n=++r)this._[n]!==t._[n]&&(this._[n]=t._[n],e=!0);return e},t.prototype.getScaleX=function(){return this._[0]},t.prototype.setScaleX=function(t){this._[0]=t},t.prototype.getSkew1=function(){return this._[1]},t.prototype.setSkew1=function(t){this._[1]=t},t.prototype.getSkew0=function(){return this._[2]},t.prototype.setSkew0=function(t){this._[2]=t},t.prototype.getScaleY=function(){return this._[3]},t.prototype.setScaleY=function(t){this._[3]=t},t.prototype.getTranslateX=function(){return this._[4]},t.prototype.setTranslateX=function(t){this._[4]=t},t.prototype.getTranslateY=function(){return this._[5]},t.prototype.setTranslateY=function(t){this._[5]=t},t}(),"undefined"!=typeof S.prototype.__defineGetter__?(S.prototype.__defineGetter__("scaleX",function(){return this.getScaleX()}),S.prototype.__defineSetter__("scaleX",function(t){return this.setScaleX(t)}),S.prototype.__defineGetter__("scaleY",function(){return this.getScaleY()}),S.prototype.__defineSetter__("scaleY",function(t){return this.setScaleY(t)}),S.prototype.__defineGetter__("skew0",function(){return this.getSkew0()}),S.prototype.__defineSetter__("skew0",function(t){return this.setSkew0(t)}),S.prototype.__defineGetter__("skew1",function(){return this.getSkew1()}),S.prototype.__defineSetter__("skew1",function(t){return this.setSkew1(t)}),S.prototype.__defineGetter__("translateX",function(){return this.getTranslateX()}),S.prototype.__defineSetter__("translateX",function(t){return this.setTranslateX(t)}),S.prototype.__defineGetter__("translateY",function(){return this.getTranslateY()}),S.prototype.__defineSetter__("translateY",function(t){return this.setTranslateY(t)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(S.prototype,"scaleX",{get:function(){return this.getScaleX()},set:function(t){return this.setScaleX(t)}}),Object.defineProperty(S.prototype,"scaleY",{get:function(){return this.getScaleY()},set:function(t){return this.setScaleY(t)}}),Object.defineProperty(S.prototype,"skew0",{get:function(){return this.getSkew0()},set:function(t){return this.setSkew0(t)}}),Object.defineProperty(S.prototype,"skew1",{get:function(){return this.getSkew1()},set:function(t){return this.setSkew1(t)}}),Object.defineProperty(S.prototype,"translateX",{get:function(){return this.getTranslateX()},set:function(t){return this.setTranslateX(t)}}),Object.defineProperty(S.prototype,"translateY",{get:function(){return this.getTranslateY()},set:function(t){return this.setTranslateY(t)}})),g=function(){function t(t,e,n,r){this._=G.available?new Float32Array(4):[],null!=t?(this._[0]=t,this._[1]=e,this._[2]=n,this._[3]=r):(this._[0]=0,this._[1]=0,this._[2]=0,this._[3]=0)}return t.prototype.set=function(t,e,n,r){if("object"==typeof t)for(e=n=0;4>n;e=++n)this._[e]=t._[e];else this._[0]=t,this._[1]=e,this._[2]=n,this._[3]=r},t.prototype.getRed=function(){return this._[0]},t.prototype.setRed=function(t){this._[0]=t},t.prototype.getGreen=function(){return this._[1]},t.prototype.setGreen=function(t){this._[1]=t},t.prototype.getBlue=function(){return this._[2]},t.prototype.setBlue=function(t){this._[2]=t},t.prototype.getAlpha=function(){return this._[3]},t.prototype.setAlpha=function(t){this._[3]=t},t}(),"undefined"!=typeof g.prototype.__defineGetter__?(g.prototype.__defineGetter__("red",function(){return this.getRed()}),g.prototype.__defineSetter__("red",function(t){return this.setRed(t)}),g.prototype.__defineGetter__("green",function(){return this.getGreen()}),g.prototype.__defineSetter__("green",function(t){return this.setGreen(t)}),g.prototype.__defineGetter__("blue",function(){return this.getBlue()}),g.prototype.__defineSetter__("blue",function(t){return this.setBlue(t)}),g.prototype.__defineGetter__("alpha",function(){return this.getAlpha()}),g.prototype.__defineSetter__("alpha",function(t){return this.setAlpha(t)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(g.prototype,"red",{get:function(){return this.getRed()},set:function(t){return this.setRed(t)}}),Object.defineProperty(g.prototype,"green",{get:function(){return this.getGreen()},set:function(t){return this.setGreen(t)}}),Object.defineProperty(g.prototype,"blue",{get:function(){return this.getBlue()},set:function(t){return this.setBlue(t)}}),Object.defineProperty(g.prototype,"alpha",{get:function(){return this.getAlpha()},set:function(t){return this.setAlpha(t)}})),e=function(){function t(t){this._=G.available?new Float32Array(1):[],this._[0]=t}return t.prototype.getAlpha=function(){return this._[0]},t.prototype.setAlpha=function(t){this._[0]=t},t}(),"undefined"!=typeof e.prototype.__defineGetter__?(e.prototype.__defineGetter__("alpha",function(){return this.getAlpha()}),e.prototype.__defineSetter__("alpha",function(t){return this.setAlpha(t)})):"undefined"!=typeof Object.defineProperty&&Object.defineProperty(e.prototype,"alpha",{get:function(){return this.getAlpha()},set:function(t){return this.setAlpha(t)}}),v=function(){function t(t,e,n,r){this.multi=new g(t,e,n,r),null==t&&this.clear()}return t.prototype.clear=function(){this.multi.set(1,1,1,1)},t.prototype.set=function(t){return this.multi.set(t.multi),this},t.prototype.setWithComparing=function(t){var e,n,r,i;if(null===t)return!1;for(e=!1,t=t.multi,r=this.multi,n=i=0;4>i;n=++i)r._[n]!==t._[n]&&(r._[n]=t._[n],e=!0);return e},t}(),b=function(){function t(){}return t.Constant=function(){function t(){}return t.HEADER_SIZE=324,t.FORMAT_VERSION_0=18,t.FORMAT_VERSION_1=16,t.FORMAT_VERSION_2=16,t.FORMAT_TYPE=0,t.OPTION_USE_SCRIPT=1,t.OPTION_USE_TEXTUREATLAS=2,t.MATRIX_FLAG=-2147483648,t.COLORTRANSFORM_FLAG=-2147483648,t.TEXTUREFORMAT_NORMAL=0,t.TEXTUREFORMAT_PREMULTIPLIEDALPHA=1,t}(),t.StringBase=function(){return function(t){this.stringId=t}}(),t.Texture=function(){function t(t,e,n,r,i){this.stringId=t,this.format=e,this.width=n,this.height=r,this.scale=i}return t.prototype.setFilename=function(t){this.filename=t.strings[this.stringId]},t}(),t.TextureReplacement=function(){return function(t,e,n,r,i){this.filename=t,this.format=e,this.width=n,this.height=r,this.scale=i}}(),t.TextureFragment=function(){function t(t,e,n,r,i,o,s,a,h){this.stringId=t,this.textureId=e,this.rotated=n,this.x=r,this.y=i,this.u=o,this.v=s,this.w=a,this.h=h}return t.prototype.setFilename=function(t){this.filename=t.strings[this.stringId]},t}(),t.TextureFragmentReplacement=function(){return function(t,e,n,r,i,o,s,a,h){this.filename=t,this.textureId=e,this.rotated=n,this.x=r,this.y=i,this.u=o,this.v=s,this.w=a,this.h=h}}(),t.Bitmap=function(){return function(t,e){this.matrixId=t,this.textureFragmentId=e}}(),t.BitmapEx=function(){function t(t,e,n,r,i,o,s){this.matrixId=t,this.textureFragmentId=e,this.attribute=n,this.u=r,this.v=i,this.w=o,this.h=s}return t.Attribute=function(){function t(){}return t.REPEAT_S=1,t.REPEAT_T=2,t}(),t}.call(this),t.Font=function(){return function(t,e){this.stringId=t,this.letterSpacing=e}}(),t.TextProperty=function(){function t(t,e,n,r,i,o,s,a,h,l,c,u,p,d){this.maxLength=t,this.fontId=e,this.fontHeight=n,this.align=r,this.leftMargin=i,this.rightMargin=o,this.letterSpacing=s,this.leading=a,this.strokeColorId=h,this.strokeWidth=l,this.shadowColorId=c,this.shadowOffsetX=u,this.shadowOffsetY=p,this.shadowBlur=d}return t.Align=function(){function t(){}return t.LEFT=0,t.RIGHT=1,t.CENTER=2,t.ALIGN_MASK=3,t.VERTICAL_BOTTOM=4,t.VERTICAL_MIDDLE=8,t.VERTICAL_MASK=12,t}(),t}.call(this),t.Text=function(){return function(t,e,n,r,i,o,s){this.matrixId=t,this.nameStringId=e,this.textPropertyId=n,this.stringId=r,this.colorId=i,this.width=o,this.height=s}}(),t.ParticleData=function(){return function(t){this.stringId=t}}(),t.Particle=function(){return function(t,e,n){this.matrixId=t,this.colorTransformId=e,this.particleDataId=n}}(),t.ProgramObject=function(t){function e(t,n,r,i,o){this.width=n,this.height=r,this.matrixId=i,this.colorTransformId=o,e.__super__.constructor.call(this,t)}return Q(e,t),e}(t.StringBase),t.GraphicObject=function(){function t(t,e){this.graphicObjectType=t,this.graphicObjectId=e}return t.Type=function(){function t(){}return t.BITMAP=0,t.BITMAPEX=1,t.TEXT=2,t.GRAPHIC_OBJECT_MAX=3,t}(),t}.call(this),t.Graphic=function(){return function(t,e){this.graphicObjectId=t,this.graphicObjects=e}}(),t.LObject=function(){function t(t,e){this.objectType=t,this.objectId=e}return t.Type=function(){function t(){}return t.BUTTON=0,t.GRAPHIC=1,t.MOVIE=2,t.BITMAP=3,t.BITMAPEX=4,t.TEXT=5,t.PARTICLE=6,t.PROGRAMOBJECT=7,t.ATTACHEDMOVIE=8,t.OBJECT_MAX=9,t}(),t}.call(this),t.Animation=function(){return function(t,e){this.animationOffset=t,this.animationLength=e}}(),t.ButtonCondition=function(){function t(t,e,n){this.condition=t,this.keyCode=e,this.animationId=n}return t.Condition=function(){function t(){}return t.ROLLOVER=1,t.ROLLOUT=2,t.PRESS=4,t.RELEASE=8,t.DRAGOUT=16,t.DRAGOVER=32,t.RELEASEOUTSIDE=64,t.KEYPRESS=128,t}(),t}.call(this),t.Button=function(){return function(t,e,n,r,i,o){this.width=t,this.height=e,this.matrixId=n,this.colorTransformId=r,this.conditionId=i,this.conditions=o}}(),t.Label=function(t){function e(t,n){this.frameNo=n,e.__super__.constructor.call(this,t)}return Q(e,t),e}(t.StringBase),t.InstanceName=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return Q(e,t),e}(t.StringBase),t.Event=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return Q(e,t),e}(t.StringBase),t.String=function(){return function(t,e){this.stringOffset=t,this.stringLength=e}}(),t.Place=function(){return function(t,e,n,r){this.depth=t,this.objectId=e,this.instanceId=n,this.matrixId=r}}(),t.ControlMoveM=function(){return function(t,e){this.placeId=t,this.matrixId=e}}(),t.ControlMoveC=function(){return function(t,e){this.placeId=t,this.colorTransformId=e}}(),t.ControlMoveMC=function(){return function(t,e,n){this.placeId=t,this.matrixId=e,this.colorTransformId=n}}(),t.Control=function(){function t(t,e){this.controlType=t,this.controlId=e}return t.Type=function(){function t(){}return t.MOVE=0,t.MOVEM=1,t.MOVEC=2,t.MOVEMC=3,t.ANIMATION=4,t.CONTROL_MAX=5,t}(),t}.call(this),t.Frame=function(){return function(t,e){this.controlOffset=t,this.controls=e}}(),t.MovieClipEvent=function(){function t(t,e){this.clipEvent=t,this.animationId=e}return t.ClipEvent=function(){function t(){}return t.LOAD=1,t.UNLOAD=2,t.ENTERFRAME=4,t}(),t}.call(this),t.Movie=function(){return function(t,e,n,r,i,o,s){this.depths=t,this.labelOffset=e,this.labels=n,this.frameOffset=r,this.frames=i,this.clipEventId=o,this.clipEvents=s}}(),t.MovieLinkage=function(t){function e(t,n){this.movieId=n,e.__super__.constructor.call(this,t)}return Q(e,t),e}(t.StringBase),t.ItemArray=function(){return function(t,e){this.offset=t,this.length=e}}(),t.Header=function(){return function(t,e,n,r,i,o,s,a,h,l,c,u,p,d,f,y,m,g,v,I,_,x,w,M,b,E,F,T,L,C,A,B,O,S,R,k,P,H,W,N,X,j,D,Y,G,U,V,z,K,Q,q){this.id0=t,this.id1=e,this.id2=n,this.id3=r,this.formatVersion0=i,this.formatVersion1=o,this.formatVersion2=s,this.option=a,this.width=h,this.height=l,this.frameRate=c,this.rootMovieId=u,this.nameStringId=p,this.backgroundColor=d,this.stringBytes=f,this.animationBytes=y,this.translate=m,this.matrix=g,this.color=v,this.alphaTransform=I,this.colorTransform=_,this.objectData=x,this.texture=w,this.textureFragment=M,this.bitmap=b,this.bitmapEx=E,this.font=F,this.textProperty=T,this.text=L,this.particleData=C,this.particle=A,this.programObject=B,this.graphicObject=O,this.graphic=S,this.animation=R,this.buttonCondition=k,this.button=P,this.label=H,this.instanceName=W,this.eventData=N,this.place=X,this.controlMoveM=j,this.controlMoveC=D,this.controlMoveMC=Y,this.control=G,this.frame=U,this.movieClipEvent=V,this.movie=z,this.movieLinkage=K,this.stringData=Q,this.lwfLength=q}}(),t}.call(this),t=b.TextProperty.Align,h=b.MovieClipEvent.ClipEvent,I=b.ButtonCondition.Condition,_=b.Constant,Y=b.LObject.Type,x=b.Control.Type,E=b.GraphicObject.Type,n=function(){function t(){}return t.END=0,t.PLAY=1,t.STOP=2,t.NEXTFRAME=3,t.PREVFRAME=4,t.GOTOFRAME=5,t.GOTOLABEL=6,t.SETTARGET=7,t.EVENT=8,t.CALL=9,t.INSTANCE_TARGET_ROOT=-1,t.INSTANCE_TARGET_PARENT=-2,t}(),w=function(){function t(t,n,r,i,o,s,a,h,l,c,u,p,d,f,y,m,I,_,x,w,M,E,F,T,L,C,A,B,O,R,k,P,H,W,N){var X,j,Y,G,U;this.header=t,this.translates=n,this.matrices=r,this.colors=i,this.alphaTransforms=o,this.colorTransforms=s,this.objects=a,this.textures=h,this.textureFragments=l,this.bitmaps=c,this.bitmapExs=u,this.fonts=p,this.textProperties=d,this.texts=f,this.particleDatas=y,this.particles=m,this.programObjects=I,this.graphicObjects=_,this.graphics=x,this.animations=w,this.buttonConditions=M,this.buttons=E,this.labels=F,this.instanceNames=T,this.events=L,this.places=C,this.controlMoveMs=A,this.controlMoveCs=B,this.controlMoveMCs=O,this.controls=R,this.frames=k,this.movieClipEvents=P,this.movies=H,this.movieLinkages=W,this.strings=N,null!=this.header.header?(Y=this.header,this.header=Y.header,this.translates=function(){var t,e,n,r;for(n=Y.translates,r=[],t=0,e=n.length;e>t;t++)U=n[t],r.push(new D(U._[0],U._[1]));return r}(),this.matrices=function(){var t,e,n,r;for(n=Y.matrices,r=[],t=0,e=n.length;e>t;t++)G=n[t],r.push(new S(G._[0],G._[3],G._[2],G._[1],G._[4],G._[5]));return r}(),this.colors=function(){var t,e,n,r;for(n=Y.colors,r=[],t=0,e=n.length;e>t;t++)j=n[t],r.push(new g(j._[0],j._[1],j._[2],j._[3]));return r}(),this.alphaTransforms=function(){var t,n,r,i;for(r=Y.alphaTransforms,i=[],t=0,n=r.length;n>t;t++)X=r[t],i.push(new e(X._[0]));return i}(),this.colorTransforms=function(){var t,e,n,r;for(n=Y.colorTransforms,r=[],t=0,e=n.length;e>t;t++)j=n[t],r.push(new v(j.multi._[0],j.multi._[1],j.multi._[2],j.multi._[3]));return r}(),this.objects=Y.objects,this.textures=Y.textures,this.textureFragments=Y.textureFragments,this.bitmaps=Y.bitmaps,this.bitmapExs=Y.bitmapExs,this.fonts=Y.fonts,this.textProperties=Y.textProperties,this.texts=Y.texts,this.particleDatas=Y.particleDatas,this.particles=Y.particles,this.programObjects=Y.programObjects,this.graphicObjects=Y.graphicObjects,this.graphics=Y.graphics,this.animations=Y.animations,this.buttonConditions=Y.buttonConditions,this.buttons=Y.buttons,this.labels=Y.labels,this.instanceNames=Y.instanceNames,this.events=Y.events,this.places=Y.places,this.controlMoveMs=Y.controlMoveMs,this.controlMoveCs=Y.controlMoveCs,this.controlMoveMCs=Y.controlMoveMCs,this.controls=Y.controls,this.frames=Y.frames,this.movieClipEvents=Y.movieClipEvents,this.movies=Y.movies,this.movieLinkages=Y.movieLinkages,this.strings=Y.strings,this.stringMap=Y.stringMap,this.eventMap=Y.eventMap,this.instanceNameMap=Y.instanceNameMap,this.movieLinkageMap=Y.movieLinkageMap,this.movieLinkageNameMap=Y.movieLinkageNameMap,this.programObjectMap=Y.programObjectMap,this.labelMap=Y.labelMap,this.bitmapMap=Y.bitmapMap,this.useScript=Y.useScript,this.useTextureAtlas=Y.useTextureAtlas):(this.stringMap={},this.eventMap={},this.instanceNameMap={},this.movieLinkageMap={},this.movieLinkageNameMap={},this.programObjectMap={},this.labelMap=[],this.bitmapMap={},null!=this.header?(this.useScript=0!==(this.header.option&b.Constant.OPTION_USE_SCRIPT),this.useTextureAtlas=0!==(this.header.option&b.Constant.OPTION_USE_TEXTUREATLAS)):this.useTextureAtlas=this.useScript=!1)}return t.prototype.check=function(){return null!=this.header&&"L"===this.header.id0&&"W"===this.header.id1&&"F"===this.header.id2&&this.header.formatVersion0===b.Constant.FORMAT_VERSION_0&&this.header.formatVersion1===b.Constant.FORMAT_VERSION_1&&this.header.formatVersion2===b.Constant.FORMAT_VERSION_2?!0:!1},t.prototype.name=function(){return this.strings[this.header.nameStringId]},t.prototype.replaceTexture=function(t,e){return 0>t||t>=textures.length?!1:(textures[t]=e,!0)},t.prototype.replaceTextureFragment=function(t,e){return 0>t||t>=textureFragments.length?!1:(textureFragments[t]=e,!0)},t}(),C=function(){function t(){}return t.prototype.readByte=function(){return 255&this.d.charCodeAt(this.index++)},t.prototype.readChar=function(){return String.fromCharCode(this.readByte())},t.prototype.readBytes=function(t){var e;return e=this.d.substr(this.index,t),this.index+=t,e},t.prototype.readInt32=function(){return(this.readByte()<<0)+(this.readByte()<<8)+(this.readByte()<<16)+(this.readByte()<<24)},t.prototype.readSingle=function(){var t,e,n,r,i;return r=this.readByte(),n=this.readByte(),e=this.readByte(),t=this.readByte(),i=(255&t<<1|e>>7)-127,e=(127&e)<<16|n<<8|r,0===e&&-127===i?0:(1-2*(t>>7))*(1+e*Math.pow(2,-23))*Math.pow(2,i)},t.prototype.loadTranslate=function(){return new D(this.readSingle(),this.readSingle())},t.prototype.loadMatrix=function(){return new S(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},t.prototype.loadColor=function(){return new g(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},t.prototype.loadAlphaTransform=function(){return new e(this.readSingle())},t.prototype.loadColorTransform=function(){var t;return t=this.loadColor(),this.loadColor(),new v(t.red,t.green,t.blue,t.alpha)},t.prototype.loadTexture=function(){return new b.Texture(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle())},t.prototype.loadTextureFragment=function(){return new b.TextureFragment(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadBitmap=function(){return new b.Bitmap(this.readInt32(),this.readInt32())},t.prototype.loadBitmapEx=function(){return new b.BitmapEx(this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},t.prototype.loadFont=function(){return new b.Font(this.readInt32(),this.readSingle())},t.prototype.loadTextProperty=function(){return new b.TextProperty(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadText=function(){return new b.Text(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadParticleData=function(){return new b.ParticleData(this.readInt32())},t.prototype.loadParticle=function(){return new b.Particle(this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadProgramObject=function(){return new b.ProgramObject(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadGraphicObject=function(){return new b.GraphicObject(this.readInt32(),this.readInt32())},t.prototype.loadGraphic=function(){return new b.Graphic(this.readInt32(),this.readInt32())},t.prototype.loadObject=function(){return new b.LObject(this.readInt32(),this.readInt32())},t.prototype.loadAnimation=function(){return new b.Animation(this.readInt32(),this.readInt32())},t.prototype.loadButtonCondition=function(){return new b.ButtonCondition(this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadButton=function(){return new b.Button(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadLabel=function(){return new b.Label(this.readInt32(),this.readInt32())},t.prototype.loadInstanceName=function(){return new b.InstanceName(this.readInt32())},t.prototype.loadEvent=function(){return new b.Event(this.readInt32())},t.prototype.loadString=function(){return new b.String(this.readInt32(),this.readInt32())},t.prototype.loadPlace=function(){return new b.Place(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadControlMoveM=function(){return new b.ControlMoveM(this.readInt32(),this.readInt32())},t.prototype.loadControlMoveC=function(){return new b.ControlMoveC(this.readInt32(),this.readInt32())},t.prototype.loadControlMoveMC=function(){return new b.ControlMoveMC(this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadControl=function(){return new b.Control(this.readInt32(),this.readInt32())},t.prototype.loadFrame=function(){return new b.Frame(this.readInt32(),this.readInt32())},t.prototype.loadMovieClipEvent=function(){return new b.MovieClipEvent(this.readInt32(),this.readInt32())},t.prototype.loadMovie=function(){return new b.Movie(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadMovieLinkage=function(){return new b.MovieLinkage(this.readInt32(),this.readInt32())},t.prototype.loadItemArray=function(){return new b.ItemArray(this.readInt32(),this.readInt32())},t.prototype.loadHeader=function(){var t,e,n,r,i,o,s,a,h,l,c,u,p,d,f,y,m,g,v,I,_,x,w,M,E,F,T,L,C,A,B,O,S,R,k,P,H,W,N,X,j,D,Y,G,U,V,z,K,Q,q,$;return E=this.readChar(),F=this.readChar(),T=this.readChar(),L=this.readChar(),m=this.readByte(),g=this.readByte(),v=this.readByte(),W=this.readByte(),$=this.readInt32(),M=this.readInt32(),_=this.readInt32(),Y=this.readInt32(),P=this.readInt32(),r=this.readInt32(),G=this.loadItemArray(),n=this.loadItemArray(),q=this.loadItemArray(),O=this.loadItemArray(),h=this.loadItemArray(),t=this.loadItemArray(),l=this.loadItemArray(),H=this.loadItemArray(),K=this.loadItemArray(),Q=this.loadItemArray(),i=this.loadItemArray(),o=this.loadItemArray(),y=this.loadItemArray(),z=this.loadItemArray(),V=this.loadItemArray(),X=this.loadItemArray(),N=this.loadItemArray(),D=this.loadItemArray(),w=this.loadItemArray(),x=this.loadItemArray(),e=this.loadItemArray(),a=this.loadItemArray(),s=this.loadItemArray(),A=this.loadItemArray(),C=this.loadItemArray(),f=this.loadItemArray(),j=this.loadItemArray(),p=this.loadItemArray(),u=this.loadItemArray(),d=this.loadItemArray(),c=this.loadItemArray(),I=this.loadItemArray(),R=this.loadItemArray(),S=this.loadItemArray(),k=this.loadItemArray(),U=this.loadItemArray(),B=this.readInt32(),new b.Header(E,F,T,L,m,g,v,W,$,M,_,Y,P,r,G,n,q,O,h,t,l,H,K,Q,i,o,y,z,V,X,N,D,w,x,e,a,s,A,C,f,j,p,u,d,c,I,R,S,k,U,B)},t.prototype.load=function(t){var e,n,r,i,o,s,a,h,l,c,u,p,d;if(this.d=t,this.index=0,c=this.loadHeader(),t=new w(c),!t.check())return null;for(l=this.readBytes(c.stringBytes.length),n=this.readBytes(c.animationBytes.length),t.translates=function(){var t,e,n;for(n=[],u=t=0,e=c.translate.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadTranslate());return n}.call(this),t.matrices=function(){var t,e,n;for(n=[],u=t=0,e=c.matrix.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadMatrix());return n}.call(this),t.colors=function(){var t,e,n;for(n=[],u=t=0,e=c.color.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadColor());return n}.call(this),t.alphaTransforms=function(){var t,e,n;for(n=[],u=t=0,e=c.alphaTransform.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadAlphaTransform());return n}.call(this),t.colorTransforms=function(){var t,e,n;for(n=[],u=t=0,e=c.colorTransform.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadColorTransform());return n}.call(this),t.objects=function(){var t,e,n;for(n=[],u=t=0,e=c.objectData.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadObject());return n}.call(this),t.textures=function(){var t,e,n;for(n=[],u=t=0,e=c.texture.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadTexture());return n}.call(this),t.textureFragments=function(){var t,e,n;for(n=[],u=t=0,e=c.textureFragment.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadTextureFragment());return n}.call(this),t.bitmaps=function(){var t,e,n;for(n=[],u=t=0,e=c.bitmap.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadBitmap());return n}.call(this),t.bitmapExs=function(){var t,e,n;for(n=[],u=t=0,e=c.bitmapEx.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadBitmapEx());return n}.call(this),t.fonts=function(){var t,e,n;for(n=[],u=t=0,e=c.font.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadFont());return n}.call(this),t.textProperties=function(){var t,e,n;for(n=[],u=t=0,e=c.textProperty.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadTextProperty());return n}.call(this),t.texts=function(){var t,e,n;for(n=[],u=t=0,e=c.text.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadText());return n}.call(this),t.particleDatas=function(){var t,e,n;for(n=[],u=t=0,e=c.particleData.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadParticleData());return n}.call(this),t.particles=function(){var t,e,n;for(n=[],u=t=0,e=c.particle.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadParticle());return n}.call(this),t.programObjects=function(){var t,e,n;for(n=[],u=t=0,e=c.programObject.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadProgramObject());return n}.call(this),t.graphicObjects=function(){var t,e,n;for(n=[],u=t=0,e=c.graphicObject.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadGraphicObject());return n}.call(this),t.graphics=function(){var t,e,n;for(n=[],u=t=0,e=c.graphic.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadGraphic());return n}.call(this),r=function(){var t,e,n;for(n=[],u=t=0,e=c.animation.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadAnimation());return n}.call(this),t.buttonConditions=function(){var t,e,n;for(n=[],u=t=0,e=c.buttonCondition.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadButtonCondition());return n}.call(this),t.buttons=function(){var t,e,n;for(n=[],u=t=0,e=c.button.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadButton());return n}.call(this),t.labels=function(){var t,e,n;for(n=[],u=t=0,e=c.label.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadLabel());return n}.call(this),t.instanceNames=function(){var t,e,n;for(n=[],u=t=0,e=c.instanceName.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadInstanceName());return n}.call(this),t.events=function(){var t,e,n;for(n=[],u=t=0,e=c.eventData.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadEvent());return n}.call(this),t.places=function(){var t,e,n;for(n=[],u=t=0,e=c.place.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadPlace());return n}.call(this),t.controlMoveMs=function(){var t,e,n;for(n=[],u=t=0,e=c.controlMoveM.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadControlMoveM());return n}.call(this),t.controlMoveCs=function(){var t,e,n;for(n=[],u=t=0,e=c.controlMoveC.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadControlMoveC());return n}.call(this),t.controlMoveMCs=function(){var t,e,n;for(n=[],u=t=0,e=c.controlMoveMC.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadControlMoveMC());return n}.call(this),t.controls=function(){var t,e,n;for(n=[],u=t=0,e=c.control.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadControl());return n}.call(this),t.frames=function(){var t,e,n;for(n=[],u=t=0,e=c.frame.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadFrame());return n}.call(this),t.movieClipEvents=function(){var t,e,n;for(n=[],u=t=0,e=c.movieClipEvent.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadMovieClipEvent());return n}.call(this),t.movies=function(){var t,e,n;for(n=[],u=t=0,e=c.movie.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadMovie());return n}.call(this),t.movieLinkages=function(){var t,e,n;for(n=[],u=t=0,e=c.movieLinkage.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadMovieLinkage());return n}.call(this),p=function(){var t,e,n;for(n=[],u=t=0,e=c.stringData.length;e>=0?e>t:t>e;u=e>=0?++t:--t)n.push(this.loadString());return n}.call(this),t.animations=[],d=0,o=r.length;o>d;d++)e=r[d],i=e.animationOffset,t.animations.push(this.readAnimation(n.slice(i,i+e.animationLength)));for(t.strings=[],n=t.stringMap,r=0,d=p.length;d>r;r++){for(e=p[r],i=e.stringOffset,i=l.slice(i,i+e.stringLength),e="",u=0;u<i.length;)o=255&i.charCodeAt(u),128>o?(e+=String.fromCharCode(o),++u):6===o>>5?(s=i.charCodeAt(u+1),e+=String.fromCharCode((31&o)<<6|63&s),u+=2):14===o>>4?(s=i.charCodeAt(u+1),a=i.charCodeAt(u+2),o=(15&o)<<12|(63&s)<<6|63&a,e+=String.fromCharCode(o),u+=3):(s=i.charCodeAt(u+1),a=i.charCodeAt(u+2),h=i.charCodeAt(u+3),o=(7&o)<<18|(63&s)<<12|(63&a)<<6|h<<63,e+=String.fromCharCode(o),u+=4);n[e]=t.strings.length,t.strings.push(e)}for(l=t.instanceNameMap,u=p=0,i=t.instanceNames.length;i>=0?i>p:p>i;u=i>=0?++p:--p)l[t.instanceNames[u].stringId]=u;for(l=t.eventMap,u=p=0,i=t.events.length;i>=0?i>p:p>i;u=i>=0?++p:--p)l[t.events[u].stringId]=u;for(l=t.movieLinkageMap,u=p=0,i=t.movieLinkages.length;i>=0?i>p:p>i;u=i>=0?++p:--p)l[t.movieLinkages[u].stringId]=u;for(l=t.movieLinkageNameMap,u=p=0,i=t.movieLinkages.length;i>=0?i>p:p>i;u=i>=0?++p:--p)l[t.movieLinkages[u].movieId]=t.movieLinkages[u].stringId;for(l=t.programObjectMap,u=p=0,i=t.programObjects.length;i>=0?i>p:p>i;u=i>=0?++p:--p)l[t.programObjects[u].stringId]=u;for(l=t.labelMap,e=t.movies,d=0,r=e.length;r>d;d++){for(p=e[d],i=p.labelOffset,n={},s=t.labels.slice(i,i+p.labels),o=0,i=s.length;i>o;o++)p=s[o],n[p.stringId]=p.frameNo;l.push(n)}for(n=t.textures,i=0,p=n.length;p>i;i++)l=n[i],l.setFilename(t);for(i=t.bitmapMap,u=r=0,n=t.textureFragments.length;n>=0?n>r:r>n;u=n>=0?++r:--r)l=t.textureFragments[u],l.setFilename(t),l=l.filename,p=l.match(/(.+)_atlas_.+_info_.+(_.+){6}/),null!=p&&(l=p[1]),i[l]=t.bitmaps.length,t.bitmaps.push(new b.Bitmap(0,u));return t},t.prototype.readByteFromBytes=function(t,e){var n;return n=255&t.charCodeAt(e++),[e,n]},t.prototype.readInt32FromBytes=function(t,e){var n,r,i,o;return n=this.readByteFromBytes(t,e),e=n[0],n=n[1],r=this.readByteFromBytes(t,e),e=r[0],r=r[1],i=this.readByteFromBytes(t,e),e=i[0],i=i[1],o=this.readByteFromBytes(t,e),e=o[0],[e,(n<<0)+(r<<8)+(i<<16)+(o[1]<<24)]},t.prototype.readAnimation=function(t){var e,r,i,o,s;for(e=[],i=0;;)switch(r=this.readByteFromBytes(t,i),i=r[0],r=r[1],e.push(r),r){case n.GOTOFRAME:case n.GOTOLABEL:case n.EVENT:case n.CALL:r=this.readInt32FromBytes(t,i),i=r[0],r=r[1],e.push(r);break;case n.SETTARGET:for(r=this.readInt32FromBytes(t,i),i=r[0],r=r[1],e.push(r),s=0;r>=0?r>s:s>r;r>=0?++s:--s)o=this.readInt32FromBytes(t,i),i=o[0],o=o[1],e.push(o);break;case n.END:return e}},t}(),A=function(t){function e(){return z=e.__super__.constructor.apply(this,arguments)
}return Q(e,t),e.prototype.readByte=function(){return this.d[this.index++]},e.prototype.readBytes=function(t){var e,n;for(e="",n=0;t>=0?t>n:n>t;t>=0?++n:--n)e+=String.fromCharCode(this.d[this.index++]);return e},e}(C),B=function(t){function e(){this.int32Array=new Int32Array,this.float32Array=new Float32Array}return Q(e,t),e.prototype.readByte=function(){return this.d[this.index++]},e.prototype.readBytes=function(t){var e,n;for(e="",n=0;t>=0?t>n:n>t;t>=0?++n:--n)e+=String.fromCharCode(this.d[this.index++]);return e},e.prototype.readInt32=function(){var t;return t=this.dInt32[this.index/4],this.index+=4,t},e.prototype.readSingle=function(){var t;return t=this.dFloat32[this.index/4],this.index+=4,t},e.prototype.load=function(t){return this.d=new Uint8Array(t),this.dInt32=new Int32Array(t),this.dFloat32=new Float32Array(t),e.__super__.load.call(this,this.d)},e}(C),O=function(){function t(){}return t.load=function(t){var e;return null!=t&&"string"==typeof t?(e=new C,e.load(t)):void 0},t.loadArray=function(t){var e;return null!=t?(e=new A,e.load(t)):void 0},t.loadArrayBuffer=function(t){var e;return null!=t?(e=new B,e.load(t)):void 0},t}(),U=function(){function t(){}return t.calcMatrixToPoint=function(t,e,n){return[n._[0]*t+n._[2]*e+n._[4],n._[1]*t+n._[3]*e+n._[5]]},t.getMatrixDeterminant=function(t){return 0>t._[0]*t._[3]-t._[2]*t._[1]},t.syncMatrix=function(t){var e,n,r,i;n=null!=(i=t.matrixId)?i:0,0===(n&_.MATRIX_FLAG)?(e=t.lwf.data.translates[n],i=n=1,r=0,e=new S(n,i,0,0,e._[0],e._[1])):(n&=~_.MATRIX_FLAG,e=t.lwf.data.matrices[n],r=this.getMatrixDeterminant(e),n=Math.sqrt(e._[0]*e._[0]+e._[1]*e._[1]),r&&(n=-n),i=Math.sqrt(e._[3]*e._[3]+e._[2]*e._[2]),r=r?Math.atan2(e._[1],-e._[0]):Math.atan2(e._[1],e._[0]),r=180*(r/Math.PI)),t.property.setMatrix(e,n,i,r)},t.getX=function(t){var e,n;return e=null!=(n=t.matrixId)?n:0,0===(e&_.MATRIX_FLAG)?(t=t.lwf.data.translates[e],t._[0]):(e&=~_.MATRIX_FLAG,t.lwf.data.matrices[e]._[4])},t.getY=function(t){var e,n;return e=null!=(n=t.matrixId)?n:0,0===(e&_.MATRIX_FLAG)?(t=t.lwf.data.translates[e],t._[1]):(e&=~_.MATRIX_FLAG,t.lwf.data.matrices[e]._[5])},t.getScaleX=function(t){var e,n;return e=null!=(n=t.matrixId)?n:0,0===(e&_.MATRIX_FLAG)?1:(e&=~_.MATRIX_FLAG,e=t.lwf.data.matrices[e],t=this.getMatrixDeterminant(e),e=Math.sqrt(e._[0]*e._[0]+e._[1]*e._[1]),t&&(e=-e),e)},t.getScaleY=function(t){var e,n;return e=null!=(n=t.matrixId)?n:0,0===(e&_.MATRIX_FLAG)?1:(e&=~_.MATRIX_FLAG,t=t.lwf.data.matrices[e],Math.sqrt(t._[3]*t._[3]+t._[2]*t._[2]))},t.getRotation=function(t){var e,n;return e=null!=(n=t.matrixId)?n:0,0===(e&_.MATRIX_FLAG)?0:(e&=~_.MATRIX_FLAG,t=t.lwf.data.matrices[e],t=this.getMatrixDeterminant(t)?Math.atan2(t._[1],-t._[0]):Math.atan2(t._[1],t._[0]),t=180*(t/Math.PI))},t.syncColorTransform=function(t){var e,n;e=null!=(n=t.colorTransformId)?n:0,0===(e&_.COLORTRANSFORM_FLAG)?(e=t.lwf.data.alphaTransforms[e],e=new v(1,1,1,e._[0])):(e&=~_.COLORTRANSFORM_FLAG,e=t.lwf.data.colorTransforms[e]),t.property.setColorTransform(e)},t.getAlpha=function(t){var e,n;return e=null!=(n=t.colorTransformId)?n:0,0===(e&_.COLORTRANSFORM_FLAG)?(t=t.lwf.data.alphaTransforms[e],t._[0]):(e&=~_.COLORTRANSFORM_FLAG,t.lwf.data.colorTransforms[e]._[3])},t.calcMatrixId=function(t,e,n,r){return 0===r?e.set(n):0===(r&_.MATRIX_FLAG)?(t=t.data.translates[r],e._[0]=n._[0],e._[2]=n._[2],e._[4]=n._[0]*t._[0]+n._[2]*t._[1]+n._[4],e._[1]=n._[1],e._[3]=n._[3],e._[5]=n._[1]*t._[0]+n._[3]*t._[1]+n._[5]):(r&=~_.MATRIX_FLAG,t=t.data.matrices[r],this.calcMatrix(e,n,t)),e},t.calcMatrix=function(t,e,n){return t._[0]=e._[0]*n._[0]+e._[2]*n._[1],t._[2]=e._[0]*n._[2]+e._[2]*n._[3],t._[4]=e._[0]*n._[4]+e._[2]*n._[5]+e._[4],t._[1]=e._[1]*n._[0]+e._[3]*n._[1],t._[3]=e._[1]*n._[2]+e._[3]*n._[3],t._[5]=e._[1]*n._[4]+e._[3]*n._[5]+e._[5],t},t.rotateMatrix=function(t,e,n,r,i){return r*=n,i*=n,t._[0]=-e._[2]*n,t._[2]=e._[0]*n,t._[4]=e._[0]*r+e._[2]*i+e._[4],t._[1]=-e._[3]*n,t._[3]=e._[1]*n,t._[5]=e._[1]*r+e._[3]*i+e._[5],t},t.scaleMatrix=function(t,e,n,r,i){return r*=n,i*=n,t._[0]=e._[0]*n,t._[2]=e._[2]*n,t._[4]=e._[0]*r+e._[2]*i+e._[4],t._[1]=e._[1]*n,t._[3]=e._[3]*n,t._[5]=e._[1]*r+e._[3]*i+e._[5],t},t.fitForHeight=function(t,e,n){n/=t.height,t.setTextScale(n),t.property.scale(n,n),t.property.move((e-t.width*n)/2,0)},t.fitForWidth=function(t,e,n){e/=t.width,t.setTextScale(e),t.property.scale(e,e),t.property.move(0,(n-t.height*e)/2,0)},t.scaleForHeight=function(t,e){var n;n=e/t.height,t.setTextScale(n),t.property.scale(n,n)},t.scaleForWidth=function(t,e){var n;n=e/t.width,t.setTextScale(n),t.property.scale(n,n)},t.copyMatrix=function(t,e){return null!==e?t.set(e):t.clear(),t},t.invertMatrix=function(t,e){var n;n=e._[0]*e._[3]-e._[2]*e._[1],0!==n?(t._[0]=e._[3]/n,t._[2]=-e._[2]/n,t._[4]=(e._[2]*e._[5]-e._[4]*e._[3])/n,t._[1]=-e._[1]/n,t._[3]=e._[0]/n,t._[5]=(e._[4]*e._[1]-e._[0]*e._[5])/n):t.clear()},t.calcColorTransformId=function(t,e,n,r){var i;if(0===r)e.set(n);else if(0===(r&_.COLORTRANSFORM_FLAG)){for(t=t.data.alphaTransforms[r],r=i=0;3>i;r=++i)e.multi._[r]=n.multi._[r];e.multi._[3]=n.multi._[3]*t._[0]}else r&=~_.COLORTRANSFORM_FLAG,t=t.data.colorTransforms[r],this.calcColorTransform(e,n,t);return e},t.calcColorTransform=function(t,e,n){var r,i;for(r=i=0;4>i;r=++i)t.multi._[r]=e.multi._[r]*n.multi._[r];return t},t.copyColorTransform=function(t,e){return null!==e?t.set(e):t.clear(),t},t.calcColor=function(t,e,n){var r,i;for(r=i=0;4>i;r=++i)t._[r]=e._[r]*n.multi._[r]},t.newIntArray=function(){return[]},t.insertIntArray=function(t,e){var n;0===t.length||e>t[t.length-1]?t.push(e):(n=this.locationOfIntArray(t,e,0,t.length-1),t[n]!==e&&t.splice(n,0,e))},t.deleteIntArray=function(t,e){var n;n=this.locationOfIntArray(t,e,0,t.length-1),t[n]===e&&t.splice(n,1)},t.locationOfIntArray=function(t,e,n,r){for(var i;r>=n;)if(i=(n+r)/2>>0,e>t[i])n=i+1;else{if(!(e<t[i]))return i;r=i-1}return n},t}(),P=function(){function t(){}return t.prototype.constructBitmap=function(){return null},t.prototype.constructBitmapEx=function(){return null},t.prototype.constructText=function(){return null},t.prototype.constructParticle=function(){return null},t.prototype.init=function(){},t.prototype.beginRender=function(){},t.prototype.endRender=function(){},t.prototype.destruct=function(){},t}(),M=function(){function t(t,e,n,r){this.lwf=t,this.parent=e,this.type=n,this.objectId=r,this.colorTransformId=this.matrixId=null,this.colorTransformIdChanged=this.matrixIdChanged=!0,this.matrix=new S(0,0,0,0,0,0),this.colorTransform=new v(0,0,0,0),this.execCount=0,this.updated=!1,this.isButton=this.type===Y.BUTTON,this.isMovie=this.type===Y.MOVIE||this.type===Y.ATTACHEDMOVIE,this.isParticle=this.type===Y.PARTICLE,this.isProgramObject=this.type===Y.PROGRAMOBJECT,this.isText=this.type===Y.TEXT}return t.prototype.exec=function(t,e){null==t&&(t=0),null==e&&(e=0),this.matrixId!==t&&(this.matrixIdChanged=!0,this.matrixId=t),this.colorTransformId!==e&&(this.colorTransformIdChanged=!0,this.colorTransformId=e)},t.prototype.update=function(t,e){this.updated=!0,null!==t&&(U.calcMatrixId(this.lwf,this.matrix,t,this.dataMatrixId),this.matrixIdChanged=!1),null!==e&&(U.copyColorTransform(this.colorTransform,e),this.colorTransformIdChanged=!1),this.lwf.renderObject()},t.prototype.render=function(t,e){var n,r,i;null!=this.renderer&&(r=this.lwf.renderingIndex,i=this.lwf.renderingIndexOffsetted,n=this.lwf.renderingCount,e!==Number.MIN_VALUE&&(r=i-e+n),this.renderer.render(this.matrix,this.colorTransform,r,n,t)),this.lwf.renderObject()},t.prototype.inspect=function(t,e,n,r){var i,o,s;o=this.lwf.renderingIndex,s=this.lwf.renderingIndexOffsetted,i=this.lwf.renderingCount,r!==Number.MIN_VALUE&&(o=s+r+i),t(this,e,n,o),this.lwf.renderObject()},t.prototype.destroy=function(){this.renderer&&(this.renderer.destruct(),this.renderer=null),this.lwf=this.parent=null},t}(),F=function(t){function e(t,n,i){var s,a,h,l,c,u,p;for(e.__super__.constructor.call(this,t,n,Y.GRAPHIC,i),i=t.data.graphics[i],c=i.graphicObjects,this.displayList=[],h=t.data.graphicObjects,l=p=0;c>=0?c>p:p>c;l=c>=0?++p:--p)if(s=h[i.graphicObjectId+l],a=s.graphicObjectId,-1!==a){switch(s.graphicObjectType){case E.BITMAP:u=new r(t,n,a);break;case E.BITMAPEX:u=new o(t,n,a);break;case E.TEXT:u=new j(t,n,a)}u.exec(),this.displayList[l]=u}}return Q(e,t),e.prototype.update=function(t,e){var n,r,i,o,s,a,h,l;for(r=this.matrix.setWithComparing(t),n=this.colorTransform.setWithComparing(e),l=this.displayList,a=0,h=l.length;h>a;a++)i=l[a],s=r||!i.updated||i.matrixIdChanged?t:null,o=n||!i.updated||i.colorTransformIdChanged?e:null,i.update(s,o)},e.prototype.render=function(t,e){var n,r,i,o;for(o=this.displayList,r=0,i=o.length;i>r;r++)n=o[r],n.render(t,e)},e.prototype.destroy=function(){var t,e,n,r;for(r=this.displayList,e=0,n=r.length;n>e;e++)t=r[e],t.destroy();this.displayList=null},e}(M),r=function(t){function e(t,n,r){e.__super__.constructor.call(this,t,n,Y.BITMAP,r),this.dataMatrixId=t.data.bitmaps[r].matrixId,this.renderer=t.rendererFactory.constructBitmap(t,r,this)}return Q(e,t),e}(M),o=function(t){function e(t,n,r){e.__super__.constructor.call(this,t,n,Y.BITMAPEX,r),this.dataMatrixId=t.data.bitmapExs[r].matrixId,this.renderer=t.rendererFactory.constructBitmapEx(t,r,this)}return Q(e,t),e}(M),j=function(t){function e(t,n,r,i){null==i&&(i=-1),e.__super__.constructor.call(this,t,n,Y.TEXT,r),n=t.data.texts[r],this.dataMatrixId=n.matrixId,-1!==n.nameStringId?this.name=t.data.strings[n.nameStringId]:i>=0&&i<t.data.instanceNames.length&&(i=t.getInstanceNameStringId(i),-1!==i&&(this.name=t.data.strings[i])),this.renderer=t.rendererFactory.constructText(t,r,this)}return Q(e,t),e}(M),H=function(t){function e(t,n,r){e.__super__.constructor.call(this,t,n,Y.PARTICLE,r),this.dataMatrixId=t.data.particles[r].matrixId,this.renderer=t.rendererFactory.constructParticle(t,r,this)}return Q(e,t),e.prototype.update=function(t,n){e.__super__.update.call(this,t,n),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},e}(M),N=function(t){function e(t,n,r){e.__super__.constructor.call(this,t,n,Y.PROGRAMOBJECT,r),n=t.data.programObjects[r],this.dataMatrixId=n.matrixId,t=t.getProgramObjectConstructor(r),null!=t&&(this.renderer=t(this,r,n.width,n.height))}return Q(e,t),e.prototype.update=function(t,n){e.__super__.update.call(this,t,n),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},e}(M),f=function(t){function e(t,n,r,i,o){e.__super__.constructor.call(this,t,n,r,i),this.linkInstance=this.nextInstance=this.prevInstance=null,this.instanceId=o>=t.data.instanceNames.length?-1:o,0<=this.instanceId&&(r=t.getInstanceNameStringId(this.instanceId),-1!==r&&(this.name=t.data.strings[r],null!=n&&(n[this.name]=this)),t=this.lwf.getInstance(this.instanceId),null!=t&&(t.prevInstance=this),this.nextInstance=t,this.lwf.setInstance(this.instanceId,this))}return Q(e,t),e.prototype.destroy=function(){var t;return this.type!==Y.ATTACHEDMOVIE&&0<=this.instanceId&&(t=this.lwf.getInstance(this.instanceId),t===this&&this.lwf.setInstance(this.instanceId,this.nextInstance),null!=this.nextInstance&&(this.nextInstance.prevInstance=this.prevInstance),null!=this.prevInstance&&(this.prevInstance.nextInstance=this.nextInstance)),null!=this.name&&"undefined"!=typeof parent&&null!==parent&&delete parent[this.name],this.linkInstance=this.nextInstance=this.prevInstance=null,e.__super__.destroy.apply(this,arguments)},e.prototype.linkButton=function(){},e.prototype.getFullName=function(){var t,e,n;for(n=t="",e=this;null!=e;){if(null==e.name)return null;t=e.name+n+t,n=".",e=e.parent}return t},e}(M),s=function(t){function e(t,n,r,i,o,s){null==o&&(o=null),null==s&&(s=null),e.__super__.constructor.call(this,t,n,Y.BUTTON,r,i),this.matrixId=o,this.colorTransformId=s,this.invert=new S,this.hitY=this.hitX=Number.MIN_VALUE,r>=0?(this.data=t.data.buttons[r],this.dataMatrixId=this.data.matrixId,this.width=this.data.width,this.height=this.data.height):this.height=this.width=0,this.handler=t.getButtonEventHandlers(this),null!=this.handler&&this.handler.call("load",this)}return Q(e,t),e.prototype.setHandlers=function(t){null!=this.handler?this.handler.concat(t):this.handler=t},e.prototype.exec=function(t,n){null==t&&(t=0),null==n&&(n=0),e.__super__.exec.call(this,t,n),this.enterFrame()},e.prototype.update=function(t,n){e.__super__.update.call(this,t,n),null!=this.handler&&this.handler.call("update",this)},e.prototype.render=function(){null!=this.handler&&this.handler.call("render",this)},e.prototype.destroy=function(){this.lwf.clearFocus(this),this.lwf.clearPressed(this),null!=this.handler&&this.handler.call("unload",this),e.__super__.destroy.apply(this,arguments)},e.prototype.linkButton=function(){this.lwf.focus===this&&(this.lwf.focusOnLink=!0),this.buttonLink=this.lwf.buttonHead,this.lwf.buttonHead=this},e.prototype.checkHit=function(t,e){var n,r;return U.invertMatrix(this.invert,this.matrix),r=U.calcMatrixToPoint(t,e,this.invert),n=r[0],r=r[1],n>=0&&n<this.data.width&&r>=0&&r<this.data.height?(this.hitX=n,this.hitY=r,!0):(this.hitY=this.hitX=Number.MIN_VALUE,!1)},e.prototype.enterFrame=function(){null!=this.handler&&this.handler.call("enterFrame",this)},e.prototype.rollOver=function(){null!=this.handler&&this.handler.call("rollOver",this),this.playAnimation(I.ROLLOVER)},e.prototype.rollOut=function(){null!=this.handler&&this.handler.call("rollOut",this),this.playAnimation(I.ROLLOUT)},e.prototype.press=function(){null!=this.handler&&this.handler.call("press",this),this.playAnimation(I.PRESS)},e.prototype.release=function(){null!=this.handler&&this.handler.call("release",this),this.playAnimation(I.RELEASE)},e.prototype.keyPress=function(t){null!=this.handler&&this.handler.call("keyPress",this),this.playAnimation(I.KEYPRESS,t)},e.prototype.playAnimation=function(t,e){var n,r,i,o;for(null==e&&(e=0),r=this.lwf.data.buttonConditions,n=i=0,o=this.data.conditions;o>=0?o>i:i>o;n=o>=0?++i:--i)n=r[this.data.conditionId+n],0===(n.condition&t)||t===I.KEYPRESS&&n.keyCode!==e||this.lwf.playAnimation(n.animationId,this.parent,this)},e.prototype.addEventHandler=function(t,e){switch(t){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":this.lwf.setInteractive(),this.lwf.enableExec(),null==this.handler&&this.setHandlers(new a),this.handler.addHandler(t,e)}},e.prototype.removeEventHandler=function(t,e){switch(t){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.removeHandler(t,e)}},e.prototype.clearEventHandler=function(t){switch(null==t&&(t=null),t){case null:null!=this.handler&&this.handler.clear();break;case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.clear(t)}},e.prototype.setEventHandler=function(t,e){this.clearEventHandler(t),this.addEventHandler(t,e)},e}(f),L=function(t){function e(t,e){this.parent=t,this.child=e,this.lwf=this.parent.lwf}return Q(e,t),e.prototype.checkHit=function(t,e){return null!==this.child.inputPoint(t,e)?!0:!1},e.prototype.rollOver=function(){},e.prototype.rollOut=function(){null!=this.child.focus&&(this.child.focus.rollOut(),this.child.clearFocus(this.child.focus))},e.prototype.press=function(){this.child.inputPress()},e.prototype.release=function(){this.child.inputRelease()},e.prototype.keyPress=function(t){this.child.inputKeyPress(t)},e}(s),X=function(){function t(t){this.lwf=t,this.matrix=new S,this.colorTransform=new v,this.scaleY=this.scaleX=1,this.rotation=0,this.hasColorTransform=this.hasMatrix=!1,this.clearRenderingOffset()}return t.prototype.clear=function(){this.scaleY=this.scaleX=1,this.rotation=0,this.matrix.clear(),this.colorTransform.clear(),(this.hasMatrix||this.hasColorTransform)&&this.lwf.setPropertyDirty(),this.hasColorTransform=this.hasMatrix=!1,this.clearRenderingOffset()},t.prototype.move=function(t,e){this.matrix._[4]+=t,this.matrix._[5]+=e,this.hasMatrix=!0,this.lwf.setPropertyDirty()},t.prototype.moveTo=function(t,e){this.matrix._[4]=t,this.matrix._[5]=e,this.hasMatrix=!0,this.lwf.setPropertyDirty()},t.prototype.rotate=function(t){this.rotateTo(this.rotation+t)},t.prototype.rotateTo=function(t){this.rotation=t,this.setScaleAndRotation()},t.prototype.scale=function(t,e){this.scaleX*=t,this.scaleY*=e,this.setScaleAndRotation()},t.prototype.scaleTo=function(t,e){this.scaleX=t,this.scaleY=e,this.setScaleAndRotation()},t.prototype.setScaleAndRotation=function(){var t,e;e=this.rotation*Math.PI/180,0===e?(t=1,e=0):(t=Math.cos(e),e=Math.sin(e)),this.matrix._[0]=this.scaleX*t,this.matrix._[2]=this.scaleY*-e,this.matrix._[1]=this.scaleX*e,this.matrix._[3]=this.scaleY*t,this.hasMatrix=!0,this.lwf.setPropertyDirty()},t.prototype.setMatrix=function(t,e,n,r){this.scaleX=null!=e?e:1,this.scaleY=null!=n?n:1,this.rotation=null!=r?r:0,this.matrix.set(t),this.hasMatrix=!0,this.lwf.setPropertyDirty()},t.prototype.setAlpha=function(t){this.colorTransform.multi._[3]=t,this.hasColorTransform=!0,this.lwf.setPropertyDirty()},t.prototype.setColorTransform=function(t){this.colorTransform.set(t),this.hasColorTransform=!0,this.lwf.setPropertyDirty()},t.prototype.setRenderingOffset=function(t){this.renderingOffset=t,this.hasRenderingOffset=!0},t.prototype.clearRenderingOffset=function(){this.renderingOffset=Number.MIN_VALUE,this.hasRenderingOffset=!1},t}(),i=function(t){function e(t,n,r){var i;e.__super__.constructor.call(this,t,n,Y.BITMAP,r),n=t.data.bitmaps[r],i=t.data.textureFragments[n.textureFragmentId],this.width=i.w,this.height=i.h,this.dataMatrixId=n.matrixId,this.renderer=t.rendererFactory.constructBitmap(t,r,this),this._y=this._x=this._regY=this._regX=0,this._scaleY=this._scaleX=1,this._rotation=0,this._alpha=1,this.depth=-1,this.dirtyMatrix=this.visible=!0,this.dirtyMatrixSR=!1,this.dirtyColorTransform=!0,this.mScaleY=this.mScaleX=1,this.mSkew1=this.mSkew0=0}return Q(e,t),e.prototype.updateMatrix=function(t){var e,n,r;this.dirtyMatrixSR&&(n=this._rotation*Math.PI/180,0===n?(e=1,n=0):(e=Math.cos(n),n=Math.sin(n)),this.mScaleX=this._scaleX*e,this.mSkew0=this._scaleY*-n,this.mSkew1=this._scaleX*n,this.mScaleY=this._scaleY*e,this.dirtyMatrixSR=!1),n=this._x-this._regX,r=this._y-this._regY,e=this.matrix,e.scaleX=t.scaleX*this.mScaleX+t.skew0*this.mSkew1,e.skew0=t.scaleX*this.mSkew0+t.skew0*this.mScaleY,e.translateX=t.scaleX*n+t.skew0*r+t.translateX+t.scaleX*this._regX+t.skew0*this._regY+e.scaleX*-this._regX+e.skew0*-this._regY,e.skew1=t.skew1*this.mScaleX+t.scaleY*this.mSkew1,e.scaleY=t.skew1*this.mSkew0+t.scaleY*this.mScaleY,e.translateY=t.skew1*n+t.scaleY*r+t.translateY+t.skew1*this._regX+t.scaleY*this._regY+e.skew1*-this._regX+e.scaleY*-this._regY,this.dirtyMatrix=!1},e.prototype.updateColorTransform=function(t){var e;e=this.colorTransform.multi,t=t.multi,e.red=t.red,e.green=t.green,e.blue=t.blue,e.alpha=this._alpha*t.alpha,this.dirtyColorTransform=!1},e.prototype.dirty=function(t){null==t&&(t=!1),this.lwf.setPropertyDirty(),this.dirtyMatrix=!0,t&&(this.dirtyMatrixSR=!0)},e.prototype.getRegX=function(){return this._regX},e.prototype.setRegX=function(t){this._regX!==t&&this.dirty(),this._regX=t},e.prototype.getRegY=function(){return this._regY},e.prototype.setRegY=function(t){this._regY!==t&&this.dirty(),this._regY=t},e.prototype.getX=function(){return this._x},e.prototype.setX=function(t){this._x!==t&&this.dirty(),this._x=t},e.prototype.getY=function(){return this._y},e.prototype.setY=function(t){this._y!==t&&this.dirty(),this._y=t},e.prototype.getScaleX=function(){return this._scaleX},e.prototype.setScaleX=function(t){this._scaleX!==t&&this.dirty(!0),this._scaleX=t},e.prototype.getScaleY=function(){return this._scaleY},e.prototype.setScaleY=function(t){this._scaleY!==t&&this.dirty(!0),this._scaleY=t},e.prototype.getRotation=function(){return this._rotation},e.prototype.setRotation=function(t){this._rotation!==t&&this.dirty(!0),this._rotation=t},e.prototype.getAlphaProperty=function(){return this._alpha},e.prototype.setAlphaProperty=function(t){this._alpha!==t&&(this.lwf.setPropertyDirty(),this.dirtyColorTransform=!0),this._alpha=t},e}(M),"undefined"!=typeof i.prototype.__defineGetter__?(i.prototype.__defineGetter__("regX",function(){return this.getRegX()}),i.prototype.__defineSetter__("regX",function(t){return this.setRegX(t)}),i.prototype.__defineGetter__("regY",function(){return this.getRegY()}),i.prototype.__defineSetter__("regY",function(t){return this.setRegY(t)}),i.prototype.__defineGetter__("x",function(){return this.getX()}),i.prototype.__defineSetter__("x",function(t){return this.setX(t)}),i.prototype.__defineGetter__("y",function(){return this.getY()}),i.prototype.__defineSetter__("y",function(t){return this.setY(t)}),i.prototype.__defineGetter__("scaleX",function(){return this.getScaleX()}),i.prototype.__defineSetter__("scaleX",function(t){return this.setScaleX(t)}),i.prototype.__defineGetter__("scaleY",function(){return this.getScaleY()}),i.prototype.__defineSetter__("scaleY",function(t){return this.setScaleY(t)}),i.prototype.__defineGetter__("rotation",function(){return this.getRotation()}),i.prototype.__defineSetter__("rotation",function(t){return this.setRotation(t)}),i.prototype.__defineGetter__("alpha",function(){return this.getAlphaProperty()}),i.prototype.__defineSetter__("alpha",function(t){return this.setAlphaProperty(t)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(i.prototype,"regX",{get:function(){return this.getRegX()},set:function(t){return this.setRegX(t)}}),Object.defineProperty(i.prototype,"regY",{get:function(){return this.getRegY()},set:function(t){return this.setRegY(t)}}),Object.defineProperty(i.prototype,"x",{get:function(){return this.getX()},set:function(t){return this.setX(t)}}),Object.defineProperty(i.prototype,"y",{get:function(){return this.getY()},set:function(t){return this.setY(t)}}),Object.defineProperty(i.prototype,"scaleX",{get:function(){return this.getScaleX()},set:function(t){return this.setScaleX(t)}}),Object.defineProperty(i.prototype,"scaleY",{get:function(){return this.getScaleY()},set:function(t){return this.setScaleY(t)}}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this.getRotation()},set:function(t){return this.setRotation(t)}}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.getAlphaProperty()},set:function(t){return this.setAlphaProperty(t)}})),R=function(t){function e(t,n,r,i,o,s,a,l,c){var u;null==o&&(o=null),null==s&&(s=null),null==a&&(a=!1),null==l&&(l=null),null==c&&(c=null),e.__super__.constructor.call(this,t,n,a?Y.ATTACHEDMOVIE:Y.MOVIE,r,i),null!=c&&(this.name=c),this.matrixId=o,this.colorTransformId=s,this.data=t.data.movies[r],this.totalFrames=this.data.frames,this.instanceTail=this.instanceHead=null,this.lastControls=this.lastControlOffset=this.animationPlayedFrame=this.execedFrame=this.currentFrameInternal=-1,this.lastHasButton=!1,this.lastControlAnimationOffset=-1,this.postLoaded=this.skipped=!1,this.playing=this.visible=this.active=!0,this.attachMoviePostExeced=this.attachMovieExeced=this.overriding=this.jumped=!1,this.postExecCount=this.movieExecCount=-1,this.eventHandlers={},this.property=new X(t),this.matrix0=new S,this.matrix1=new S,this.colorTransform0=new v,this.colorTransform1=new v,this.blendMode="normal",this.displayList=[],this.depth=this.attachName=null,this.hasButton=!1,this.getMovieFunctions(),r===this.lwf.data.header.rootMovieId&&(n=null!=(u=this.lwf.functions)?u.init:void 0,null!=n&&n.call(this)),null!=this.loadFunc&&this.loadFunc.call(this),this.playAnimation(h.LOAD),this.handler=new k,this.handler.concat(t.getMovieEventHandlers(this)),this.handler.concat(l),this.handler.empty||this.handler.call("load",this),t.execMovieCommand()}return Q(e,t),e.prototype.getMovieFunctions=function(){var t;t=this.lwf.getMovieFunctions(this.objectId),this.loadFunc=t[0],this.postLoadFunc=t[1],this.unloadFunc=t[2],this.enterFrameFunc=t[3]},e.prototype.setHandlers=function(t){this.handler.concat(t)},e.prototype.play=function(){return this.playing=!0,this},e.prototype.stop=function(){return this.playing=!1,this},e.prototype.nextFrame=function(){return this.jumped=!0,this.stop(),this.currentFrameInternal<this.totalFrames-1&&++this.currentFrameInternal,this},e.prototype.prevFrame=function(){return this.jumped=!0,this.stop(),0<this.currentFrameInternal&&--this.currentFrameInternal,this},e.prototype.gotoFrame=function(t){return this.gotoFrameInternal(t-1)},e.prototype.gotoFrameInternal=function(t){return this.jumped=!0,this.stop(),this.currentFrameInternal=t,this},e.prototype.setVisible=function(t){return this.visible=t,this},e.prototype.globalToLocal=function(t){var e,n;return this.property.hasMatrix?(n=new S,n=U.calcMatrix(n,this.matrix,this.property.matrix)):n=this.matrix,e=new S,U.invertMatrix(e,n),t=U.calcMatrixToPoint(t.x,t.y,e),new W(t[0],t[1])},e.prototype.localToGlobal=function(t){var e;return this.property.hasMatrix?(e=new S,e=U.calcMatrix(e,this.matrix,this.property.matrix)):e=this.matrix,t=U.calcMatrixToPoint(t.x,t.y,e),new W(t[0],t[1])},e.prototype.getDepth=function(t){return 0===t.length?0:t[t.length-1]+1},e.prototype.reorderList=function(t,e,n,r,i,o){var s;if(U.insertIntArray(e,r),n[r]=i,t){t=0,r={};for(s in n)i=n[s],o(i,t),e[t]=t,r[t]=i,++t;n=r}return n},e.prototype.deleteAttachedMovie=function(t,e,n,r){var i,o;return null==n&&(n=!0),null==r&&(r=!0),i=e.attachName,o=e.depth,delete t.attachedMovies[i],delete t.attachedMovieList[o],U.deleteIntArray(t.attachedMovieListKeys,o),r&&delete t.detachedMovies[i],delete t[i],n?e.destroy():void 0},e.prototype.attachMovie=function(t,n,r){var i,o,s,a,h;if(null==r&&(r=null),t instanceof T)return this.attachLWF(t,n,r);if(null==r&&(r={}),i=r.depth,a=null!=(h=r.reorder)?h:!1,t instanceof e&&t.lwf===this.lwf)o=t,this.deleteAttachedMovie(o.parent,o,!1);else{if("string"!=typeof t)return null;if(s=this.lwf.searchMovieLinkage(this.lwf.getStringId(t)),-1===s)return null}return null==this.attachedMovies&&(this.attachedMovies={},this.detachedMovies={},this.attachedMovieList={},this.attachedMovieListKeys=U.newIntArray()),t=this.attachedMovies[n],null!=t&&this.deleteAttachedMovie(this,t),a||null==i||(t=this.attachedMovieList[i],null!=t&&this.deleteAttachedMovie(this,t)),t=new k,t.add(r),null!=o?(o.parent=this,o.setHandlers(t)):(o=new e(this.lwf,this,s,-1,0,0,!0,t,n),this.attachMovieExeced&&o.exec(),this.attachMoviePostExeced&&o.postExec(!0)),o.attachName=n,null==i&&(i=this.getDepth(this.attachedMovieListKeys)),o.depth=i,this.attachedMovies[n]=o,this.attachedMovieList=this.reorderList(a,this.attachedMovieListKeys,this.attachedMovieList,o.depth,o,function(t,e){return t.depth=e}),this[n]=o},e.prototype.attachEmptyMovie=function(t,e){return null==e&&(e=null),this.attachMovie("_empty",t,e)},e.prototype.swapAttachedMovieDepth=function(t,e){var n,r;null!=this.attachedMovies&&t!==e&&(n=this.attachedMovieList[t],r=this.attachedMovieList[e],null!=n?(n.depth=e,this.attachedMovieList[e]=n,U.insertIntArray(this.attachedMovieListKeys,e)):(delete this.attachedMovieList[e],U.deleteIntArray(this.attachedMovieListKeys,e)),null!=r?(r.depth=t,this.attachedMovieList[t]=r,U.insertIntArray(this.attachedMovieListKeys,t)):(delete this.attachedMovieList[t],U.deleteIntArray(this.attachedMovieListKeys,t)))},e.prototype.getAttachedMovie=function(t){if(null==this.attachedMovies)return null;switch(typeof t){case"string":return this.attachedMovies[t];case"number":return this.attachedMovieList[t]}},e.prototype.searchAttachedMovie=function(t,e){var n,r;if(null==e&&(e=!0),n=this.getAttachedMovie(t),null!=n)return n;if(!e)return null;for(r=this.instanceHead;null!==r;){if(r.isMovie&&(n=r.searchAttachedMovie(t,e),null!==n))return n;r=r.linkInstance}return null},e.prototype.detachMovie=function(t){var n;if(null!=this.detachedMovies)if(t instanceof e)null!=(null!=t?t.attachName:void 0)&&(this.detachedMovies[t.attachName]=!0);else switch(typeof t){case"string":this.detachedMovies[t]=!0;break;case"number":t=null!=(n=this.attachedMovieList)?n[t]:void 0,null!=(null!=t?t.attachName:void 0)&&(this.detachedMovies[t.attachName]=!0)}},e.prototype.detachFromParent=function(){this.type===Y.ATTACHEDMOVIE&&(this.active=!1,null!=this.parent&&this.parent.detachMovie(this))},e.prototype.removeMovieClip=function(){null!=this.attachName?null!=this.parent&&this.parent.detachMovie(this):null!=this.lwf.attachName&&null!=this.lwf.parent&&this.lwf.parent.detachLWF(this.lwf)},e.prototype.attachBitmap=function(t,e){var n;return n=this.lwf.data.bitmapMap[t],null==n?null:(n=new i(this.lwf,this,n),null!=this.bitmapClips?this.detachBitmap(e):this.bitmapClips=[],this.bitmapClips[e]=n,n.depth=e,n.name=t,n)},e.prototype.getAttachedBitmaps=function(){return this.bitmapClips},e.prototype.getAttachedBitmap=function(t){return null==this.bitmapClips?null:this.bitmapClips[t]},e.prototype.detachBitmap=function(t){var e;null!=this.bitmapClips&&(e=this.bitmapClips[t],null!=e&&(e.destroy(),this.bitmapClips[t]=null))},e.prototype.execDetachHandler=function(t){t=t.child,null!=t.detachHandler?t.detachHandler(t)?t.destroy():(t.setAttachVisible(!1),t.render()):t.destroy(),t.parent=null,t.detachHandler=null,t.attachName=null},e.prototype.deleteAttachedLWF=function(t,e,n,r){var i,o;return null==n&&(n=!0),null==r&&(r=!0),i=e.child.attachName,o=e.child.depth,delete t.attachedLWFs[i],delete t.attachedLWFList[o],U.deleteIntArray(t.attachedLWFListKeys,o),r&&delete t.detachedLWFs[i],delete t[i],n?this.execDetachHandler(e):void 0},e.prototype.attachLWF=function(t,e,n){var r,i,o;null==n&&(n=null),null==n&&(n={}),r=n.depth,o=null!=(i=n.reorder)?i:!1,n=n.detach,null==this.attachedLWFs&&(this.attachedLWFs={},this.detachedLWFs={},this.attachedLWFList={},this.attachedLWFListKeys=U.newIntArray()),null!=t.parent&&(i=t.parent.attachedLWFs[t.attachName],this.deleteAttachedLWF(t.parent,i,!1)),i=this.attachedLWFs[e],null!=i&&this.deleteAttachedLWF(this,i),o||null==r||(i=this.attachedLWFList[r],null!=i&&this.deleteAttachedLWF(this,i)),i=new L(this,t),t.interactive&&this.lwf.setInteractive(),t.setParent(this),t.rootMovie.parent=this,t.detachHandler=n,t.attachName=e,null==r&&(r=this.getDepth(this.attachedLWFListKeys)),t.depth=r,this.attachedLWFs[e]=i,this.attachedLWFList=this.reorderList(o,this.attachedLWFListKeys,this.attachedLWFList,t.depth,i,function(t,e){return t.child.depth=e}),this[e]=t.rootMovie,null!=t.lwfInstanceId&&delete this.lwf.loadedLWFs[t.lwfInstanceId],this.lwf.isLWFAttached=!0},e.prototype.swapAttachedLWFDepth=function(t,e){var n,r;null!=this.attachedLWFs&&t!==e&&(n=this.attachedLWFList[t],r=this.attachedLWFList[e],null!=n?(n.child.depth=e,this.attachedLWFList[e]=n,U.insertIntArray(this.attachedLWFListKeys,e)):(delete this.attachedLWFList[e],U.deleteIntArray(this.attachedLWFListKeys,e)),null!=r?(r.child.depth=t,this.attachedLWFList[t]=r,U.insertIntArray(this.attachedLWFListKeys,t)):(delete this.attachedLWFList[t],U.deleteIntArray(this.attachedLWFListKeys,t)))},e.prototype.swapDepths=function(t){t instanceof e?null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,t.depth):this.lwf===t.lwf&&null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,t.lwf.depth):null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,t):null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,t)},e.prototype.getAttachedLWF=function(t){var e,n;if(null==this.attachedLWFs)return null;switch(typeof t){case"string":return null!=(e=this.attachedLWFs[t])?e.child:void 0;case"number":return null!=(n=this.attachedLWFList[t])?n.child:void 0}},e.prototype.searchAttachedLWF=function(t,e){var n,r;if(null==e&&(e=!0),n=this.getAttachedLWF(t),null!=n)return n;if(!e)return null;for(r=this.instanceHead;null!==r;){if(r.isMovie&&(n=r.searchAttachedLWF(t,e),null!==n))return n;r=r.linkInstance}return null},e.prototype.detachLWF=function(t){var e,n;if(null!=this.detachedLWFs)if(t instanceof T)null!=(null!=t?t.attachName:void 0)&&(this.detachedLWFs[t.attachName]=!0);
else switch(typeof t){case"string":this.detachedLWFs[t]=!0;break;case"number":t=null!=(e=this.attachedLWFList)?e[t]:void 0,null!=(null!=t?null!=(n=t.child)?n.attachName:void 0:void 0)&&(this.detachedLWFs[t.child.attachName]=!0)}},e.prototype.detachAllLWFs=function(){var t,e,n;if(null!=this.detachedLWFs)for(t in n=this.attachedLWFs)e=n[t],this.detachedLWFs[e.child.attachName]=!0},e.prototype.execObject=function(t,n,i,a,h){var l,c;if(-1!==n){if(l=this.lwf.data,n=l.objects[n],l=n.objectId,c=this.displayList[t],null!=c&&(c.type!==n.objectType||c.objectId!==l||c.isMovie&&c.instanceId!==h)&&(c.destroy(),c=null),null==c)switch(n.objectType){case Y.BUTTON:c=new s(this.lwf,this,l,h,i,a);break;case Y.GRAPHIC:c=new F(this.lwf,this,l);break;case Y.MOVIE:c=new e(this.lwf,this,l,h,i,a);break;case Y.BITMAP:c=new r(this.lwf,this,l);break;case Y.BITMAPEX:c=new o(this.lwf,this,l);break;case Y.TEXT:c=new j(this.lwf,this,l,h);break;case Y.PARTICLE:c=new H(this.lwf,this,l);break;case Y.PROGRAMOBJECT:c=new N(this.lwf,this,l)}(c.isMovie||c.isButton)&&(c.linkInstance=null,null===this.instanceHead?this.instanceHead=c:this.instanceTail.linkInstance=c,this.instanceTail=c,c.isButton&&(this.hasButton=!0)),this.displayList[t]=c,c.execCount=this.movieExecCount,c.exec(i,a)}},e.prototype.override=function(t,e){this.overriding=!0,U.copyMatrix(this.matrix,t),U.copyColorTransform(this.colorTransform,e),this.lwf.isPropertyDirty=!0},e.prototype.exec=function(t,n){null==t&&(t=0),null==n&&(n=0),this.attachMoviePostExeced=this.attachMovieExeced=!1,e.__super__.exec.call(this,t,n)},e.prototype.postExec=function(t){var e,n,r,i,o,s,a,l,c;if(this.hasButton=!1,this.active){for(this.execedFrame=-1,a=this.postExecCount===this.lwf.execCount,t&&this.playing&&!this.jumped&&!a&&++this.currentFrameInternal;(0>this.currentFrameInternal||this.currentFrameInternal>=this.totalFrames)&&(this.currentFrameInternal=0),this.currentFrameInternal!==this.execedFrame;){if(this.execedFrame=this.currentFrameCurrent=this.currentFrameInternal,i=this.lwf.data,o=i.frames[this.data.frameOffset+this.currentFrameCurrent],this.lastControlOffset===o.controlOffset&&this.lastControls===o.controls)if(r=this.lastControlAnimationOffset,this.skipped){for(s=this.instanceHead;null!==s;)s.isMovie?(s.attachMovieExeced=!1,s.attachMoviePostExeced=!1):s.isButton&&s.enterFrame(),s=s.linkInstance;this.hasButton=this.lastHasButton}else{for(e=l=0,c=this.data.depths;c>=0?c>l:l>c;e=c>=0?++l:--l)s=this.displayList[e],null!=s&&(a||(s.matrixIdChanged=!1,s.colorTransformIdChanged=!1),s.isMovie?(s.attachMovieExeced=!1,s.attachMoviePostExeced=!1):s.isButton&&(s.enterFrame(),this.hasButton=!0));this.lastHasButton=this.hasButton,this.skipped=!0}else{for(++this.movieExecCount,this.instanceTail=this.instanceHead=null,this.lastControlOffset=o.controlOffset,this.lastControls=o.controls,r=-1,s=l=0,c=o.controls;c>=0?c>l:l>c;s=c>=0?++l:--l)switch(e=i.controls[o.controlOffset+s],e.controlType){case x.MOVE:s=i.places[e.controlId],this.execObject(s.depth,s.objectId,s.matrixId,0,s.instanceId);break;case x.MOVEM:e=i.controlMoveMs[e.controlId],s=i.places[e.placeId],this.execObject(s.depth,s.objectId,e.matrixId,0,s.instanceId);break;case x.MOVEC:e=i.controlMoveCs[e.controlId],s=i.places[e.placeId],this.execObject(s.depth,s.objectId,s.matrixId,e.colorTransformId,s.instanceId);break;case x.MOVEMC:e=i.controlMoveMCs[e.controlId],s=i.places[e.placeId],this.execObject(s.depth,s.objectId,e.matrixId,e.colorTransformId,s.instanceId);break;case x.ANIMATION:-1===r&&(r=s)}for(this.lastControlAnimationOffset=r,this.lastHasButton=this.hasButton,e=l=0,c=this.data.depths;c>=0?c>l:l>c;e=c>=0?++l:--l)s=this.displayList[e],null!=s&&s.execCount!==this.movieExecCount&&(s.destroy(),this.displayList[e]=null)}if(this.attachMovieExeced=!0,null!=this.attachedMovies)for(c=this.attachedMovieListKeys,s=0,l=c.length;l>s;s++)e=c[s],e=this.attachedMovieList[e],e.exec();for(s=this.instanceHead;null!==s;)s.isMovie&&(e=s,e.postExec(t),!this.hasButton&&e.hasButton&&(this.hasButton=!0)),s=s.linkInstance;if(this.attachMoviePostExeced=!0,null!=this.attachedMovies){e=this.detachedMovies;for(n in e)e=this.attachedMovies[n],null!=e&&this.deleteAttachedMovie(this,e,!0,!1);for(this.detachedMovies={},c=this.attachedMovieListKeys,l=0,s=c.length;s>l;l++)e=c[l],e=this.attachedMovieList[e],e.postExec(t),!this.hasButton&&e.hasButton&&(this.hasButton=!0)}if(null!=this.attachedLWFs&&(this.hasButton=!0),this.postLoaded||(this.postLoaded=!0,null!=this.postLoadFunc&&this.postLoadFunc.call(this),this.handler.empty||this.handler.call("postLoad",this)),-1!==r&&this.execedFrame===this.currentFrameInternal&&(e=this.animationPlayedFrame===this.currentFrameCurrent&&!this.jumped,!e))for(s=l=r,c=o.controls;c>=r?c>l:l>c;s=c>=r?++l:--l)e=i.controls[o.controlOffset+s],this.lwf.playAnimation(e.controlId,this);this.animationPlayedFrame=this.currentFrameCurrent,this.currentFrameCurrent===this.currentFrameInternal&&(this.jumped=!1)}null!=this.enterFrameFunc&&this.enterFrameFunc.call(this),this.playAnimation(h.ENTERFRAME),this.handler.empty||this.handler.call("enterFrame",this),this.postExecCount=this.lwf.execCount}},e.prototype.updateObject=function(t,e,n,r,i){return e=t.isMovie&&t.property.hasMatrix?e:r||!t.updated||t.matrixIdChanged?U.calcMatrixId(this.lwf,this.matrix1,e,t.matrixId):null,n=t.isMovie&&t.property.hasColorTransform?n:i||!t.updated||t.colorTransformIdChanged?U.calcColorTransformId(this.lwf,this.colorTransform1,n,t.colorTransformId):null,t.update(e,n)},e.prototype.update=function(t,e){var n,r,i,o,s,a,h,l=this;if(this.active){for(this.overriding?i=s=!0:(s=this.matrix.setWithComparing(t),i=this.colorTransform.setWithComparing(e)),this.handler.empty||this.handler.call("update",this),this.property.hasMatrix?(s=!0,t=U.calcMatrix(this.matrix0,this.matrix,this.property.matrix)):t=this.matrix,this.property.hasColorTransform?(i=!0,e=U.calcColorTransform(this.colorTransform0,this.colorTransform,this.property.colorTransform)):e=this.colorTransform,o=r=0,a=this.data.depths;a>=0?a>r:r>a;o=a>=0?++r:--r)o=this.displayList[o],null!=o&&this.updateObject(o,t,e,s,i);if(null!=this.bitmapClips)for(h=this.bitmapClips,a=0,o=h.length;o>a;a++)r=h[a],null!=r&&((s||r.dirtyMatrix)&&r.updateMatrix(t),(i||r.dirtyColorTransform)&&r.updateColorTransform(e));if(null!=this.attachedMovies||null!=this.attachedLWFs){if(null!=this.attachedMovies)for(h=this.attachedMovieListKeys,a=0,o=h.length;o>a;a++)r=h[a],r=this.attachedMovieList[r],this.updateObject(r,t,e,s,i);if(null!=this.attachedLWFs){i=this.detachedLWFs;for(n in i)i=this.attachedLWFs[n],null!=i&&this.deleteAttachedLWF(this,i,!0,!1);for(this.detachedLWFs={},a=this.attachedLWFListKeys,n=0,s=a.length;s>n;n++)r=a[n],i=this.attachedLWFList[r],this.lwf.renderObject(i.child.exec(this.lwf.thisTick,t,e))}}this.requestedCalculateBounds&&(this.xMin=Number.MAX_VALUE,this.xMax=-Number.MAX_VALUE,this.yMin=Number.MAX_VALUE,this.yMax=-Number.MAX_VALUE,n=function(t){return l.calculateBounds(t)},this.inspect(n,0,0),this.lwf.property.hasMatrix&&(n=new S,U.invertMatrix(n,this.lwf.property.matrix),i=U.calcMatrixToPoint(this.xMin,this.yMin,n),this.xMin=i[0],this.yMin=i[1],i=U.calcMatrixToPoint(this.xMax,this.yMax,n),this.xMax=i[0],this.yMax=i[1]),this.bounds={xMin:this.xMin,xMax:this.xMax,yMin:this.yMin,yMax:this.yMax},this.requestedCalculateBounds=!1)}},e.prototype.calculateBounds=function(t){var e,n,r;switch(t.type){case Y.GRAPHIC:for(r=t.displayList,e=0,n=r.length;n>e;e++)t=r[e],this.calculateBounds(t);break;case Y.BITMAP:case Y.BITMAPEX:e=t.type===Y.BITMAP?t.lwf.data.bitmaps[t.objectId].textureFragmentId:t.lwf.data.bitmapExs[t.objectId].textureFragmentId,null!=e&&e>=0&&(e=t.lwf.data.textureFragments[e],this.updateBounds(t.matrix,e.x,e.x+e.w,e.y,e.y+e.h));break;case Y.BUTTON:this.updateBounds(t.matrix,0,t.width,0,t.height);break;case Y.TEXT:e=t.lwf.data.texts[t.objectId],this.updateBounds(t.matrix,0,e.width,0,e.height);break;case Y.PROGRAMOBJECT:e=t.lwf.data.programObjects[t.objectId],this.updateBounds(t.matrix,0,e.width,0,e.height)}},e.prototype.updateBounds=function(t,e,n,r,i){var o;for(r=[[e,r],[e,i],[n,r],[n,i]],e=0,n=r.length;n>e;e++)i=r[e],o=U.calcMatrixToPoint(i[0],i[1],t),i=o[0],o=o[1],i<this.xMin?this.xMin=i:i>this.xMax&&(this.xMax=i),o<this.yMin?this.yMin=o:o>this.yMax&&(this.yMax=o)},e.prototype.linkButton=function(){var t,e,n,r;if(this.visible&&this.active&&this.hasButton){for(t=e=0,n=this.data.depths;n>=0?n>e:e>n;t=n>=0?++e:--e)t=this.displayList[t],null!=t&&(t.isButton?t.linkButton():t.isMovie&&t.hasButton&&t.linkButton());if(null!=this.attachedMovies)for(r=this.attachedMovieListKeys,n=0,t=r.length;t>n;n++)e=r[n],e=this.attachedMovieList[e],e.hasButton&&e.linkButton();if(null!=this.attachedLWFs)for(r=this.attachedLWFListKeys,n=0,t=r.length;t>n;n++)e=r[n],e=this.attachedLWFList[e],e.linkButton()}},e.prototype.render=function(t,e){var n,r,i,o,s,a;if(this.visible&&this.active||(t=!1),o=i=!1,"normal"!==this.blendMode)switch(this.blendMode){case"add":this.lwf.beginBlendMode(this.blendMode),i=!0;break;case"erase":case"layer":case"mask":this.lwf.beginMaskMode(this.blendMode),o=!0}for(this.handler.empty||this.handler.call("render",this),this.property.hasRenderingOffset&&(this.lwf.renderOffset(),e=this.property.renderingOffset),e===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),r=n=0,s=this.data.depths;s>=0?s>n:n>s;r=s>=0?++n:--n)r=this.displayList[r],null!=r&&r.render(t,e);if(null!=this.bitmapClips)for(a=this.bitmapClips,s=0,r=a.length;r>s;s++)n=a[s],null!=n&&n.render(t&&n.visible,e);if(null!=this.attachedMovies)for(a=this.attachedMovieListKeys,s=0,r=a.length;r>s;s++)n=a[s],n=this.attachedMovieList[n],n.render(t,e);if(null!=this.attachedLWFs)for(a=this.attachedLWFListKeys,s=0,r=a.length;r>s;s++)n=a[s],n=this.attachedLWFList[n],n=n.child,n.setAttachVisible(t),this.lwf.renderObject(n.render(this.lwf.renderingIndex,this.lwf.renderingCount,e));i&&this.lwf.endBlendMode(),o&&this.lwf.endMaskMode()},e.prototype.inspect=function(t,e,n){var r,i,o,s,a;for(this.property.hasRenderingOffset&&(this.lwf.renderOffset(),i=this.property.renderingOffset),i===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),t(this,e,n,i),++e,n=o=0,s=this.data.depths;s>=0?s>o:o>s;n=s>=0?++o:--o)r=this.displayList[n],null!=r&&r.inspect(t,e,n,i);if(null!=this.bitmapClips)for(a=this.bitmapClips,o=0,s=a.length;s>o;o++)r=a[o],null!=r&&r.inspect(t,e,n++,i);if(null!=this.attachedMovies)for(a=this.attachedMovieListKeys,o=0,s=a.length;s>o;o++)r=a[o],r=this.attachedMovieList[r],r.inspect(t,e,n++,i);if(null!=this.attachedLWFs)for(a=this.attachedLWFListKeys,o=0,s=a.length;s>o;o++)r=a[o],r=this.attachedLWFList[r],r=r.child,this.lwf.renderObject(r.inspect(t,e,n++,i))},e.prototype.destroy=function(){var t,n,r,i,o;for(o=this.displayList,r=0,i=o.length;i>r;r++)t=o[r],null!=t&&t.destroy();if(null!=this.bitmapClips){for(o=this.bitmapClips,r=0,i=o.length;i>r;r++)t=o[r],null!=t&&t.destroy();this.bitmapClips=null}if(null!=this.attachedMovies){r=this.attachedMovies;for(n in r)t=r[n],t.destroy();this.attachedMovieListKeys=this.attachedMovieList=this.detachedMovies=this.attachedMovies=null}if(null!=this.attachedLWFs){r=this.attachedLWFs;for(n in r)t=r[n],this.execDetachHandler(t);this.attachedLWFListKeys=this.attachedLWFList=this.detachedLWFs=this.attachedLWFs=null}null!=this.unloadFunc&&this.unloadFunc.call(this),this.playAnimation(h.UNLOAD),this.handler.empty||this.handler.call("unload",this),this.property=this.displayList=this.instanceTail=this.instanceHead=null,e.__super__.destroy.apply(this,arguments)},e.prototype.playAnimation=function(t){var e,n,r,i;for(n=this.lwf.data.movieClipEvents,e=r=0,i=this.data.clipEvents;i>=0?i>r:r>i;e=i>=0?++r:--r)e=n[this.data.clipEventId+e],0!==(e.clipEvent&t)&&this.lwf.playAnimation(e.animationId,this)},e.prototype.dispatchEvent=function(t){var e,n,r,i,o;switch("object"==typeof t?(r=t.param,t=t.type):r=null,t){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.empty||this.handler.call(t,this);break;default:if(n=this.eventHandlers[t],null==n)return!1;var s;for(s=[],i=0,o=n.length;o>i;i++)e=n[i],s.push(e);for(n=s,i=0,o=n.length;o>i;i++)e=n[i],null!=e&&e.call(this,{type:t,param:r})}return!0},e.prototype.addEventHandler=function(t,e){var n;switch(t){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.lwf.enableExec(),this.handler.addHandler(t,e);break;default:null==(n=this.eventHandlers)[t]&&(n[t]=[]),this.eventHandlers[t].push(e)}},e.prototype.removeEventHandler=function(t,e){var n,r;switch(t){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.removeHandler(t,e);break;default:if(n=this.eventHandlers[t],null==n)break;for(r=0;r<n.length;)n[r]===e?n.splice(r,1):++r;0===n.length&&delete this.eventHandlers[t]}},e.prototype.clearEventHandler=function(t){switch(null==t&&(t=null),t){case null:this.handler.clear(),this.eventHandlers={};break;case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.clear(t);break;default:delete this.eventHandlers[t]}},e.prototype.setEventHandler=function(t,e){this.clearEventHandler(t),this.addEventHandler(t,e)},e.prototype.searchFrame=function(t){return this.lwf.searchFrame(this,t)},e.prototype.gotoLabel=function(t){return"string"==typeof t&&(t=this.lwf.getStringId(t)),this.gotoFrame(this.lwf.searchFrame(this,t)),this},e.prototype.gotoAndStop=function(t){return"string"==typeof t?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(t))):this.gotoFrame(t),this.stop(),this},e.prototype.gotoAndPlay=function(t){return"string"==typeof t?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(t))):this.gotoFrame(t),this.play(),this},e.prototype.searchMovieInstance=function(t,e){var n,r;for(null==e&&(e=!0),"string"==typeof t&&(t=this.lwf.getStringId(t)),r=this.instanceHead;null!==r;){if(r.isMovie&&this.lwf.getInstanceNameStringId(r.instanceId)===t)return r;if(e&&r.isMovie&&(n=r.searchMovieInstance(t,e),null!==n))return n;r=r.linkInstance}return null},e.prototype.searchMovieInstanceByInstanceId=function(t,e){var n,r;for(r=this.instanceHead;null!==r;){if(r.isMovie&&r.instanceId===t)return r;if(e&&r.isMovie&&(n=r.searchMovieInstanceByInstanceId(t,e),null!==n))return n;r=r.linkInstance}return null},e.prototype.searchButtonInstance=function(t,e){var n,r;for(null==e&&(e=!0),"string"==typeof t&&(t=this.lwf.getStringId(t)),r=this.instanceHead;null!==r;){if(r.isButton&&this.lwf.getInstanceNameStringId(r.instanceId)===t)return r;if(e&&r.isMovie&&(n=r.searchButtonInstance(t,e),null!==n))return n;r=r.linkInstance}return null},e.prototype.searchButtonInstanceByInstanceId=function(t,e){var n,r;for(r=this.instanceHead;null!==r;){if(r.isButton&&r.instanceId===t)return r;if(e&&r.isMovie&&(n=r.searchMovieInstanceByInstanceId(t,e),null!==n))return n;r=r.linkInstance}return null},e.prototype.move=function(t,e){return this.property.hasMatrix||U.syncMatrix(this),this.property.move(t,e),this},e.prototype.moveTo=function(t,e){return this.property.hasMatrix||U.syncMatrix(this),this.property.moveTo(t,e),this},e.prototype.rotate=function(t){return this.property.hasMatrix||U.syncMatrix(this),this.property.rotate(t),this},e.prototype.rotateTo=function(t){return this.property.hasMatrix||U.syncMatrix(this),this.property.rotateTo(t),this},e.prototype.scale=function(t,e){return this.property.hasMatrix||U.syncMatrix(this),this.property.scale(t,e),this},e.prototype.scaleTo=function(t,e){return this.property.hasMatrix||U.syncMatrix(this),this.property.scaleTo(t,e),this},e.prototype.setMatrix=function(t,e,n,r){return null==n&&(n=1),null==r&&(r=0),this.property.setMatrix(t,scalex,n,r),this},e.prototype.setAlpha=function(t){return this.property.hasColorTransform||U.syncColorTransform(this),this.property.setAlpha(t),this},e.prototype.setColorTransform=function(t){return this.property.setColorTransform(t),this},e.prototype.setRenderingOffset=function(t){return this.property.setRenderingOffset(t),this},e.prototype.getX=function(){return this.property.hasMatrix?this.property.matrix.translateX:U.getX(this)},e.prototype.setX=function(t){this.property.hasMatrix||U.syncMatrix(this),this.property.moveTo(t,this.property.matrix.translateY)},e.prototype.getY=function(){return this.property.hasMatrix?this.property.matrix.translateY:U.getY(this)},e.prototype.setY=function(t){this.property.hasMatrix||U.syncMatrix(this),this.property.moveTo(this.property.matrix.translateX,t)},e.prototype.getScaleX=function(){return this.property.hasMatrix?this.property.scaleX:U.getScaleX(this)},e.prototype.setScaleX=function(t){this.property.hasMatrix||U.syncMatrix(this),this.property.scaleTo(t,this.property.scaleY)},e.prototype.getScaleY=function(){return this.property.hasMatrix?this.property.scaleY:U.getScaleY(this)},e.prototype.setScaleY=function(t){this.property.hasMatrix||U.syncMatrix(this),this.property.scaleTo(this.property.scaleX,t)},e.prototype.getRotation=function(){return this.property.hasMatrix?this.property.rotation:U.getRotation(this)},e.prototype.setRotation=function(t){this.property.hasMatrix||U.syncMatrix(this),this.property.rotateTo(t)},e.prototype.getAlphaProperty=function(){return this.property.hasColorTransform?this.property.colorTransform.multi.alpha:U.getAlpha(this)},e.prototype.setAlphaProperty=function(t){this.property.hasColorTransform||U.syncColorTransform(this),this.property.setAlpha(t)},e.prototype.requestCalculateBounds=function(){this.requestedCalculateBounds=!0},e.prototype.getBounds=function(){return this.bounds},e.prototype.setFrameRate=function(t){var e,n,r,i;if(null!=this.attachedMovies)for(i=this.attachedMovieListKeys,n=0,r=i.length;r>n;n++)e=i[n],e=this.attachedMovieList[e],e.setFrameRate(t);if(null!=this.attachedLWFs)for(i=this.attachedLWFListKeys,n=0,r=i.length;r>n;n++)e=i[n],e=this.attachedLWFList[e],e.child.setFrameRate(t);for(e=this.instanceHead;null!==e;)e.isMovie&&e.setFrameRate(t),e=e.linkInstance},e}(f),"undefined"!=typeof R.prototype.__defineGetter__?(R.prototype.__defineGetter__("x",function(){return this.getX()}),R.prototype.__defineSetter__("x",function(t){return this.setX(t)}),R.prototype.__defineGetter__("y",function(){return this.getY()}),R.prototype.__defineSetter__("y",function(t){return this.setY(t)}),R.prototype.__defineGetter__("scaleX",function(){return this.getScaleX()}),R.prototype.__defineSetter__("scaleX",function(t){return this.setScaleX(t)}),R.prototype.__defineGetter__("scaleY",function(){return this.getScaleY()}),R.prototype.__defineSetter__("scaleY",function(t){return this.setScaleY(t)}),R.prototype.__defineGetter__("rotation",function(){return this.getRotation()}),R.prototype.__defineSetter__("rotation",function(t){return this.setRotation(t)}),R.prototype.__defineGetter__("alpha",function(){return this.getAlphaProperty()}),R.prototype.__defineSetter__("alpha",function(t){return this.setAlphaProperty(t)}),R.prototype.__defineGetter__("currentFrame",function(){return this.currentFrameInternal+1})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(R.prototype,"x",{get:function(){return this.getX()},set:function(t){return this.setX(t)}}),Object.defineProperty(R.prototype,"y",{get:function(){return this.getY()},set:function(t){return this.setY(t)}}),Object.defineProperty(R.prototype,"scaleX",{get:function(){return this.getScaleX()},set:function(t){return this.setScaleX(t)}}),Object.defineProperty(R.prototype,"scaleY",{get:function(){return this.getScaleY()},set:function(t){return this.setScaleY(t)}}),Object.defineProperty(R.prototype,"rotation",{get:function(){return this.getRotation()},set:function(t){return this.setRotation(t)}}),Object.defineProperty(R.prototype,"alpha",{get:function(){return this.getAlphaProperty()},set:function(t){return this.setAlphaProperty(t)}}),Object.defineProperty(R.prototype,"currentFrame",{get:function(){return this.currentFrameInternal+1}})),M=function(){function t(){this.clear()}return t.prototype.clear=function(t){var e,n,r;if(null==t&&(t=null),null!=t)null!=this[t]&&(this[t]=[]);else for(r=this.types,e=0,n=r.length;n>e;e++)t=r[e],this[t]=[];this.empty=!0},t.prototype.add=function(t){var e,n,r,i,o;if(null!=t){for(o=this.types,r=0,i=o.length;i>r;r++)n=o[r],e=t[n],null!=e&&this[n].push(e);this.updateEmpty()}},t.prototype.concat=function(t){var e,n,r,i,o,s,a,h;if(null!=t&&!t.empty){for(h=this.types,i=0,s=h.length;s>i;i++)for(r=h[i],n=t[r],o=0,a=n.length;a>o;o++)e=n[o],this[r].push(e);this.updateEmpty()}},t.prototype.addHandler=function(t,e){null!=e&&(this[t].push(e),this.empty=!1)},t.prototype.removeInternal=function(t,e){var n;for(n=0;n<t.length;)t[n]===e?t.splice(n,1):++n},t.prototype.remove=function(t){var e,n,r,i,o;for(o=this.types,r=0,i=o.length;i>r;r++)n=o[r],e=t[n],null!=e&&this.removeInternal(this[n],e);this.updateEmpty()},t.prototype.removeHandler=function(t,e){null!=e&&this.removeInternal(this[t],e),this.updateEmpty()},t.prototype.call=function(t,e){var n,r,i,o;if(r=this[t],null!=r&&0<r.length){var s;for(s=[],i=0,o=r.length;o>i;i++)n=r[i],s.push(n);for(r=s,i=0,o=r.length;o>i;i++)n=r[i],n.call(e)}},t.prototype.updateEmpty=function(){var t,e,n,r,i;for(r=this.types,e=0,n=r.length;n>e;e++)if(t=r[e],0<(null!=(i=this[t])?i.length:void 0))return this.empty=!1,void 0;this.empty=!0},t}(),k=function(t){function e(){this.types=n,e.__super__.constructor.apply(this,arguments)}var n;return Q(e,t),n="load postLoad unload enterFrame update render".split(" "),e}(M),a=function(t){function e(){this.types=n,e.__super__.constructor.apply(this,arguments)}var n;return Q(e,t),n="load unload enterFrame update render press release rollOver rollOut keyPress".split(" "),e}(M),T=function(){function t(t,n,r,i){null==n&&(n=null),null==r&&(r=null),this.privateData=null!=i?i:null,this.data=t,null!=r&&(this.functions=r()),this.width=this.data.header.width,this.height=this.data.header.height,this.backgroundColor=this.data.header.backgroundColor,this.name=this.data.strings[this.data.header.nameStringId],this.interactive=0<this.data.buttonConditions.length,this.lwfInstanceId=this.url=null,this.frameRate=this.data.header.frameRate,this.active=!0,this.fastForwardTimeout=15,this.fastForward=!1,this.frameSkip=!0,this.execLimit=3,this.tick=1/this.frameRate,this.roundOffTick=this.tick*e,this.thisTick=this.time=0,this.attachVisible=!0,this.execCount=0,this.isLWFAttached=this.isPropertyDirty=this.isExecDisabled=!1,this.interceptByNotAllowOrDenyButtons=!0,this.intercepted=!1,this.textScale=1,this.pointY=this.pointX=Number.MIN_VALUE,this.pressing=!1,this.buttonHead=null,this.blendModes=[],this.maskModes=[],this._tweens=null,this.interactive||1!==this.data.frames.length||this.functions&&(this.functions._root_load||this.functions._root_postLoad||this.functions._root_unload||this.functions._root_enterFrame||this.functions._root_update||this.functions._root_render)||this.disableExec(),this.property=new X(this),this.instances=[],this.execHandlers=null,this.eventHandlers=[],this.genericEventHandlers=[],this.movieEventHandlers=[],this.buttonEventHandlers=[],this.movieCommands={},this.programObjectConstructors=[],this.loadedLWFs={},this.depth=this.attachName=this.parent=null,this.matrix=new S,this.matrixIdentity=new S,this.colorTransform=new v,this.colorTransformIdentity=new v,this.setRendererFactory(n),this.init()}var e;return e=.05,t.prototype.setRendererFactory=function(t){null==t&&(t=null),null==t&&(t=new P),this.rendererFactory=t,this.rendererFactory.init(this)},t.prototype.setFrameRate=function(t){0!==t&&(this.frameRate=t,this.tick=1/this.frameRate,this.isLWFAttached&&this.rootMovie.setFrameRate(t))},t.prototype.setPreferredFrameRate=function(t,e){null==e&&(e=2),0!==t&&(this.execLimit=Math.ceil(this.frameRate/t)+e)},t.prototype.fitForHeight=function(t,e){U.fitForHeight(this,t,e)},t.prototype.fitForWidth=function(t,e){U.fitForWidth(this,t,e)},t.prototype.scaleForHeight=function(t){U.scaleForHeight(this,t)},t.prototype.scaleForWidth=function(t){U.scaleForWidth(this,t)},t.prototype.setTextScale=function(t){this.textScale=t},t.prototype.getStageSize=function(){var t;return t=this.rendererFactory.getStageSize(),{width:t[0],height:t[1]}},t.prototype.renderOffset=function(){this.renderingIndexOffsetted=0},t.prototype.clearRenderOffset=function(){this.renderingIndexOffsetted=this.renderingIndex},t.prototype.renderObject=function(t){return null==t&&(t=1),this.renderingIndex+=t,this.renderingIndexOffsetted+=t,this.renderingIndex},t.prototype.beginBlendMode=function(t){this.blendModes.unshift(t),this.rendererFactory.setBlendMode(t)},t.prototype.endBlendMode=function(){this.blendModes.shift(),this.rendererFactory.setBlendMode(0<this.blendModes.length?this.blendModes[0]:"normal")},t.prototype.beginMaskMode=function(t){this.maskModes.unshift(t),this.rendererFactory.setMaskMode(t)},t.prototype.endMaskMode=function(){this.maskModes.shift(),this.rendererFactory.setMaskMode(0<this.maskModes.length?this.maskModes[0]:"normal")},t.prototype.setAttachVisible=function(t){this.attachVisible=t},t.prototype.clearFocus=function(t){this.focus===t&&(this.focus=null)},t.prototype.clearPressed=function(t){this.pressed===t&&(this.pressed=null)},t.prototype.clearIntercepted=function(){this.intercepted=!1},t.prototype.init=function(){this.progress=this.time=0,this.instances=[],this.pressed=this.focus=null,this.movieCommands={},this.rootMovieStringId=this.getStringId("_root"),null!=this.rootMovie&&this.rootMovie.destroy(),this.rootMovie=new R(this,null,this.data.header.rootMovieId,this.searchInstanceId(this.rootMovieStringId))},t.prototype.calcMatrix=function(t){var e;return e=this.property,e.hasMatrix?null!=t?U.calcMatrix(this.matrix,t,e.matrix):e.matrix:null!=t?t:this.matrixIdentity},t.prototype.calcColorTransform=function(t){var e;return e=this.property,e.hasColorTransform?null!=t?U.calcColorTransform(this.colorTransform,t,e.colorTransform):e.colorTransform:null!=t?t:this.colorTransformIdentity},t.prototype.execInternal=function(t,e,n){var r,i,o,s,a,h,l;if(null==this.rootMovie||!this.active)return 0;if(o=!1,r=this.progress,this.thisTick=t,this.isExecDisabled&&null===this._tweens)this.executedForExecDisabled||(++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(!0),o=this.executedForExecDisabled=!0);else{if(a=!0,0===t?this.progress=this.tick:0>t?(this.progress=this.tick,a=!1):0===this.time?(this.time+=this.tick,this.progress+=this.tick):(this.time+=t,this.progress+=t),s=this.execHandlers,null!=s)for(h=0,l=s.length;l>h;h++)i=s[h],i.call(this);for(i=this.execLimit;this.progress>=this.tick-this.roundOffTick;){if(0>--i){this.progress=0;break}if(this.progress-=this.tick,++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(a),o=!0,!this.frameSkip)break}this.progress<this.roundOffTick&&(this.progress=0),this.buttonHead=null,this.interactive&&this.rootMovie.hasButton&&(this.focusOnLink=!1,this.rootMovie.linkButton(),null===this.focus||this.focusOnLink||(this.focus.rollOut(),this.focus=null))}return a=this.isLWFAttached,this.fastForward||!o&&!this.isPropertyDirty&&null==e&&null==n||(a=!0),a&&this.update(e,n),!this.execDisabled&&0>t&&(this.progress=r),this.renderingCount},t.prototype.exec=function(t,e,n){var r,i;for(null==t&&(t=0),null==e&&(e=null),null==n&&(n=null),null==this.parent&&(this.fastForwardCurrent=this.fastForward)&&(t=this.tick,i=Date.now());(r=this.execInternal(t,e,n),this.fastForwardCurrent&&this.fastForward&&null==this.parent)&&!(Date.now()-i>=this.fastForwardTimeout););return r},t.prototype.forceExec=function(t,e){return null==t&&(t=null),null==e&&(e=null),this.exec(0,t,e)},t.prototype.forceExecWithoutProgress=function(t,e){return null==t&&(t=null),null==e&&(e=null),this.exec(-1,t,e)},t.prototype.update=function(t,e){var n,r;null==t&&(t=null),null==e&&(e=null),r=this.calcMatrix(t),n=this.calcColorTransform(e),this.renderingIndexOffsetted=this.renderingIndex=0,this.rootMovie.update(r,n),this.renderingCount=this.renderingIndex,this.isPropertyDirty=!1},t.prototype.render=function(t,e,n){var r;return null==t&&(t=0),null==e&&(e=0),null==n&&(n=Number.MIN_VALUE),null!=this.rootMovie&&this.active&&!this.fastForwardCurrent?(r=this.renderingCount,e>0&&(this.renderingCount=e),this.renderingIndexOffsetted=this.renderingIndex=t,this.property.hasRenderingOffset&&(this.renderOffset(),n=this.property.renderingOffset),this.rendererFactory.beginRender(this),this.rootMovie.render(this.attachVisible,n),this.rendererFactory.endRender(this),this.renderingCount=r):void 0},t.prototype.inspect=function(t,e,n,r,i,o){var s;return null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),null==i&&(i=0),null==o&&(o=Number.MIN_VALUE),s=this.renderingCount,i>0&&(this.renderingCount=i),this.renderingIndexOffsetted=this.renderingIndex=r,this.property.hasRenderingOffset&&(this.renderOffset(),o=this.property.renderingOffset),this.rootMovie.inspect(t,e,n,o),this.renderingCount=s},t.prototype.destroy=function(){var t,e,n,r;if(null!=this.rootMovie){null!=this.stopTweens&&this.stopTweens(),r=this.loadedLWFs;for(t in r)e=r[t],e.destroy();this.loadedLWFs=null,this.rootMovie.destroy(),this.rootMovie=null,t=null!=(n=this.functions)?n.destroy:void 0,null!=t&&t.call(this),this.functions=null,null!=this.rendererFactory&&(n=this.rendererFactory.resourceCache,null!=n&&n.unloadLWF(this),this.rendererFactory.destruct(),this.rendererFactory=null),this.programObjectConstructors=this.movieCommands=this.buttonEventHandlers=this.movieEventHandlers=this.genericEventHandlers=this.eventHandlers=this.execHandlers=this.instances=this.buttonHead=this.property=null}},t.prototype.getInstanceNameStringId=function(t){return 0>t||t>=this.data.instanceNames.length?-1:this.data.instanceNames[t].stringId},t.prototype.getStringId=function(t){return t=this.data.stringMap[t],null!=t?t:-1},t.prototype.searchInstanceId=function(t){return 0>t||t>=this.data.strings.length?-1:(t=this.data.instanceNameMap[t],null!=t?t:-1)},t.prototype.searchFrame=function(t,e){var n;return"string"==typeof e&&(e=this.getStringId(e)),0>e||e>=this.data.strings.length?-1:(n=this.data.labelMap[t.objectId][e],null!=n?n+1:-1)},t.prototype.getMovieLabels=function(t){return null==t?null:this.data.labelMap[t.objectId]},t.prototype.searchMovieLinkage=function(t){return 0>t||t>=this.data.strings.length?-1:(t=this.data.movieLinkageMap[t],null!=t?this.data.movieLinkages[t].movieId:-1)},t.prototype.getMovieLinkageName=function(t){return t=this.data.movieLinkageNameMap[t],null!=t?this.data.strings[t]:null},t.prototype.searchMovieInstance=function(t){var e,n,r,i;if("string"==typeof t){if(e=t,-1!==e.indexOf(".")){if(n=e.split("."),n[0]!==this.data.strings[this.rootMovieStringId])return null;for(t=this.rootMovie,r=0,i=n.length;i>r;r++)if(e=n[r],t=t.searchMovieInstance(e,!1),null==t)return null;return t}t=this.getStringId(t)}return this.searchMovieInstanceByInstanceId(this.searchInstanceId(t))},t.prototype.searchMovieInstanceByInstanceId=function(t){if("string"==typeof t&&(t=this.searchInstanceId(this.getStringId(t))),0>t||t>=this.data.instanceNames.length)return null;for(t=this.instances[t];null!=t;){if(t.isMovie)return t;t=t.nextInstance}return null},t.prototype.searchButtonInstance=function(t){var e,n,r,i;if("string"==typeof t){if(e=t,-1!==e.indexOf(".")){if(n=e.split("."),n[0]!==this.data.strings[this.rootMovieStringId])return null;for(e=this.rootMovie,t=r=1,i=n.length;i>=1?i>r:r>i;t=i>=1?++r:--r){if(t===n.length-1)return e.searchButtonInstance(n[t],!1);if(e=e.searchButtonInstance(n[t],!1),null==e)break}return null}t=this.getStringId(t)}return this.searchButtonInstanceByInstanceId(this.searchInstanceId(t))},t.prototype.searchButtonInstanceByInstanceId=function(t){if("string"==typeof t&&(t=this.searchInstanceId(this.getStringId(t))),0>t||t>=this.data.instanceNames.length)return null;for(t=this.instances[t];null!=t;){if(t.isButton)return t;t=t.nextInstance}return null},t.prototype.searchEventId=function(t){return"string"==typeof t&&(t=this.getStringId(t)),0>t||t>=this.data.strings.length?-1:(t=this.data.eventMap[t],null!=t?t:-1)},t.prototype.searchProgramObjectId=function(t){return"string"==typeof t&&(t=this.getStringId(t)),0>t||t>=this.data.strings.length?-1:(t=this.data.programObjectMap[t],null!=t?t:-1)
},t.prototype.getInstance=function(t){return this.instances[t]},t.prototype.setInstance=function(t,e){this.instances[t]=e},t.prototype.addExecHandler=function(t){null==this.execHandlers&&(this.execHandlers=[]),this.execHandlers.push(t)},t.prototype.removeExecHandler=function(t){var e,n;if(e=this.execHandlers,null!=e)for(n=0;n<e.length;)e[n]===t?e.splice(n,1):++n},t.prototype.clearExecHandler=function(){this.execHandlers=null},t.prototype.setExecHandler=function(t){this.clearExecHandler(),this.addExecHandler(t)},t.prototype.addEventHandler=function(t,e){var n,r,i;n="string"==typeof t?this.searchEventId(t):t,0>n||n>=this.data.events.length?(null==(r=this.genericEventHandlers)[t]&&(r[t]=[]),this.genericEventHandlers[t].push(e)):(null==(i=this.eventHandlers)[n]&&(i[n]=[]),this.eventHandlers[n].push(e))},t.prototype.removeEventHandler=function(t,e){var n,r,i,o,s;if(n="string"==typeof t?this.searchEventId(t):t,0>n||n>=this.data.events.length){if(r=this.genericEventHandlers[t],null!=r){n=[];for(i in r)o=r[i],o===e&&n.push(i);for(o=0,s=n.length;s>o;o++)i=n[o],delete r[i]}}else if(r=this.eventHandlers[n],null!=r){for(i=0;i<r.length;)r[i]===e?r.splice(i,1):++i;0===r.length&&delete this.eventHandlers[n]}},t.prototype.clearEventHandler=function(t){var e;e="string"==typeof t?this.searchEventId(t):t,0>e||e>=this.data.events.length?this.genericEventHandlers[t]=null:this.eventHandlers[e]=null},t.prototype.setEventHandler=function(t,e){this.clearEventHandler(t),this.addEventHandler(t,e)},t.prototype.getProgramObjectConstructor=function(t){return"string"==typeof t&&(t=this.searchProgramObjectId(this.getStringId(t))),0>t||t>=this.data.programObjects.length?null:this.programObjectConstructors[t]},t.prototype.setProgramObjectConstructor=function(t,e){"string"==typeof t&&(t=this.searchProgramObjectId(this.getStringId(t))),0>t||t>=this.data.programObjects.length||(this.programObjectConstructors[t]=e)},t.prototype.getMovieEventHandlers=function(t){var e;return"string"==typeof t?(e=this.searchInstanceId(this.getStringId(t)),e>=0&&e<this.data.instanceNames.length?this.movieEventHandlers[e]:null==this.movieEventHandlersByFullName?null:this.movieEventHandlersByFullName[t]):null!=this.movieEventHandlersByFullName&&(e=t.getFullName(),null!=e&&(e=this.movieEventHandlersByFullName[e],null!=e))?e:this.movieEventHandlers[t.instanceId]},t.prototype.addMovieEventHandler=function(t,e){var n,r;if(r=this.searchInstanceId(this.getStringId(t)),r>=0&&r<this.data.instanceNames.length)n=this.movieEventHandlers[r],null==n&&(n=new k,this.movieEventHandlers[r]=n),r=this.searchMovieInstanceByInstanceId(r);else{if(-1===t.indexOf("."))return;null==this.movieEventHandlersByFullName&&(this.movieEventHandlersByFullName=[]),n=this.movieEventHandlersByFullName[t],null==n&&(n=new k,this.movieEventHandlersByFullName[t]=n),r=this.searchMovieInstance(t)}n.add(e),null!=r&&r.setHandlers(n)},t.prototype.removeMovieEventHandler=function(t,e){var n;n=this.getMovieEventHandlers(t),null!=n&&n.remove(e),n=this.searchMovieInstance(t),null!=n&&n.handler.remove(e)},t.prototype.clearMovieEventHandler=function(t,e){var n;null==e&&(e=null),n=this.getMovieEventHandlers(t),null!=n&&n.clear(e),n=this.searchMovieInstance(t),null!=n&&n.handler.clear(e)},t.prototype.setMovieEventHandler=function(t,e){this.clearMovieEventHandler(t),this.addMovieEventHandler(t,e)},t.prototype.getButtonEventHandlers=function(t){var e;return"string"==typeof t?(e=this.searchInstanceId(this.getStringId(t)),e>=0&&e<this.data.instanceNames.length?this.buttonEventHandlers[e]:null==this.buttonEventHandlersByFullName?null:this.buttonEventHandlersByFullName[t]):null!=this.buttonEventHandlersByFullName&&(e=t.getFullName(),null!=e&&(e=this.buttonEventHandlersByFullName[e],null!=e))?e:this.buttonEventHandlers[t.instanceId]},t.prototype.addButtonEventHandler=function(t,e){var n,r;if(this.setInteractive(),n=this.searchInstanceId(this.getStringId(t)),n>=0&&n<this.data.instanceNames.length)r=this.buttonEventHandlers[n],null==r&&(r=new a,this.buttonEventHandlers[n]=r),n=this.searchButtonInstanceByInstanceId(n);else{if(-1===t.indexOf("."))return;null==this.buttonEventHandlersByFullName&&(this.buttonEventHandlersByFullName=[]),r=this.buttonEventHandlersByFullName[t],null==r&&(r=new a,this.buttonEventHandlersByFullName[t]=r),n=this.searchButtonInstance(t)}r.add(e),null!=n&&n.setHandlers(r)},t.prototype.removeButtonEventHandler=function(t,e){var n;n=this.getButtonEventHandlers(t),null!=n&&n.remove(e),n=this.searchButtonInstance(t),null!=(null!=n?n.handler:void 0)&&n.handler.remove(e)},t.prototype.clearButtonEventHandler=function(t,e){var n;null==e&&(e=null),n=this.getButtonEventHandlers(t),null!=n&&n.clear(e),n=this.searchButtonInstance(t),null!=("undefined"!=typeof buffon&&null!==buffon?buffon.handler:void 0)&&n.handler.clear(e)},t.prototype.setButtonEventHandler=function(t,e){this.clearButtonEventHandler(t),this.addButtonEventHandler(t,e)},t.prototype.execMovieCommand=function(){var t,e,n,r,i,o,s,a,h;e=[],h=this.movieCommands;for(n in h){for(o=h[n],t=!0,r=this.rootMovie,s=0,a=n.length;a>s;s++)if(i=n[s],r=r.searchMovieInstance(i),null==r){t=!1;break}t&&(o(r),e.push(n))}for(t=0,r=e.length;r>t;t++)n=e[t],delete this.movieCommands[n]},t.prototype.setMovieCommand=function(t,e){var n;n=t.slice(0),this.movieCommands[n]=e,this.execMovieCommand()},t.prototype.searchAttachedMovie=function(t){return this.rootMovie.searchAttachedMovie(t)},t.prototype.searchAttachedLWF=function(t){return this.rootMovie.searchAttachedLWF(t)},t.prototype.addAllowButton=function(t){return t=this.searchInstanceId(this.getStringId(t)),0>t?!1:(null==this.allowButtonList&&(this.allowButtonList={}),this.allowButtonList[t]=!0)},t.prototype.removeAllowButton=function(t){return null==this.allowButtonList?!1:(t=this.searchInstanceId(this.getStringId(t)),0>t?!1:(delete this.allowButtonList[t],!0))},t.prototype.clearAllowButton=function(){this.allowButtonList=null},t.prototype.addDenyButton=function(t){return t=this.searchInstanceId(this.getStringId(t)),0>t?!1:(null==this.denyButtonList&&(this.denyButtonList={}),this.denyButtonList[t]=!0)},t.prototype.denyAllButtons=function(){var t,e,n;for(null==this.denyButtonList&&(this.denyButtonList={}),t=e=0,n=this.data.instanceNames.length;n>=0?n>e:e>n;t=n>=0?++e:--e)this.denyButtonList[t]=!0},t.prototype.removeDenyButton=function(t){return null==this.denyButtonList?!1:(t=this.searchInstanceId(this.getStringId(t)),0>t?!1:(delete this.denyButtonList[t],!0))},t.prototype.clearDenyButton=function(){this.denyButtonList=null},t.prototype.disableExec=function(){this.isExecDisabled=!0,this.executedForExecDisabled=!1},t.prototype.enableExec=function(){this.isExecDisabled=!1},t.prototype.setPropertyDirty=function(){this.isPropertyDirty=!0,null!=this.parent&&this.parent.lwf.setPropertyDirty()},t.prototype.setParent=function(t){var e;this.active=!0,this.parent=t,t=null!=(e=this.functions)?e.init:void 0,null!=t&&t.call(this)},t.prototype.setInteractive=function(){this.interactive=!0,null!=this.parent&&this.parent.lwf.setInteractive()},t.prototype.setFrameSkip=function(t){this.frameSkip=t,this.progress=0,null!=this.parent&&this.parent.lwf.setFrameSkip(t)},t.prototype.setFastForwardTimeout=function(t){this.fastForwardTimeout=t},t.prototype.setFastForward=function(t){this.fastForward=t,null!=this.parent&&this.parent.lwf.setFastForward(t)},t.prototype.getMovieFunctions=function(t){var e,n,r,i,o;return n=this.getMovieLinkageName(t),t=null!=(r=this.functions)?r[n+"_load"]:void 0,r=null!=(i=this.functions)?i[n+"_postLoad"]:void 0,i=null!=(e=this.functions)?e[n+"_unload"]:void 0,e=null!=(o=this.functions)?o[n+"_enterFrame"]:void 0,[t,r,i,e]},t.prototype.playAnimation=function(t,e,r){var i,o,s,a,h,l,c;for(s=0,t=this.data.animations[t],a=e;;)switch(i=t[s++]){case n.END:return;case n.PLAY:a.play();break;case n.STOP:a.stop();break;case n.NEXTFRAME:a.nextFrame();break;case n.PREVFRAME:a.prevFrame();break;case n.GOTOFRAME:a.gotoFrameInternal(t[s++]);break;case n.GOTOLABEL:a.gotoFrame(this.searchFrame(a,t[s++]));break;case n.SETTARGET:if(a=e,i=t[s++],0!==i)for(h=0;i>=0?i>h:h>i;i>=0?++h:--h)switch(o=t[s++]){case n.INSTANCE_TARGET_ROOT:a=this.rootMovie;break;case n.INSTANCE_TARGET_PARENT:a=a.parent,null==this.target&&(a=this.rootMovie);break;default:a=a.searchMovieInstanceByInstanceId(o,!1),null==a&&(a=e)}break;case n.EVENT:if(i=t[s++],o=this.eventHandlers[i],null!=o)for(h=0,l=o.length;l>h;h++)i=o[h],i(e,r);break;case n.CALL:i=t[s++],i=null!=(c=this.functions)?c[this.data.strings[i]]:void 0,null!=i&&i.call(e)}},t.prototype.dispatchEvent=function(t,e,n){var r,i,o;if(null==e&&(e=this.rootMovie),null==n&&(n=null),r="string"==typeof t?this.searchEventId(t):t,r=0>r||r>=this.data.events.length?this.genericEventHandlers[t]:this.eventHandlers[r],null==r)return!1;var s;for(s=[],i=0,o=r.length;o>i;i++)t=r[i],s.push(t);for(r=s,i=0,o=r.length;o>i;i++)t=r[i],null!=t&&t(e,n);return!0},t.prototype.inputPoint=function(t,e){var n,r;if(null==this.rootMovie)return null;if(this.intercepted=!1,!this.interactive)return null;for(this.pointX=t,this.pointY=e,r=!1,n=this.buttonHead;null!=n;){if(n.checkHit(t,e)){if(null!=this.allowButtonList){if(null==this.allowButtonList[n.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}n=n.buttonLink;continue}}else if(null!=this.denyButtonList&&null!=this.denyButtonList[n.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}n=n.buttonLink;continue}r=!0,this.focus!==n&&(null!=this.focus&&this.focus.rollOut(),this.focus=n,this.focus.rollOver());break}n=n.buttonLink}return r||null==this.focus||(this.focus.rollOut(),this.focus=null),this.focus},t.prototype.inputPress=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!0,null!=this.focus&&(this.pressed=this.focus,this.focus.press()))},t.prototype.inputRelease=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!1,null!=this.focus&&this.pressed===this.focus&&(this.focus.release(),this.pressed=null))},t.prototype.inputKeyPress=function(t){var e;if(null!=this.rootMovie&&this.interactive)for(e=this.buttonHead;null!=e;)e.keyPress(t),e=e.buttonLink},t}(),"undefined"!=typeof global&&(null==global.LWF&&(global.LWF={}),global.LWF.BitmapClip=i,global.LWF.Color=g,global.LWF.ColorTransform=v,global.LWF.Format=b,global.LWF.LWF=T,global.LWF.Loader=O,global.LWF.Matrix=S,global.LWF.Movie=R,global.LWF.Point=W,global.LWF.Property=X),T.prototype.addAllowButton=T.prototype.addAllowButton,T.prototype.addButtonEventHandler=T.prototype.addButtonEventHandler,T.prototype.addButtonEventListener=T.prototype.addButtonEventHandler,T.prototype.addDenyButton=T.prototype.addDenyButton,T.prototype.addEventHandler=T.prototype.addEventHandler,T.prototype.addEventListener=T.prototype.addEventHandler,T.prototype.addMovieEventHandler=T.prototype.addMovieEventHandler,T.prototype.addMovieEventListener=T.prototype.addMovieEventHandler,T.prototype.clearAllowButton=T.prototype.clearAllowButton,T.prototype.clearButtonEventHandler=T.prototype.clearButtonEventHandler,T.prototype.clearButtonEventListener=T.prototype.clearButtonEventHandler,T.prototype.clearDenyButton=T.prototype.clearDenyButton,T.prototype.clearEventHandler=T.prototype.clearEventHandler,T.prototype.clearEventListener=T.prototype.clearEventHandler,T.prototype.clearMovieEventHandler=T.prototype.clearMovieEventHandler,T.prototype.clearMovieEventListener=T.prototype.clearMovieEventHandler,T.prototype.denyAllButtons=T.prototype.denyAllButtons,T.prototype.destroy=T.prototype.destroy,T.prototype.dispatchEvent=T.prototype.dispatchEvent,T.prototype.exec=T.prototype.exec,T.prototype.fitForHeight=T.prototype.fitForHeight,T.prototype.fitForWidth=T.prototype.fitForWidth,T.prototype.forceExec=T.prototype.forceExec,T.prototype.forceExecWithoutProgress=T.prototype.forceExecWithoutProgress,T.prototype.getStageSize=T.prototype.getStageSize,T.prototype.getStringId=T.prototype.getStringId,T.prototype.init=T.prototype.init,T.prototype.inputKeyPress=T.prototype.inputKeyPress,T.prototype.inputPoint=T.prototype.inputPoint,T.prototype.inputPress=T.prototype.inputPress,T.prototype.inputRelease=T.prototype.inputRelease,T.prototype.inspect=T.prototype.inspect,T.prototype.removeAllowButton=T.prototype.removeAllowButton,T.prototype.removeButtonEventHandler=T.prototype.removeButtonEventHandler,T.prototype.removeButtonEventListener=T.prototype.removeButtonEventHandler,T.prototype.removeDenyButton=T.prototype.removeDenyButton,T.prototype.removeEventHandler=T.prototype.removeEventHandler,T.prototype.removeEventListener=T.prototype.removeEventHandler,T.prototype.removeMovieEventHandler=T.prototype.removeMovieEventHandler,T.prototype.removeMovieEventListener=T.prototype.removeMovieEventHandler,T.prototype.render=T.prototype.render,T.prototype.scaleForHeight=T.prototype.scaleForHeight,T.prototype.scaleForWidth=T.prototype.scaleForWidth,T.prototype.searchAttachedLWF=T.prototype.searchAttachedLWF,T.prototype.searchAttachedMovie=T.prototype.searchAttachedMovie,T.prototype.searchEventId=T.prototype.searchEventId,T.prototype.searchFrame=T.prototype.searchFrame,T.prototype.searchProgramObjectId=T.prototype.searchProgramObjectId,T.prototype.setButtonEventHandler=T.prototype.setButtonEventHandler,T.prototype.setButtonEventListener=T.prototype.setButtonEventHandler,T.prototype.setEventHandler=T.prototype.setEventHandler,T.prototype.setEventListener=T.prototype.setEventHandler,T.prototype.setFastForward=T.prototype.setFastForward,T.prototype.setFastForwardTimeout=T.prototype.setFastForwardTimeout,T.prototype.setFrameRate=T.prototype.setFrameRate,T.prototype.setFrameSkip=T.prototype.setFrameSkip,T.prototype.setMovieCommand=T.prototype.setMovieCommand,T.prototype.setMovieEventHandler=T.prototype.setMovieEventHandler,T.prototype.setMovieEventListener=T.prototype.setMovieEventHandler,T.prototype.setPreferredFrameRate=T.prototype.setPreferredFrameRate,T.prototype.setProgramObjectConstructor=T.prototype.setProgramObjectConstructor,T.prototype.setRendererFactory=T.prototype.setRendererFactory,T.prototype.setTextScale=T.prototype.setTextScale,O.load=O.load,w.prototype.check=w.prototype.check,w.prototype.name=w.prototype.name,f.prototype.getFullName=f.prototype.getFullName,s.prototype.addEventHandler=s.prototype.addEventHandler,s.prototype.addEventListener=s.prototype.addEventHandler,s.prototype.clearEventHandler=s.prototype.clearEventHandler,s.prototype.clearEventListener=s.prototype.clearEventHandler,s.prototype.removeEventHandler=s.prototype.removeEventHandler,s.prototype.removeEventListener=s.prototype.removeEventHandler,s.prototype.setEventHandler=s.prototype.setEventHandler,s.prototype.setEventListener=s.prototype.setEventHandler,R.prototype.addEventHandler=R.prototype.addEventHandler,R.prototype.addEventListener=R.prototype.addEventHandler,R.prototype.attachBitmap=R.prototype.attachBitmap,R.prototype.attachEmptyMovie=R.prototype.attachEmptyMovie,R.prototype.attachLWF=R.prototype.attachLWF,R.prototype.attachMovie=R.prototype.attachMovie,R.prototype.clearEventHandler=R.prototype.clearEventHandler,R.prototype.clearEventListener=R.prototype.clearEventHandler,R.prototype.detachBitmap=R.prototype.detachBitmap,R.prototype.detachFromParent=R.prototype.detachFromParent,R.prototype.detachLWF=R.prototype.detachLWF,R.prototype.detachMovie=R.prototype.detachMovie,R.prototype.dispatchEvent=R.prototype.dispatchEvent,R.prototype.getAttachedBitmap=R.prototype.getAttachedBitmap,R.prototype.getAttachedLWF=R.prototype.getAttachedLWF,R.prototype.getAttachedMovie=R.prototype.getAttachedMovie,R.prototype.getAttachedBitmaps=R.prototype.getAttachedBitmaps,R.prototype.getBounds=R.prototype.getBounds,R.prototype.globalToLocal=R.prototype.globalToLocal,R.prototype.gotoAndPlay=R.prototype.gotoAndPlay,R.prototype.gotoAndStop=R.prototype.gotoAndStop,R.prototype.gotoFrame=R.prototype.gotoFrame,R.prototype.gotoLabel=R.prototype.gotoLabel,R.prototype.inspect=R.prototype.inspect,R.prototype.localToGlobal=R.prototype.localToGlobal,R.prototype.move=R.prototype.move,R.prototype.moveTo=R.prototype.moveTo,R.prototype.nextFrame=R.prototype.nextFrame,R.prototype.override=R.prototype.override,R.prototype.play=R.prototype.play,R.prototype.prevFrame=R.prototype.prevFrame,R.prototype.removeEventHandler=R.prototype.removeEventHandler,R.prototype.removeEventListener=R.prototype.removeEventHandler,R.prototype.removeMovieClip=R.prototype.removeMovieClip,R.prototype.requestCalculateBounds=R.prototype.requestCalculateBounds,R.prototype.rotate=R.prototype.rotate,R.prototype.rotateTo=R.prototype.rotateTo,R.prototype.scale=R.prototype.scale,R.prototype.scaleTo=R.prototype.scaleTo,R.prototype.searchAttachedLWF=R.prototype.searchAttachedLWF,R.prototype.searchAttachedMovie=R.prototype.searchAttachedMovie,R.prototype.searchMovieInstance=R.prototype.searchMovieInstance,R.prototype.searchMovieInstanceByInstanceId=R.prototype.searchMovieInstanceByInstanceId,R.prototype.setAlpha=R.prototype.setAlpha,R.prototype.setColorTransform=R.prototype.setColorTransform,R.prototype.setEventHandler=R.prototype.setEventHandler,R.prototype.setEventListener=R.prototype.setEventHandler,R.prototype.setMatrix=R.prototype.setMatrix,R.prototype.setRenderingOffset=R.prototype.setRenderingOffset,R.prototype.setVisible=R.prototype.setVisible,R.prototype.stop=R.prototype.stop,R.prototype.swapAttachedLWFDepth=R.prototype.swapAttachedLWFDepth,R.prototype.swapAttachedMovieDepth=R.prototype.swapAttachedMovieDepth,R.prototype.swapDepths=R.prototype.swapDepths,X.prototype.clear=X.prototype.clear,X.prototype.move=X.prototype.move,X.prototype.moveTo=X.prototype.moveTo,X.prototype.rotate=X.prototype.rotate,X.prototype.rotateTo=X.prototype.rotateTo,X.prototype.scale=X.prototype.scale,X.prototype.scaleTo=X.prototype.scaleTo,X.prototype.setAlpha=X.prototype.setAlpha,X.prototype.setColorTransform=X.prototype.setColorTransform,X.prototype.setMatrix=X.prototype.setMatrix,S.prototype.clear=S.prototype.clear,S.prototype.set=S.prototype.set,g.prototype.set=g.prototype.set,v.prototype.clear=v.prototype.clear,v.prototype.set=v.prototype.set,V=function(){function t(t,e){this.factory=t,this.node=e,this.appended=!1,this.node.style.visibility="hidden",this.matrix=new S(0,0,0,0,0,0),this.zIndex=this.alpha=-1,this.visible=!0}return t.prototype.destructor=function(){this.appended&&this.factory.stage.parentNode.removeChild(this.node)},t.prototype.destruct=function(){this.context.factory.destructRenderer(this)},t.prototype.update=function(){},t.prototype.render=function(t,e,n,r,i){if(this.visible===i){if(!1===i)return}else{if(this.visible=i,!1===i)return this.node.style.visibility="hidden",void 0;this.node.style.visibility="visible"}this.appended||(this.appended=!0,this.node.style.position="absolute",this.node.style.webkitTransformOrigin="0px 0px",this.node.style.display="block",this.factory.stage.parentNode.appendChild(this.node)),(this.matrix.setWithComparing(t)||this.alpha!==e.multi.alpha||this.zIndex!==n)&&(this.alpha=e.multi.alpha,this.zIndex=n,e=this.node.style,e.zIndex=this.zIndex,e.opacity=this.alpha,t=this.matrix,e.webkitTransform=this.use3D?"matrix3d("+(""+t.scaleX+","+t.skew1+",0,0,")+(""+t.skew0+","+t.scaleY+",0,0,")+"0,0,1,0,"+(""+t.translateX+","+t.translateY+",0,1)"):"matrix("+(""+t.scaleX+","+t.skew1+","+t.skew0+","+t.scaleY+",")+(""+t.translateX+","+t.translateY+")"))},t}(),f=function(){function t(){this.cache={},this.canvasIndex=this.lwfInstanceIndex=0}var e;return e=null,t.get=function(){return null!=e?e:e=new this},t.prototype.clear=function(){var t,e,n,r,i;r=this.cache;for(e in r)for(n in t=r[e],i=t.instances)t=i[n],t.destroy();return this.cache={}},t.prototype.getTextureURL=function(t,e,n){var r,i,o;return e=null!=(i=null!=(o=t.imagePrefix)?o:t.prefix)?i:"",i=null!=(r=t.imageSuffix)?r:"",r=t.imageMap,n=n.filename,"function"==typeof r?(t=r.call(t,n),null!=t&&(n=t)):"object"==typeof r&&(t=r[n],null!=t&&(n=t)),n.match(/^\//)||(n=e+n),n=n.replace(/(\.png|\.jpg)/i,i+"$1")},t.prototype.checkTextures=function(t,e){var n,r,i,o,s,a,h,l,c,u,p,d,f,y,m,g,v,I,_,x,w,M;for(t._alphaMap={},t._colorMap={},t._textures=[],l=/_atlas_(.*)_info_([0-9])_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)/i,p=/(.*)_rgb_([0-9a-f]{6})(.*)$/i,d=/(.*)_rgb_([0-9]*),([0-9]*),([0-9]*)(.*)$/i,f=/(.*)_rgba_([0-9a-f]{8})(.*)$/i,y=/(.*)_rgba_([0-9]*),([0-9]*),([0-9]*),([0-9]*)(.*)$/i,c=/(.*)_add_([0-9a-f]{6})(.*)$/i,u=/(.*)_add_([0-9]*),([0-9]*),([0-9]*)(.*)$/i,M=e.textures,x=0,w=M.length;w>x;x++)m=M[x],a=null,null!=(n=m.filename.match(p))?(a=n[1]+n[3],i="rgb",r=n[2]):null!=(n=m.filename.match(d))?(a=n[1]+n[5],i="rgb",h=parseInt(n[2],10).toString(16),o=parseInt(n[3],10).toString(16),r=parseInt(n[4],10).toString(16),r=(1===h.length?"0":"")+h+(1===o.length?"0":"")+o+(1===r.length?"0":"")+r):null!=(n=m.filename.match(f))?(a=n[1]+n[3],i="rgba",r=n[2]):null!=(n=m.filename.match(y))?(a=n[1]+n[6],i="rgba",h=parseInt(n[2],10).toString(16),o=parseInt(n[3],10).toString(16),r=parseInt(n[4],10).toString(16),n=parseInt(n[5],10).toString(16),r=(1===h.length?"0":"")+h+(1===o.length?"0":"")+o+(1===r.length?"0":"")+r+(1===n.length?"0":"")+n):null!=(n=m.filename.match(c))?(a=n[1]+n[3],i="add",r=n[2]):null!=(n=m.filename.match(u))&&(a=n[1]+n[5],i="add",h=parseInt(n[2],10).toString(16),o=parseInt(n[3],10).toString(16),r=parseInt(n[4],10).toString(16),r=(1===h.length?"0":"")+h+(1===o.length?"0":"")+o+(1===r.length?"0":"")+r),null!=a?(s=m.filename.match(l),null!=s?(a=s[1],n="1"===s[2]?!0:!1,h=parseInt(s[3],10),g=parseInt(s[4],10),v=parseInt(s[5],10),o=parseInt(s[6],10),I=parseInt(s[7],10),s=parseInt(s[8],10)):(n=!1,g=h=0,o=v=null,s=I=0),null==(_=t._colorMap)[a]&&(_[a]=[]),t._colorMap[a].push({filename:m.filename,colorOp:i,colorValue:r,rotated:n,u:h,v:g,w:v,h:o,x:I,y:s})):(t._textures.push(m),n=m.filename.match(/^(.*)_withalpha(.*\.)jpg(.*)$/i),null!=n&&(a=""+n[1]+"_alpha"+n[2]+"png"+n[3],a=new b.TextureReplacement(a),t._textures.push(a),t._alphaMap[m.filename]=[m,a],t._alphaMap[a.filename]=[m,a]))},t.prototype.onloaddata=function(t,e,n){var r,i;null!=e&&e.check()?(t.name=e.name(),this.checkTextures(t,e),n=e.useScript&&null==(null!=(r=global.LWF)?null!=(i=r.Script)?i[e.name()]:void 0:void 0),r=t.lwf,this.cache[r].data=e,t.total=t._textures.length+1,n&&t.total++,t.loadedCount=1,null!=t.onprogress&&t.onprogress.call(t,t.loadedCount,t.total),n?this.loadJS(t,e):this.loadImages(t,e)):(t.error.push({url:n,reason:"dataError"}),t.onload.call(t,null))},t.prototype.loadLWF=function(t){var e,n,r;return r=n=t.lwf,r.match(/^\//)||(r=(null!=(e=t.prefix)?e:"")+r),t.error=[],null!=this.cache[n]&&(e=this.cache[n].data,null!=e)?(t.name=e.name(),this.checkTextures(t,e),t.total=t._textures.length+1,t.loadedCount=1,"undefined"!=typeof onprogress&&null!==onprogress&&onprogress.call(t,t.loadedCount,t.total),this.loadImages(t,e),void 0):(this.cache[n]={},this.loadLWFData(t,r),void 0)},t.prototype.dispatchOnloaddata=function(t,e,n,r,i,o){var s,a,h,l,c,u=this;if(n){for(h=null,a=document.getElementsByTagName("script"),n=/(^|.*\/lwf_cocos2d.js)$/i,s=l=0,c=a.length;c>=0?c>l:l>c;s=c>=0?++l:--l)if(""!==a[s].src&&(s=a[s].src.split("?")[0],s=s.match(n),null!=s)){h=s[1];break}null!=h&&function(n){var r;return r=new Worker(n),r.onmessage=function(n){return o=new w(n.data),r=r.onmessage=r.onerror=null,u.onloaddata(t,o,e)},r.onerror=function(){return t.error.push({url:n,reason:"error"}),r=r.onmessage=r.onerror=null,t.onload.call(t,null)},i&&"base64"!==o.type?r.webkitPostMessage(o.data):r.postMessage(o.data)}(h)}null==h&&("base64"===o.type?(o=global.LWF.Base64.atobArray(o.data),o=new global.LWF.Zlib.Inflate(o).decompress(),o=O.loadArray(o)):o=r?O.loadArrayBuffer(o.data):O.load(o.data),this.onloaddata(t,o,e))},t.prototype.loadLWFData=function(t,e){var n,r,i,o,s,a,h,l,c,u,p,d,f,y=this;s=t.onload,u=c=!1,"undefined"==typeof Worker||null!=t.worker&&!t.worker||(c=!0,"undefined"!=typeof Worker.prototype.webkitPostMessage&&(u=!0)),i=e.match(/([^\/]+)\.lwf\.js/i),null!=i?(o=i[1].toLowerCase(),h=null!=(d=global.LWF)?null!=(f=d.DataScript)?f[o]:void 0:void 0,null!=h?(n={type:"base64",data:h},this.dispatchOnloaddata(t,e,c,l,u,n)):(r=document.getElementsByTagName("head")[0],a=document.createElement("script"),a.type="text/javascript",a.charset="UTF-8",a.onabort=function(){return t.error.push({url:e,reason:"abort"}),r.removeChild(a),a=a.onload=a.onabort=a.onerror=null,s.call(t,null)},a.onerror=function(){return t.error.push({url:e,reason:"error"}),r.removeChild(a),a=a.onload=a.onabort=a.onerror=null,s.call(t,null)},a.onload=function(){var i,p;return h=null!=(i=global.LWF)?null!=(p=i.DataScript)?p[o]:void 0:void 0,r.removeChild(a),a=a.onload=a.onabort=a.onerror=null,null!=h?(n={type:"base64",data:h},y.dispatchOnloaddata(t,e,c,l,u,n)):(t.error.push({url:e,reason:"error"}),s.call(t,null))},a.src=e,r.appendChild(a),i=t.lwf,null==(d=this.cache[i]).scripts&&(d.scripts=[]),this.cache[i].scripts.push(a))):(p=new XMLHttpRequest,p.open("GET",e,!0),"string"!=typeof p.responseType||"undefined"==typeof Uint8Array||"undefined"==typeof Int32Array||"undefined"==typeof Float32Array||c&&!u?(l=!1,p.overrideMimeType("text/plain; charset=x-user-defined")):(l=!0,p.responseType="arraybuffer"),p.onabort=function(){return t.error.push({url:e,reason:"abort"}),p=p.onabort=p.onerror=p.onreadystatechange=null,s.call(t,null)},p.onerror=function(){return t.error.push({url:e,reason:"error"}),p=p.onabort=p.onerror=p.onreadystatechange=null,s.call(t,null)},p.onreadystatechange=function(){if(4===p.readyState){if(0===p.status||200<=p.status&&300>p.status)return n=l?{type:"arraybuffer",data:p.response}:{type:"text",data:p.responseText},y.dispatchOnloaddata(t,e,c,l,u,n),p=p.onabort=p.onerror=p.onreadystatechange=null;t.error.push({url:e,reason:"error"}),p=p.onabort=p.onerror=p.onreadystatechange=null,s.call(t,null)}},p.send(null))},t.prototype.loadJS=function(t,e){var n,r,i,o,s,a,h,l=this;n=t.lwf,s=null!=(a=t.js)?a:n.replace(/\.lwf(\.js)?/i,".js"),s.match(/^\//)||(s=(null!=(h=t.prefix)?h:"")+s),r=t.onload,i=t.onprogress,o=document.createElement("script"),o.type="text/javascript",o.charset="UTF-8",o.onabort=function(){return delete l.cache[n],t.error.push({url:s,reason:"abort"}),o=o.onload=o.onabort=o.onerror=null,r.call(t,null)},o.onerror=function(){return delete l.cache[n],t.error.push({url:s,reason:"error"}),o=o.onload=o.onabort=o.onerror=null,r.call(t,null)},o.onload=function(){return t.loadedCount++,null!=i&&i.call(t,t.loadedCount,t.total),o=o.onload=o.onabort=o.onerror=null,l.loadImages(t,e)},o.src=s,document.getElementsByTagName("head")[0].appendChild(o),null==(a=this.cache[n]).scripts&&(a.scripts=[]),this.cache[n].scripts.push(o)},t.prototype.loadImagesCallback=function(t,e,n){t.loadedCount++,null!=t.onprogress&&t.onprogress.call(t,t.loadedCount,t.total),t.loadedCount===t.total&&(delete t._alphaMap,delete t._colorMap,delete t._textures,0<t.error.length?(delete this.cache[t.lwf],t.onload.call(t,null)):this.newLWF(t,e,n))},t.prototype.drawImage=function(t,e,n,r,i,o,s,a,h,l){n.rotated?(n=new S,U.rotateMatrix(n,new S,1,r,i+a),t.setTransform(n.scaleX,n.skew1,n.skew0,n.scaleY,n.translateX,n.translateY)):0!==r||0!==i?(n=new S,U.scaleMatrix(n,new S,1,r,i),t.setTransform(n.scaleX,n.skew1,n.skew0,n.scaleY,n.translateX,n.translateY)):t.setTransform(1,0,0,1,0,0),t.drawImage(e,o,s,h,l,0,0,h,l)},t.prototype.createCanvas=function(e,n,r){var i;return this.constructor===t?(i="canvas_"+ ++this.canvasIndex,n=document.getCSSCanvasContext("2d",i,n,r),e=n.canvas,e.name=i):(e=document.createElement("canvas"),e.width=n,e.height=r,n=e.getContext("2d")),[e,n]},t.prototype.generateImages=function(t,e,n,r){var i,o,s,a,h,l,c,u,p,d,f,y,m,g,v,I;if(l=t._colorMap[n.filename],null!=l)for(f=r.width/n.width,m=0,g=l.length;g>m;m++){switch(p=l[m],d=Math.round(p.u*f),i=Math.round(p.v*f),y=Math.round((null!=(v=p.w)?v:n.width)*f),u=Math.round((null!=(I=p.h)?I:n.height)*f),p.rotated?(c=u,o=y):(c=y,o=u),a=this.createCanvas(p.filename,y,u),t=a[0],a=a[1],p.colorOp){case"rgb":a.fillStyle="#"+p.colorValue,a.fillRect(0,0,y,u),a.globalCompositeOperation="destination-in",this.drawImage(a,r,p,0,0,d,i,u,c,o);break;case"rgba":this.drawImage(a,r,p,0,0,d,i,u,c,o),a.globalCompositeOperation="source-atop",i=p.colorValue,d=parseInt(i.substr(0,2),16),c=parseInt(i.substr(2,2),16),o=parseInt(i.substr(4,2),16),i=parseInt(i.substr(6,2),16)/255,a.fillStyle="rgba("+d+", "+c+", "+o+", "+i+")",a.fillRect(0,0,y,u);break;case"add":s=document.createElement("canvas"),s.width=y,s.height=u,h=s.getContext("2d"),h.fillStyle="#"+p.colorValue,h.fillRect(0,0,y,u),h.globalCompositeOperation="destination-in",this.drawImage(h,r,p,0,0,d,i,u,c,o),this.drawImage(a,r,p,0,0,d,i,u,c,o),a.globalCompositeOperation="lighter",a.setTransform(1,0,0,1,0,0),a.drawImage(s,0,0,s.width,s.height,0,0,s.width,s.height)}a.globalCompositeOperation="source-over",e[p.filename]=t}},t.prototype.loadImages=function(t,e){var n,r,i,o,s,a,h,l=this;if(n={},0===e.textures.length)this.newLWF(t,n,e);else for(h=t._textures,o=function(r,i){var o;return o=new Image,o.onabort=function(){return t.error.push({url:i,reason:"abort"}),o=o.onload=o.onabort=o.onerror=null,l.loadImagesCallback(t,n,e)},o.onerror=function(){return t.error.push({url:i,reason:"error"}),o=o.onload=o.onabort=o.onerror=null,l.loadImagesCallback(t,n,e)},o.onload=function(){var i,s,a,h,c,u;return n[r.filename]=o,i=t._alphaMap[r.filename],null!=i?(c=i[0],i=i[1],u=n[c.filename],s=n[i.filename],null!=u&&null!=s&&(h=l.createCanvas(c.filename,u.width,u.height),a=h[0],h=h[1],h.drawImage(u,0,0,u.width,u.height,0,0,u.width,u.height),h.globalCompositeOperation="destination-in",h.drawImage(s,0,0,s.width,s.height,0,0,u.width,u.height),h.globalCompositeOperation="source-over",delete n[c.filename],delete n[i.filename],n[c.filename]=a,l.generateImages(t,n,c,a))):l.generateImages(t,n,r,o),o=o.onload=o.onabort=o.onerror=null,l.loadImagesCallback(t,n,e)},o.src=i},s=0,a=h.length;a>s;s++)r=h[s],i=this.getTextureURL(t,e,r),o(r,i)},t.prototype.newFactory=function(t,e,n){var r,i;return new WebkitCSSRendererFactory(n,this,e,t.stage,null!=(r=t.textInSubpixel)?r:!1,null!=(i=t.use3D)?i:!0)},t.prototype.onloadLWF=function(t,e){var n;n=e.rendererFactory,null!=t.setBackgroundColor?n.setBackgroundColor(t.setBackgroundColor):t.useBackgroundColor&&n.setBackgroundColor(e),t.fitForHeight?n.fitForHeight(e):t.fitForWidth&&n.fitForWidth(e),t.onload.call(t,e)},t.prototype.newLWF=function(t,e,n){var r,i,o,s;r=this.cache[t.lwf],e=this.newFactory(t,e,n),n.useScript&&(i=null!=(o=global.LWF)?null!=(s=o.Script)?s[n.name()]:void 0:void 0),n=new T(n,e,i,t.privateData),null!=t.active&&(n.active=t.active),n.url=t.lwf,n.lwfInstanceId=++this.lwfInstanceIndex,null==r.instances&&(r.instances={}),r.instances[n.lwfInstanceId]=n,r=t.parentLWF,null!=r&&(r.loadedLWFs[n.lwfInstanceId]=n),null!=t.preferredFrameRate&&(null!=t.execLimit?n.setPreferredFrameRate(t.preferredFrameRate,t.execLimit):n.setPreferredFrameRate(t.preferredFrameRate)),this.onloadLWF(t,n)},t.prototype.unloadLWF=function(t){var e,n,r,i,o,s,a,h,l;if(e=this.cache[t.url],null!=e){t.lwfInstanceId&&delete e.instances[t.lwfInstanceId],n=!0,h=e.instances;for(i in h){n=!1;break}if(n){try{for(r=document.getElementsByTagName("head")[0],l=e.scripts,s=0,a=l.length;a>s;s++)o=l[s],r.removeChild(o)}catch(c){}delete this.cache[t.url]}}},t.prototype.loadLWFs=function(t,e){var n,r,i,o,s,a,h,l,c;for(r=t.length,i=0,n=null,a=function(t){return s.onload=function(o){return null!=t&&t(o),0<s.error.length&&(null==n&&(n=[]),n=n.concat(s.error)),++i,r===i?e(n):void 0}},c=[],h=0,l=t.length;l>h;h++)s=t[h],o=s.onload,a(o),c.push(this.loadLWF(s));return c},t.prototype.getCache=function(){return this.cache},t.prototype.setParticleConstructor=function(t){this.particleConstructor=t},t.prototype.setDOMElementConstructor=function(t){this.domElementConstructor=t},t}(),"undefined"!=typeof window&&null!==window||"undefined"==typeof self||null===self||(self.onmessage=function(t){return"undefined"!=typeof self.webkitPostMessage&&"object"==typeof t.data?(t=O.loadArrayBuffer(t.data),self.webkitPostMessage(t)):(t=t.data,"L"===t[0]&&"W"===t[1]&&"F"===t[2]?t=O.load(t):(t=global.LWF.Base64.atobArray(t),t=new global.LWF.Zlib.Inflate(t).decompress(),t=O.loadArray(t)),"undefined"!=typeof self.webkitPostMessage?self.webkitPostMessage(t):self.postMessage(t)),self.close()
}),d=function(){function t(t,e,n,r){var i,o;for(this.resourceCache=e,this.cache=n,this.textInSubpixel=r,this.bitmapContexts=[],o=t.bitmaps,r=0,i=o.length;i>r;r++)n=o[r],-1!==n.textureFragmentId&&(e=new b.BitmapEx,e.matrixId=n.matrixId,e.textureFragmentId=n.textureFragmentId,e.u=0,e.v=0,e.w=1,e.h=1,this.bitmapContexts.push(new l(this,t,e)));for(this.bitmapExContexts=[],i=t.bitmapExs,n=0,r=i.length;r>n;n++)e=i[n],-1!==e.textureFragmentId&&this.bitmapExContexts.push(new l(this,t,e));for(this.textContexts=[],i=t.texts,n=0,r=i.length;r>n;n++)e=i[n],this.textContexts.push(new y(this,t,e));for(this.particleContexts=[],i=t.particles,n=0,r=i.length;r>n;n++)e=i[n],this.particleContexts.push(new u(this,t,e));this.lwfNode=null}return t.prototype.destruct=function(){var t,e,n,r;for(r=this.bitmapContexts,e=0,n=r.length;n>e;e++)t=r[e],t.destruct();for(r=this.bitmapExContexts,e=0,n=r.length;n>e;e++)t=r[e],t.destruct();for(r=this.textContexts,e=0,n=r.length;n>e;e++)t=r[e],t.destruct()},t.prototype.init=function(t){var e,n,r,i,o,s,a=this;if(!this.setupedDomElementConstructor){for(this.setupedDomElementConstructor=!0,o=t.data.programObjects,s=[],r=0,i=o.length;i>r;r++)e=o[r],n=t.data.strings[e.stringId],e=n.match(/^DOM_(.*)/),null!=e?(e=e[1],s.push(function(e){return t.setProgramObjectConstructor(n,function(t,n,r,i){return n=a.resourceCache.domElementConstructor,null==n?null:(t=n(t,e,r,i),null==t?null:new V(a,t))})}(e))):s.push(void 0);return s}},t.prototype.beginRender=function(){},t.prototype.endRender=function(){},t.prototype.setBlendMode=function(){},t.prototype.setMaskMode=function(){},t.prototype.constructBitmap=function(t,e){return(t=this.bitmapContexts[e])?new c(t):void 0},t.prototype.constructBitmapEx=function(t,e){return(t=this.bitmapExContexts[e])?new c(t):void 0},t.prototype.constructText=function(t,e,n){return(e=this.textContexts[e])?new m(t,e,n):void 0},t.prototype.constructParticle=function(t,e){return(t=this.particleContexts[e])?new p(t):void 0},t.prototype.convertColor=function(t,e,n){U.calcColor(t,e,n),t.red=Math.round(255*t.red),t.green=Math.round(255*t.green),t.blue=Math.round(255*t.blue),t.alpha=Math.round(255*t.alpha)},t.prototype.getSize=function(){var t,e;return null!=this.lwfNode&&(t=this.lwfNode.getContentSize(),e=t.width,t=t.height),0===e&&0===t&&(t="undefined"!=typeof cc.Director.getInstance().winSizeInPixels?cc.Director.getInstance().winSizeInPixels():cc.Director.getInstance().getWinSizeInPixels(),e=t.width,t=t.height),[e,t]},t.prototype.fitForHeight=function(t){var e,n;e=this.getSize(),n=e[0],e=e[1],0!==e&&e!==t.data.header.height&&t.fitForHeight(n,e)},t.prototype.fitForWidth=function(t){var e,n;e=this.getSize(),n=e[0],e=e[1],0!==n&&n!==t.data.header.width&&t.fitForWidth(n,e)},t.prototype.scaleForHeight=function(t){var e,n;e=this.getSize(),n=e[0],e=e[1],0!==e&&e!==t.data.header.height&&t.scaleForHeight(n,e)},t.prototype.scaleForWidth=function(t){var e,n;e=this.getSize(),n=e[0],e=e[1],0!==n&&n!==t.data.header.width&&t.scaleForWidth(n,e)},t.prototype.setBackgroundColor=function(t){"number"!=typeof t&&"string"==typeof t&&parseInt(t,16)},t}(),l=function(){function t(t,e,n){this.factory=t,this.data=e,this.fragment=e.textureFragments[n.textureFragmentId],e=e.textures[this.fragment.textureId],t=this.factory.cache[e.filename],this.texture2d=cc.TextureCache.getInstance().textureForKey(t),t="undefined"!=typeof this.texture2d.getPixelsWide?this.texture2d.getPixelsWide()/e.width:this.texture2d.width/e.width,this.scale=1/(e.scale*t),this.fragment.rotated?(n=this.fragment.h,e=this.fragment.w):(n=this.fragment.w,e=this.fragment.h),this.imageHeight=this.fragment.h*t,this.rect=cc.rect(this.fragment.u,this.fragment.v,n,e)}return t.prototype.destruct=function(){},t}(),c=function(){function t(t){this.context=t,t=this.context.fragment,this.matrix=new S(0,0,0,0,0,0),(t.rotated||0!==t.x||0!==t.y||1!==this.context.scale)&&(this.matrixForAtlas=new S),this.bitmap=cc.LWFBitmap.lwfBitmapWithTexture(this.context.texture2d,this.context.rect),this.visible=!0,this.alpha=1,this.z=-1}return t.prototype.destruct=function(){return this.bitmap.removeFromParentAndCleanup(!0)},t.prototype.render=function(t,e,n,r,i){var o,s;return this.z!==n&&(-1===this.z?this.context.factory.lwfNode.addChild(this.bitmap,n):this.bitmap.getParent().reorderChild(this.bitmap,n),this.z=n),this.matrix.setWithComparing(t)&&(t=this.matrix,n=this.context.fragment,o=n.x,s=n.y,r=this.context.scale,n.rotated?t=U.rotateMatrix(this.matrixForAtlas,t,r,o,s+n.h):(1!==r||0!==o||0!==s)&&(t=U.scaleMatrix(this.matrixForAtlas,t,r,o,s)),this.bitmap.setMatrix(t)),this.alpha!==e.multi.alpha||this.visible!==i?(this.alpha=e.multi.alpha,this.visible=i,this.bitmap.setOpacity(this.visible?255*this.alpha:0)):void 0},t}(),y=function(){function t(t,e,n){this.factory=t,this.data=e,this.text=n,this.str=this.data.strings[this.text.stringId],this.textProperty=this.data.textProperties[this.text.textPropertyId],t=this.data.fonts[this.textProperty.fontId],this.textColor=this.data.colors[this.text.colorId],this.name=this.data.strings[this.text.nameStringId],this.fontName='"'+this.data.strings[t.stringId]+'",sans-serif'}return t.prototype.destruct=function(){},t}(),m=function(){function e(e,n,r){var i;switch(this.lwf=e,this.context=n,this.textObject=r,this.str=null!=(i=this.textObject.parent[this.context.name])?i:this.context.str,null!=this.str&&(this.str=String(this.str)),this.matrix=new S(0,0,0,0,0,0),this.matrixForScale=new S,this.color=new g,this.color3B=cc.c3b(),this.context.textProperty.align&t.ALIGN_MASK){case t.RIGHT:e=cc.TEXT_ALIGNMENT_RIGHT;break;case t.CENTER:e=cc.TEXT_ALIGNMENT_CENTER;break;default:e=cc.TEXT_ALIGNMENT_LEFT}switch(this.context.textProperty.align&t.VERTICAL_MASK){case t.VERTICAL_BOTTOM:r=cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM;break;case t.VERTICAL_MIDDLE:r=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;break;default:r=cc.VERTICAL_TEXT_ALIGNMENT_TOP}n=this.lwf.textScale,this.label=cc.LWFLabel.create("",this.context.fontName,this.context.textProperty.fontHeight*n,cc.size(this.context.text.width*n,this.context.text.height*n),e,r),this.z=-1,this.textRendered=!1}return e.prototype.destruct=function(){this.label.removeFromParentAndCleanup(!0)},e.prototype.render=function(t,e,n,r,i){var o,s;i?(this.z!==n&&(-1===this.z?this.context.factory.lwfNode.addChild(this.label,n):this.label.getParent().reorderChild(this.label,n),this.z=n),s=this.color.red,o=this.color.green,i=this.color.blue,this.context.factory.convertColor(this.color,this.context.textColor,e),e=this.color3B,e.r=this.color.red,e.g=this.color.green,e.b=this.color.blue,r=this.color.alpha,n=!1,(s!==this.color.red||o!==this.color.green||i!==this.color.blue||r!==this.color.alpha)&&(this.label.setOpacity(r),n=!0),i=!1,r=this.textObject.parent[this.context.name],null!=r&&(r=String(r)),null!=r&&r!==this.str&&(i=!0,this.str=r),(!this.textRendered||n||i)&&this.renderText(e),this.matrix.setWithComparing(t)&&(t=U.scaleMatrix(this.matrixForScale,this.matrix,1/this.lwf.textScale,0,0),this.context.factory.textInSubpixel||(t.translateX=Math.round(t.translateX),t.translateY=Math.round(t.translateY)),this.label.setMatrix(t))):this.label.setOpacity(0)},e.prototype.renderText=function(t){this.textRendered=!0,this.label.setColor(t),this.label.setString(this.str)},e}(),u=function(){function t(t,e,n){this.factory=t,this.data=e,this.name=e.strings[e.particleDatas[n.particleDataId].stringId],this.plist=this.factory.resourceCache.particlePrefix+this.name+this.factory.resourceCache.particleSuffix}return t.prototype.destruct=function(){},t}(),p=function(){function t(t){this.context=t,this.matrix=new S,this.particle=cc.LWFParticle.create(this.context.plist),this.visible=!0,this.alpha=1,this.z=-1}return t.prototype.destruct=function(){return this.particle.removeFromParentAndCleanup(!0)},t.prototype.update=function(){},t.prototype.render=function(t,e,n,r,i){return this.z!==n&&(-1===this.z?this.context.factory.lwfNode.addChild(this.particle,n):this.particle.getParent().reorderChild(this.particle,n),this.z=n),this.matrix.setWithComparing(t)&&this.particle.setMatrix(this.matrix),this.alpha!==e.multi.alpha||this.visible!==i?(this.alpha=e.multi.alpha,this.visible=i,this.particle.setOpacity(this.visible?255*this.alpha:0)):void 0},t}(),f=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.particlePrefix="res/",this.particleSuffix=".plist"}return Q(e,t),e.prototype.loadLWFNode=function(t){t._loadLWF=!0,this.loadLWF(t)},e.prototype.loadLWFNodes=function(t,e){var n,r,i;for(r=0,i=t.length;i>r;r++)n=t[r],n._loadLWF=!0;this.loadLWFs(t,e)},e.prototype.newFactory=function(t,e,n){var r;return new d(n,this,e,null!=(r=t.textInSubpixel)?r:!1)},e.prototype.loadLWFData=function(t,n){var r;return"undefined"==typeof XMLHttpRequest?(r=cc.loadFileIntoMemory(cc.FileUtils.sharedFileUtils().fullPathFromRelativePath(n)),r=O.loadArrayBuffer(r),this.onloaddata(t,r,n)):e.__super__.loadLWFData.apply(this,arguments)},e.prototype.onloadLWF=function(t,e){var n,r;null!=t._loadLWF?(r=cc.LWFNode.lwfNodeWithLWF(e),n=t.contentSize,null!=n&&r.setContentSize(n),n=e.rendererFactory,t.fitForHeight?n.fitForHeight(e):t.fitForWidth&&n.fitForWidth(e),delete t._loadLWF,t.onload.call(t,r)):t.onload.call(t,e)},e.prototype.onLoadImage=function(){var t,e,n;this.loadedCount++,null!=this.onprogress&&this.onprogress.call(this,this.loadedCount,this.total),this.loadedCount===this.total&&(t=this._cache,e=this._data,n=this._imageCache,delete this._cache,delete this._data,delete this._imageCache,t.newLWF(this,n,e))},e.prototype.loadImages=function(t,e){var n,r,i,o,s,a,h,l,c,u;for(i=null!=(o=null!=(a=t.imagePrefix)?a:t.prefix)?o:"",o=null!=(n=t.imageSuffix)?n:"",n={},t._cache=this,t._data=e,t._imageCache=n,l=e.textures,a=0,h=l.length;h>a;a++)s=l[a],r=s.filename,s=null!=(c=null!=(u=t.imageMap)?u[r]:void 0)?c:r,s.match(/^\//)||(s=i+s),s=s.replace(/(\.png|\.jpg)$/i,o+"$1"),n[r]=s,r=cc.TextureCache.getInstance(),"undefined"!=typeof r.addImageAsync?r.addImageAsync(s,t,this.onLoadImage):(r.addImage(s),this.onLoadImage.call(t))},e.prototype.unloadLWF=function(t){var n,r,i;if(e.__super__.unloadLWF.apply(this,arguments),null==this.cache[t.url])for(n in i=t.renderFactory.cache)r=i[n],r.match(/\.(png|jpg)$/i)&&cc.TextureCache.getInstance().removeTextureForKey(r)},e.prototype.setParticlePath=function(t,e){this.particlePrefix=t,this.particleSuffix=e},e}(f),"undefined"!=typeof global&&(global.LWF.Cocos2dRendererFactory=d,global.LWF.Cocos2dResourceCache=f,global.LWF.ResourceCache=f,"undefined"!=typeof cc&&(cc.LWF=global.LWF)),d.prototype.convertColor=d.prototype.convertColor,d.prototype.fitForHeight=d.prototype.fitForHeight,d.prototype.fitForWidth=d.prototype.fitForWidth,d.prototype.scaleForHeight=d.prototype.scaleForWidth,d.prototype.scaleForStage=d.prototype.scaleForWidth,d.prototype.setBackgroundColor=d.prototype.setBackgroundColor,f.prototype.clear=f.prototype.clear,f.prototype.getCache=f.prototype.getCache,f.prototype.loadLWF=f.prototype.loadLWF,f.prototype.loadLWFs=f.prototype.loadLWFs,f.prototype.unloadLWF=f.prototype.unloadLWF,f.prototype.setParticleConstructor=f.prototype.setParticleConstructor,f.prototype.setDOMElementConstructor=f.prototype.setDOMElementConstructor,"undefined"!=typeof cc&&null!==cc&&(cc.LWFBitmap=cc.Sprite.extend({_m_lwf_matrix:null,ctor:function(){return cc.associateWithNative(this,cc.Sprite)},initWithTexture:function(t,e){var n;return n=this._super(t,e),this.setAnchorPoint(cc.p(0,1)),n},setMatrix:function(t){"undefined"!=typeof this._super?this._super({a:t.scaleX,b:t.skew1,c:t.skew0,d:t.scaleY,tx:t.translateX,ty:t.translateY}):this._m_lwf_matrix=t},transform:function(t){var e;t=null!=t?t:cc.renderContext,e=this._m_lwf_matrix,t.transform(e.scaleX,e.skew1,e.skew0,e.scaleY,e.translateX,e.translateY-cc.canvas.height)}}),cc.LWFBitmap.lwfBitmapWithTexture=function(t,e){var n;return n=new cc.LWFBitmap,n.initWithTexture(t,e)?n:null},cc.LWFLabel=cc.LabelTTF.extend({_m_lwf_matrix:null,ctor:function(){return cc.associateWithNative(this,cc.LabelTTF)},initWithString:function(t){return t="undefined"!=typeof this._super?this._super(t):this.initWithStringFontNameFontSize(t[0],t[1],t[2]),this.setAnchorPoint(cc.p(0,1)),t},setMatrix:function(t){"undefined"!=typeof this._super?this._super({a:t.scaleX,b:t.skew1,c:t.skew0,d:t.scaleY,tx:t.translateX,ty:t.translateY}):this._m_lwf_matrix=t},transform:function(t){var e;t=null!=t?t:cc.renderContext,e=this._m_lwf_matrix,t.transform(e.scaleX,e.skew1,e.skew0,e.scaleY,e.translateX,e.translateY-cc.canvas.height)}}),cc.LWFLabel.create=function(){var t;return t=new cc.LWFLabel,t.initWithString(arguments)?t:null},cc.LWFParticle=cc.ParticleSystem.extend({_m_lwf_matrix:null,ctor:function(){return cc.associateWithNative(this,cc.ParticleSystem)},setMatrix:function(t){"undefined"!=typeof this._super?this._super({a:t.scaleX,b:t.skew1,c:t.skew0,d:t.scaleY,tx:t.translateX,ty:t.translateY}):this._m_lwf_matrix=t},transform:function(t){var e;t=null!=t?t:cc.renderContext,e=this._m_lwf_matrix,t.transform(e.scaleX,e.skew1,e.skew0,e.scaleY,e.translateX,e.translateY-cc.canvas.height)}}),cc.LWFParticle.create=function(t){var e;return e=new cc.LWFParticle,e.initWithFile(t)?e:null},cc.LWFNode=cc.Node.extend({_m_lwf:null,_m_targetedDelegateAdded:!1,ctor:function(){return cc.associateWithNative(this,cc.Node)},initWithLWF:function(t){return"undefined"!=typeof this.init&&this.init(),t.rendererFactory.lwfNode=this,this._m_lwf=t,this.scheduleUpdate(),!0},cleanup:function(){this._super(),this._m_lwf.destroy()},getLWF:function(){return this._m_lwf},update:function(t){this._super(t),this._m_lwf.exec(t),this._m_lwf.render()},onEnter:function(){var t;return this._m_lwf.interactive&&(t=cc.Director.getInstance(),"undefined"!=typeof t.getTouchDispatcher&&(t.getTouchDispatcher().addTargetedDelegate(this,0,!0),this._m_targetedDelegateAdded=!0)),this._super()},onExit:function(){return this._m_targetedDelegateAdded&&cc.Director.getInstance().getTouchDispatcher().removeDelegate(this),this._super()},onTouchBegan:function(t,e){return this.onTouchMoved(t,e),this._m_lwf.inputPress(),!0},onTouchMoved:function(t){var e;e=this.convertTouchToNodeSpace(t),e=cc.Director.getInstance().convertToGL(e),this._m_lwf.inputPoint(e.x,e.y)},onTouchEnded:function(t,e){this.onTouchMoved(t,e),this._m_lwf.inputRelease()}}),cc.LWFNode.lwfNodeWithLWF=function(t){var e;return e=new cc.LWFNode,e.initWithLWF(t)?e:null})}.call(this),function(){var t={REVISION:"10",Tween:function(e){this.lwf=e.lwf,this.object=e,this.valuesStart={},this.valuesEnd={},this.valuesStartRepeat={},this.delayTime=this.repeat=this.duration=0,this.startTime=null,this.easingFunction=t.Easing.Linear.None,this.interpolationFunction=t.Interpolation.Linear,this.chainedTweens=[],this.onStartCallback=null,this.onStartCallbackFired=!1,this.onCompleteCallback=this.onUpdateCallback=null,null===this.lwf._tweens&&(this.lwf._tweens=[],"lwf"===this.lwf._tweenMode?this.lwf.addExecHandler(t._tweenExecHandler):this.lwf.addMovieEventHandler("_root",{enterFrame:t._tweenMovieHandler})),this.to=function(t,e){return void 0!==e&&(this.duration=e*this.lwf.tick),this.valuesEnd=t,this},this.start=function(){this.lwf._tweens.push(this),this.onStartCallbackFired=!1,this.startTime=this.lwf.time,this.startTime+=this.delayTime;for(var t in this.valuesEnd)if(null!==this.object[t]){if(this.valuesEnd[t]instanceof Array){if(0===this.valuesEnd[t].length)continue;this.valuesEnd[t]=[this.object[t]].concat(this.valuesEnd[t])}this.valuesStart[t]=this.object[t],!1==this.valuesStart[t]instanceof Array&&(this.valuesStart[t]*=1),this.valuesStartRepeat[t]=this.valuesStart[t]||0}return this},this.stop=function(){var t=this.lwf._tweens.indexOf(this);return-1!==t&&(this.lwf._tweens.splice(t,1),0==this.lwf._tweens.length&&this.lwf.stopTweens()),this},this.delay=function(t){return this.delayTime=t*this.lwf.tick,this},this.repeat=function(t){return this.repeat=t,this},this.easing=function(t){return this.easingFunction=t,this},this.interpolation=function(t){return this.interpolationFunction=t,this},this.chain=function(e){return"undefined"!=typeof e&&null!==e?(this.chainedTweens.push(e),this):(e=new t.Tween(this.object),this.chainedTweens.push(e),e)},this.onStart=function(t){return this.onStartCallback=t,this},this.onUpdate=function(t){return this.onUpdateCallback=t,this},this.onComplete=function(t){return this.onCompleteCallback=t,this},this.update=function(t){if(t<this.startTime)return!0;if(null===this.object.lwf)return!1;!1===this.onStartCallbackFired&&(null!==this.onStartCallback&&this.onStartCallback.call(this.object),this.onStartCallbackFired=!0);var e,n=(t-this.startTime)/(0>=this.duration?this.lwf.tick:this.duration),n=n>1?1:n,r=this.easingFunction(n);for(e in this.valuesEnd){var i=this.valuesStart[e]||0,o=this.valuesEnd[e];o instanceof Array?this.object[e]=this.interpolationFunction(o,r):("string"==typeof o&&(o=i+parseFloat(o,10)),this.object[e]=i+(o-i)*r)}if(null!==this.onUpdateCallback&&this.onUpdateCallback.call(this.object,r),1==n){if(!(0<this.repeat)){for(null!==this.onCompleteCallback&&this.onCompleteCallback.call(this.object),n=0,r=this.chainedTweens.length;r>n;n++)this.chainedTweens[n].start(t);return!1}isFinite(this.repeat)&&this.repeat--;for(e in this.valuesStartRepeat)"string"==typeof this.valuesEnd[e]&&(this.valuesStartRepeat[e]+=parseFloat(this.valuesEnd[e],10)),this.valuesStart[e]=this.valuesStartRepeat[e];this.startTime=t+this.delayTime}return!0},this.to=this.to,this.start=this.start,this.stop=this.stop,this.delay=this.delay,this.easing=this.easing,this.interpolation=this.interpolation,this.chain=this.chain,this.onStart=this.onStart,this.onUpdate=this.onUpdate,this.onComplete=this.onComplete,this.update=this.update},Easing:{Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return 1>(t*=2)?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:1>(t*=2)?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)))},Out:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)},InOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),1>(t*=2)?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4):.5*n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)+1)}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){return 1>(t*=2)?.5*t*t*(3.5949095*t-2.5949095):.5*((t-=2)*t*(3.5949095*t+2.5949095)+2)}},Bounce:{In:function(e){return 1-t.Easing.Bounce.Out(1-e)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(e){return.5>e?.5*t.Easing.Bounce.In(2*e):.5*t.Easing.Bounce.Out(2*e-1)+.5}}}};t.Interpolation={Linear:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),s=t.Interpolation.Utils.Linear;return 0>n?s(e[0],e[1],i):n>1?s(e[r],e[r-1],r-i):s(e[o],e[o+1>r?r:o+1],i-o)},Bezier:function(e,n){var r,i=0,o=e.length-1,s=Math.pow,a=t.Interpolation.Utils.Bernstein;for(r=0;o>=r;r++)i+=s(1-n,o-r)*s(n,r)*e[r]*a(o,r);return i},CatmullRom:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),s=t.Interpolation.Utils.CatmullRom;return e[0]===e[r]?(0>n&&(o=Math.floor(i=r*(1+n))),s(e[(o-1+r)%r],e[o],e[(o+1)%r],e[(o+2)%r],i-o)):0>n?e[0]-(s(e[0],e[0],e[1],e[1],-i)-e[0]):n>1?e[r]-(s(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):s(e[o?o-1:0],e[o],e[o+1>r?r:o+1],e[o+2>r?r:o+2],i-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(e,n){var r=t.Interpolation.Utils.Factorial;return r(e)/r(n)/r(e-n)},Factorial:function(){var t=[1];return function(e){var n,r=1;if(t[e])return t[e];for(n=e;n>1;n--)r*=n;return t[e]=r}}(),CatmullRom:function(t,e,n,r,i){t=.5*(n-t),r=.5*(r-e);var o=i*i;return(2*e-2*n+t+r)*i*o+(-3*e+3*n-2*t-r)*o+t*i+e}}};var e=global.LWF.LWF.prototype;e.setTweenMode=function(t){this._tweenMode=t},e.stopTweens=function(){null!==this._tweens&&(this._tweens=null,this.removeExecHandler(t._tweenExecHandler),this.removeMovieEventHandler("_root",{enterFrame:t._tweenMovieHandler}))},e.stopTweens=e.stopTweens,t._tweenUpdater=function(){if(null!==this._tweens){for(var t=0,e=this._tweens.length,n=this.time;e>t;)this._tweens[t].update(n)?t++:(this._tweens.splice(t,1),e--);0==this._tweens.length&&this.stopTweens()}},t._tweenExecHandler=function(){t._tweenUpdater.call(this)},t._tweenMovieHandler=function(){t._tweenUpdater.call(this.lwf)},e=global.LWF.Movie.prototype,e.addTween=function(){return new t.Tween(this)},e.stopTweens=function(){if("undefined"==typeof this.lwf||null===this.lwf||null===this.lwf._tweens)return this;for(var t=this.lwf._tweens,e=0,n=t.length;n>e;)t[e].object===this?(t.splice(e,1),n--):e++;return 0==t.length&&this.lwf.stopTweens(),this};var n=global.LWF.BitmapClip.prototype;n.addTween=e.addTween,n.stopTweens=e.stopTweens,global.LWF.Tween=t.Tween,global.LWF.Tween.Easing=t.Easing,e=global.LWF.Tween.Easing,e.Linear=t.Easing.Linear,e.Linear.None=t.Easing.Linear.None,e.Quadratic=t.Easing.Quadratic,e.Quadratic.In=t.Easing.Quadratic.In,e.Quadratic.Out=t.Easing.Quadratic.Out,e.Quadratic.InOut=t.Easing.Quadratic.InOut,e.Cubic=t.Easing.Cubic,e.Cubic.In=t.Easing.Cubic.In,e.Cubic.Out=t.Easing.Cubic.Out,e.Cubic.InOut=t.Easing.Cubic.InOut,e.Quartic=t.Easing.Quartic,e.Quartic.In=t.Easing.Quartic.In,e.Quartic.Out=t.Easing.Quartic.Out,e.Quartic.InOut=t.Easing.Quartic.InOut,e.Quintic=t.Easing.Quintic,e.Quintic.In=t.Easing.Quintic.In,e.Quintic.Out=t.Easing.Quintic.Out,e.Quintic.InOut=t.Easing.Quintic.InOut,e.Sinusoidal=t.Easing.Sinusoidal,e.Sinusoidal.In=t.Easing.Sinusoidal.In,e.Sinusoidal.Out=t.Easing.Sinusoidal.Out,e.Sinusoidal.InOut=t.Easing.Sinusoidal.InOut,e.Exponential=t.Easing.Exponential,e.Exponential.In=t.Easing.Exponential.In,e.Exponential.Out=t.Easing.Exponential.Out,e.Exponential.InOut=t.Easing.Exponential.InOut,e.Circular=t.Easing.Circular,e.Circular.In=t.Easing.Circular.In,e.Circular.Out=t.Easing.Circular.Out,e.Circular.InOut=t.Easing.Circular.InOut,e.Elastic=t.Easing.Elastic,e.Elastic.In=t.Easing.Elastic.In,e.Elastic.Out=t.Easing.Elastic.Out,e.Elastic.InOut=t.Easing.Elastic.InOut,e.Back=t.Easing.Back,e.Back.In=t.Easing.Back.In,e.Back.Out=t.Easing.Back.Out,e.Back.InOut=t.Easing.Back.InOut,e.Bounce=t.Easing.Bounce,e.Bounce.In=t.Easing.Bounce.In,e.Bounce.Out=t.Easing.Bounce.Out,e.Bounce.InOut=t.Easing.Bounce.InOut,global.LWF.Tween.Interpolation=t.Interpolation,e=global.LWF.Tween.Interpolation,e.Linear=t.Interpolation.Linear,e.Bezier=t.Interpolation.Bezier,e.CatmullRom=t.Interpolation.CatmullRom,e.Utils=t.Interpolation.Utils,e.Utils.Linear=t.Interpolation.Utils.Linear,e.Utils.Bernstein=t.Interpolation.Utils.Bernstein,e.Utils.Factorial=t.Interpolation.Utils.Factorial,e.Utils.CatmullRom=t.Interpolation.Utils.CatmullRom}.call(this),function(){var t={Character:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RangeError:"INVALID_CHARACTER_ERR",btoaArray:{}};t.btoaArray.CharacterTable=function(t){var e,n,r=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(t.length);for(e=0,n=r.length;n>e;++e)r[e]=t.charCodeAt(e);return r}(t.Character),t.atobArray=function(e){for(var n,r,i=0,o=0,s=e.length,a=0,h=0,l=t.atobArray.DecodeTable;"="===e.charAt(s-1);)--s;if(n=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(3*(0|(s+3)/4)-[0,0,2,1][s%4]),1===s%4||0<e.length&&0===s)throw Error(t.RangeError);for(;s>o;){if(r=e.charCodeAt(o++),r=256>r?l[r]:-1,-1===r)throw Error(t.RangeError);i=(i<<6)+r,h+=6,h>=8&&(h-=8,r=i>>h,n[a++]=r,i^=r<<h)}return n},t.atobArray.DecodeTable=function(t){var e=new("undefined"!=typeof Int16Array?Int16Array:Array)(256),n=t instanceof Array?t:Array.prototype.slice.call(t);for(t=0;255>t;++t)e[t]=n.indexOf(t);return e}(t.btoaArray.CharacterTable),global.LWF.Base64=t}.call(this),function(){var t={},e=!1;"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&(e=!0),t.CompressionMethod={DEFLATE:8,RESERVED:15},t.Adler32=function(e){return"string"==typeof e&&(e=t.Util.stringToByteArray(e)),t.Adler32.update(1,e)},t.Adler32.update=function(e,n){for(var r,i=65535&e,o=65535&e>>>16,s=n.length,a=0;s>0;){r=s>t.Adler32.OptimizationParameter?t.Adler32.OptimizationParameter:s,s-=r;do i+=n[a++],o+=i;while(--r);i%=65521,o%=65521}return(o<<16|i)>>>0},t.Adler32.OptimizationParameter=1024,t.Huffman={},t.Huffman.buildHuffmanTable=function(t){var n,r,i,o,s,a,h,l,c,u=t.length,p=0,d=Number.POSITIVE_INFINITY;for(l=0;u>l;++l)t[l]>p&&(p=t[l]),t[l]<d&&(d=t[l]);for(n=1<<p,r=new(e?Uint32Array:Array)(n),i=1,o=0,s=2;p>=i;){for(l=0;u>l;++l)if(t[l]===i){for(a=0,h=o,c=0;i>c;++c)a=a<<1|1&h,h>>=1;for(c=a;n>c;c+=s)r[c]=i<<16|l;++o}++i,o<<=1,s<<=1}return[r,p,d]};var n=t.Huffman.buildHuffmanTable;t.RawInflate=function(n,r){switch(this.blocks=[],this.bufferSize=32768,this.bitsbuflen=this.bitsbuf=this.ip=this.totalpos=0,this.input=e?new Uint8Array(n):n,this.bfinal=!1,this.bufferType=t.RawInflate.BufferType.ADAPTIVE,this.resize=!1,(r||!(r={}))&&(r.index&&(this.ip=r.index),r.bufferSize&&(this.bufferSize=r.bufferSize),r.bufferType&&(this.bufferType=r.bufferType),r.resize&&(this.resize=r.resize)),this.bufferType){case t.RawInflate.BufferType.BLOCK:this.op=t.RawInflate.MaxBackwardLength,this.output=new(e?Uint8Array:Array)(t.RawInflate.MaxBackwardLength+this.bufferSize+t.RawInflate.MaxCopyLength);break;case t.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new(e?Uint8Array:Array)(this.bufferSize),this.expandBuffer=this.expandBufferAdaptive,this.concatBuffer=this.concatBufferDynamic,this.decodeHuffman=this.decodeHuffmanAdaptive;break;default:throw Error("invalid inflate mode")}},t.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},t.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();return this.concatBuffer()},t.RawInflate.MaxBackwardLength=32768,t.RawInflate.MaxCopyLength=258,t.RawInflate.Order=function(t){return e?new Uint16Array(t):t}([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t.RawInflate.LengthCodeTable=function(t){return e?new Uint16Array(t):t}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),t.RawInflate.LengthExtraTable=function(t){return e?new Uint8Array(t):t}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),t.RawInflate.DistCodeTable=function(t){return e?new Uint16Array(t):t}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),t.RawInflate.DistExtraTable=function(t){return e?new Uint8Array(t):t}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),t.RawInflate.FixedLiteralLengthTable=function(t){return t}(function(){var t,r,i=new(e?Uint8Array:Array)(288);for(t=0,r=i.length;r>t;++t)i[t]=143>=t?8:255>=t?9:279>=t?7:8;return n(i)}()),t.RawInflate.FixedDistanceTable=function(t){return t}(function(){var t,r,i=new(e?Uint8Array:Array)(30);for(t=0,r=i.length;r>t;++t)i[t]=5;return n(i)}()),t.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw Error("unknown BTYPE: "+t)}},t.RawInflate.prototype.readBits=function(t){for(var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,o=this.ip;t>r;){if(e=i[o++],void 0===e)throw Error("input buffer is broken");n|=e<<r,r+=8}return e=n&(1<<t)-1,this.bitsbuf=n>>>t,this.bitsbuflen=r-t,this.ip=o,e},t.RawInflate.prototype.readCodeByTable=function(t){var e=this.bitsbuf,n=this.bitsbuflen,r=this.input,i=this.ip,o=t[0];t=t[1];for(var s;t>n;){if(s=r[i++],void 0===s)throw Error("input buffer is broken");e|=s<<n,n+=8}return r=o[e&(1<<t)-1],o=r>>>16,this.bitsbuf=e>>o,this.bitsbuflen=n-o,this.ip=i,65535&r},t.RawInflate.prototype.parseUncompressedBlock=function(){var n,r,i,o=this.input,s=this.ip,a=this.output,h=this.op,l=a.length;if(this.bitsbuflen=this.bitsbuf=0,n=o[s++],void 0===n)throw Error("invalid uncompressed block header: LEN (first byte)");if(r=n,n=o[s++],void 0===n)throw Error("invalid uncompressed block header: LEN (second byte)");if(r|=n<<8,n=o[s++],void 0===n)throw Error("invalid uncompressed block header: NLEN (first byte)");if(i=n,n=o[s++],void 0===n)throw Error("invalid uncompressed block header: NLEN (second byte)");if(r===~(i|n<<8))throw Error("invalid uncompressed block header: length verify");if(s+r>o.length)throw Error("input buffer is broken");switch(this.bufferType){case t.RawInflate.BufferType.BLOCK:for(;h+r>a.length;){if(n=l-h,r-=n,e)a.set(o.subarray(s,s+n),h),h+=n,s+=n;else for(;n--;)a[h++]=o[s++];this.op=h,a=this.expandBuffer(),h=this.op}break;case t.RawInflate.BufferType.ADAPTIVE:for(;h+r>a.length;)a=this.expandBuffer({fixRatio:2});break;default:throw Error("invalid inflate mode")}if(e)a.set(o.subarray(s,s+r),h),h+=r,s+=r;else for(;r--;)a[h++]=o[s++];this.ip=s,this.op=h,this.output=a},t.RawInflate.prototype.parseFixedHuffmanBlock=function(){this.decodeHuffman(t.RawInflate.FixedLiteralLengthTable,t.RawInflate.FixedDistanceTable)},t.RawInflate.prototype.parseDynamicHuffmanBlock=function(){function r(t,e,n){var r,i,o;for(o=0;t>o;)switch(r=this.readCodeByTable(e)){case 16:for(r=3+this.readBits(2);r--;)n[o++]=i;break;case 17:for(r=3+this.readBits(3);r--;)n[o++]=0;i=0;break;case 18:for(r=11+this.readBits(7);r--;)n[o++]=0;i=0;break;default:i=n[o++]=r}return n}var i,o=this.readBits(5)+257,s=this.readBits(5)+1,a=this.readBits(4)+4,h=new(e?Uint8Array:Array)(t.RawInflate.Order.length);for(i=0;a>i;++i)h[t.RawInflate.Order[i]]=this.readBits(3);a=n(h),h=new(e?Uint8Array:Array)(o),i=new(e?Uint8Array:Array)(s),this.decodeHuffman(n(r.call(this,o,a,h)),n(r.call(this,s,a,i)))},t.RawInflate.prototype.decodeHuffman=function(e,n){var r=this.output,i=this.op;this.currentLitlenTable=e;for(var o,s,a,h=r.length-t.RawInflate.MaxCopyLength;256!==(o=this.readCodeByTable(e));)if(256>o)i>=h&&(this.op=i,r=this.expandBuffer(),i=this.op),r[i++]=o;else for(o-=257,a=t.RawInflate.LengthCodeTable[o],0<t.RawInflate.LengthExtraTable[o]&&(a+=this.readBits(t.RawInflate.LengthExtraTable[o])),o=this.readCodeByTable(n),s=t.RawInflate.DistCodeTable[o],0<t.RawInflate.DistExtraTable[o]&&(s+=this.readBits(t.RawInflate.DistExtraTable[o])),i>=h&&(this.op=i,r=this.expandBuffer(),i=this.op);a--;)r[i]=r[i++-s];for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=i},t.RawInflate.prototype.decodeHuffmanAdaptive=function(e,n){var r=this.output,i=this.op;this.currentLitlenTable=e;for(var o,s,a,h=r.length;256!==(o=this.readCodeByTable(e));)if(256>o)i>=h&&(r=this.expandBuffer(),h=r.length),r[i++]=o;else for(o-=257,a=t.RawInflate.LengthCodeTable[o],0<t.RawInflate.LengthExtraTable[o]&&(a+=this.readBits(t.RawInflate.LengthExtraTable[o])),o=this.readCodeByTable(n),s=t.RawInflate.DistCodeTable[o],0<t.RawInflate.DistExtraTable[o]&&(s+=this.readBits(t.RawInflate.DistExtraTable[o])),i+a>h&&(r=this.expandBuffer(),h=r.length);a--;)r[i]=r[i++-s];
for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=i},t.RawInflate.prototype.expandBuffer=function(n){n=new(e?Uint8Array:Array)(this.op-t.RawInflate.MaxBackwardLength);var r,i,o=this.op-t.RawInflate.MaxBackwardLength,s=this.output;if(e)n.set(s.subarray(t.RawInflate.MaxBackwardLength,n.length));else for(r=0,i=n.length;i>r;++r)n[r]=s[r+t.RawInflate.MaxBackwardLength];if(this.blocks.push(n),this.totalpos+=n.length,e)s.set(s.subarray(o,o+t.RawInflate.MaxBackwardLength));else for(r=0;r<t.RawInflate.MaxBackwardLength;++r)s[r]=s[o+r];return this.op=t.RawInflate.MaxBackwardLength,s},t.RawInflate.prototype.expandBufferAdaptive=function(t){var n=0|this.input.length/this.ip+1,r=this.input,i=this.output;return t&&("number"==typeof t.fixRatio&&(n=t.fixRatio),"number"==typeof t.addRatio&&(n+=t.addRatio)),2>n?(t=(r.length-this.ip)/this.currentLitlenTable[2],t=0|258*(t/2),t=t<i.length?i.length+t:i.length<<1):t=i.length*n,e?(t=new Uint8Array(t),t.set(i)):t=i,this.output=t},t.RawInflate.prototype.concatBuffer=function(){var n,r,i,o,s,a=0,h=this.output,l=this.blocks,c=new(e?Uint8Array:Array)(this.totalpos+(this.op-t.RawInflate.MaxBackwardLength));if(0===l.length)return e?this.output.subarray(t.RawInflate.MaxBackwardLength,this.op):this.output.slice(t.RawInflate.MaxBackwardLength,this.op);for(r=0,i=l.length;i>r;++r)for(n=l[r],o=0,s=n.length;s>o;++o)c[a++]=n[o];for(r=t.RawInflate.MaxBackwardLength,i=this.op;i>r;++r)c[a++]=h[r];return this.blocks=[],this.buffer=c},t.RawInflate.prototype.concatBufferDynamic=function(){var t,n=this.op;return e?this.resize?(t=new Uint8Array(n),t.set(this.output.subarray(0,n))):t=this.output.subarray(0,n):(this.output.length>n&&(this.output.length=n),t=this.output),this.buffer=t},t.Inflate=function(e,n){var r,i;switch(this.input=e,this.ip=0,(n||!(n={}))&&(n.index&&(this.ip=n.index),n.verify&&(this.verify=n.verify)),r=e[this.ip++],i=e[this.ip++],15&r){case t.CompressionMethod.DEFLATE:this.method=t.CompressionMethod.DEFLATE;break;default:throw Error("unsupported compression method")}if(0!==((r<<8)+i)%31)throw Error("invalid fcheck flag:"+((r<<8)+i)%31);if(32&i)throw Error("fdict flag is not supported");this.rawinflate=new t.RawInflate(e,{index:this.ip,bufferSize:n.bufferSize,bufferType:n.bufferType,resize:n.resize})},t.Inflate.BufferType=t.RawInflate.BufferType,t.Inflate.prototype.decompress=function(){var e,n=this.input;if(e=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(n=(n[this.ip++]<<24|n[this.ip++]<<16|n[this.ip++]<<8|n[this.ip++])>>>0,n!==t.Adler32(e)))throw Error("invalid adler-32 checksum");return e},global.LWF.Zlib=t}.call(this)}.call(this);