// Copyright (c) 2012 GREE, Inc - http://git.io/uvS3hQ
// Copyright (c) 2010-2012 Tween.js authors - http://git.io/tiDrNw
// Copyright (c) 2001 Robert Penner - http://goo.gl/Qjqc0
// Copyright (c) 2012 imaya - http://git.io/SKEzIQ http://git.io/cC8gDw
(function(){"undefined"==typeof global&&"undefined"!=typeof window?global=window:"undefined"!=typeof cc&&(global=cc),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E={}.hasOwnProperty;l=function(a,b){function c(){this.constructor=a}for(var d in b)E.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},z=function(a,b){this.x=null!=a?a:0,this.y=null!=b?b:0},C=function(a,b){this.translateX=null!=a?a:0,this.translateY=null!=b?b:0};var F=function(a,b,c,d,e,f){this.scaleX=a,this.scaleY=b,this.skew0=c,this.skew1=d,this.translateX=e,this.translateY=f,null==this.scaleX&&this.clear()};F.prototype.clear=function(){this.scaleY=this.scaleX=1,this.translateY=this.translateX=this.skew1=this.skew0=0},F.prototype.set=function(a){return this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.skew0=a.skew0,this.skew1=a.skew1,this.translateX=a.translateX,this.translateY=a.translateY,this},F.prototype.setWithComparing=function(a){var b,c,d,e,f,g;return null===a?!1:(b=a.scaleX,c=a.scaleY,d=a.skew0,e=a.skew1,f=a.translateX,g=a.translateY,a=!1,this.scaleX!==b&&(this.scaleX=b,a=!0),this.scaleY!==c&&(this.scaleY=c,a=!0),this.skew0!==d&&(this.skew0=d,a=!0),this.skew1!==e&&(this.skew1=e,a=!0),this.translateX!==f&&(this.translateX=f,a=!0),this.translateY!==g&&(this.translateY=g,a=!0),a)};var G=function(a,b,c,d){this.red=a,this.green=b,this.blue=c,this.alpha=d,null==this.red&&(this.alpha=this.blue=this.green=this.red=0)};G.prototype.set=function(a,b,c,d){"object"==typeof a?(this.red=a.red,this.green=a.green,this.blue=a.blue,this.alpha=a.alpha):(this.red=a,this.green=b,this.blue=c,this.alpha=d)},b=function(a){this.alpha=a};var H=function(a,b,c,d){this.multi=new G(a,b,c,d),null==a&&this.clear()};H.prototype.clear=function(){this.multi.set(1,1,1,1)},H.prototype.set=function(a){return this.multi.set(a.multi),this},H.prototype.setWithComparing=function(a){var b,c,d,e,f;return null===a?!1:(b=a.multi,f=b.red,d=b.green,a=b.blue,b=b.alpha,c=!1,e=this.multi,e.red!==f&&(e.red=f,c=!0),e.green!==d&&(e.green=d,c=!0),e.blue!==a&&(e.blue=a,c=!0),e.alpha!==b&&(e.alpha=b,c=!0),c)};var I=function(){};t=function(){},t.HEADER_SIZE=324,t.FORMAT_VERSION_0=18,t.FORMAT_VERSION_1=16,t.FORMAT_VERSION_2=16,t.FORMAT_TYPE=0,t.OPTION_USE_SCRIPT=1,t.OPTION_USE_TEXTUREATLAS=2,t.MATRIX_FLAG=-2147483648,t.COLORTRANSFORM_FLAG=-2147483648,t.TEXTUREFORMAT_NORMAL=0,t.TEXTUREFORMAT_PREMULTIPLIEDALPHA=1,I.Constant=t,I.StringBase=function(a){this.stringId=a},t=function(a,b,c,d,e){this.stringId=a,this.format=b,this.width=c,this.height=d,this.scale=e},t.prototype.setFilename=function(a){this.filename=a.strings[this.stringId]},I.Texture=t,I.TextureReplacement=function(a,b,c,d,e){this.filename=a,this.format=b,this.width=c,this.height=d,this.scale=e},t=function(a,b,c,d,e,f,g,h,i){this.stringId=a,this.textureId=b,this.rotated=c,this.x=d,this.y=e,this.u=f,this.v=g,this.w=h,this.h=i},t.prototype.setFilename=function(a){this.filename=a.strings[this.stringId]},I.TextureFragment=t,I.TextureFragmentReplacement=function(a,b,c,d,e,f,g,h,i){this.filename=a,this.textureId=b,this.rotated=c,this.x=d,this.y=e,this.u=f,this.v=g,this.w=h,this.h=i},I.Bitmap=function(a,b){this.matrixId=a,this.textureFragmentId=b},t=function(a,b,c,d,e,f,g){this.matrixId=a,this.textureFragmentId=b,this.attribute=c,this.u=d,this.v=e,this.w=f,this.h=g};var J=function(){};J.REPEAT_S=1,J.REPEAT_T=2,t.Attribute=J,I.BitmapEx=t,I.Font=function(a,b){this.stringId=a,this.letterspacing=b},t=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.maxLength=a,this.fontId=b,this.fontHeight=c,this.align=d,this.leftMargin=e,this.rightMargin=f,this.indent=g,this.leading=h,this.strokeColorId=i,this.strokeWidth=j,this.shadowColorId=k,this.shadowOffsetX=l,this.shadowOffsetY=m,this.shadowBlur=n},J=function(){},J.LEFT=0,J.RIGHT=1,J.CENTER=2,J.ALIGN_MASK=3,J.VERTICAL_BOTTOM=4,J.VERTICAL_MIDDLE=8,J.VERTICAL_MASK=12,t.Align=J,I.TextProperty=t,I.Text=function(a,b,c,d,e,f,g){this.matrixId=a,this.nameStringId=b,this.textPropertyId=c,this.stringId=d,this.colorId=e,this.width=f,this.height=g},I.ParticleData=function(a){this.stringId=a},I.Particle=function(a,b,c){this.matrixId=a,this.colorTransformId=b,this.particleDataId=c};var K=function(a,b,c,d,e){this.width=b,this.height=c,this.matrixId=d,this.colorTransformId=e,K.__super__.constructor.call(this,a)};l(K,I.StringBase),I.ProgramObject=K,t=function(a,b){this.graphicObjectType=a,this.graphicObjectId=b},J=function(){},J.BITMAP=0,J.BITMAPEX=1,J.TEXT=2,J.GRAPHIC_OBJECT_MAX=3,t.Type=J,I.GraphicObject=t,I.Graphic=function(a,b){this.graphicObjectId=a,this.graphicObjects=b},t=function(a,b){this.objectType=a,this.objectId=b},J=function(){},J.BUTTON=0,J.GRAPHIC=1,J.MOVIE=2,J.BITMAP=3,J.BITMAPEX=4,J.TEXT=5,J.PARTICLE=6,J.PROGRAMOBJECT=7,J.ATTACHEDMOVIE=8,J.OBJECT_MAX=9,t.Type=J,I.LObject=t,I.Animation=function(a,b){this.animationOffset=a,this.animationLength=b},t=function(a,b,c){this.condition=a,this.keyCode=b,this.animationId=c},J=function(){},J.ROLLOVER=1,J.ROLLOUT=2,J.PRESS=4,J.RELEASE=8,J.DRAGOUT=16,J.DRAGOVER=32,J.RELEASEOUTSIDE=64,J.KEYPRESS=128,t.Condition=J,I.ButtonCondition=t,I.Button=function(a,b,c,d,e,f){this.width=a,this.height=b,this.matrixId=c,this.colorTransformId=d,this.conditionId=e,this.conditions=f};var L=function(a,b){this.frameNo=b,L.__super__.constructor.call(this,a)};l(L,I.StringBase),I.Label=L;var M=function(a){M.__super__.constructor.apply(this,arguments)};l(M,I.StringBase),I.InstanceName=M;var N=function(a){N.__super__.constructor.apply(this,arguments)};l(N,I.StringBase),I.Event=N,I.String=function(a,b){this.stringOffset=a,this.stringLength=b},I.Place=function(a,b,c,d){this.depth=a,this.objectId=b,this.instanceId=c,this.matrixId=d},I.ControlMoveM=function(a,b){this.placeId=a,this.matrixId=b},I.ControlMoveC=function(a,b){this.placeId=a,this.colorTransformId=b},I.ControlMoveMC=function(a,b,c){this.placeId=a,this.matrixId=b,this.colorTransformId=c},t=function(a,b){this.controlType=a,this.controlId=b},J=function(){},J.MOVE=0,J.MOVEM=1,J.MOVEC=2,J.MOVEMC=3,J.ANIMATION=4,J.CONTROL_MAX=5,t.Type=J,I.Control=t,I.Frame=function(a,b){this.controlOffset=a,this.controls=b},t=function(a,b){this.clipEvent=a,this.animationId=b},J=function(){},J.LOAD=1,J.UNLOAD=2,J.ENTERFRAME=4,t.ClipEvent=J,I.MovieClipEvent=t,I.Movie=function(a,b,c,d,e,f,g){this.depths=a,this.labelOffset=b,this.labels=c,this.frameOffset=d,this.frames=e,this.clipEventId=f,this.clipEvents=g};var O=function(a,b){this.movieId=b,O.__super__.constructor.call(this,a)};l(O,I.StringBase),I.MovieLinkage=O,I.ItemArray=function(a,b){this.offset=a,this.length=b},I.Header=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y){this.id0=a,this.id1=b,this.id2=c,this.id3=d,this.formatVersion0=e,this.formatVersion1=f,this.formatVersion2=g,this.option=h,this.width=i,this.height=j,this.frameRate=k,this.rootMovieId=l,this.nameStringId=m,this.backgroundColor=n,this.stringBytes=o,this.animationBytes=p,this.translate=q,this.matrix=r,this.color=s,this.alphaTransform=t,this.colorTransform=u,this.objectData=v,this.texture=w,this.textureFragment=x,this.bitmap=y,this.bitmapEx=z,this.font=A,this.textProperty=B,this.text=C,this.particleData=D,this.particle=E,this.programObject=F,this.graphicObject=G,this.graphic=H,this.animation=I,this.buttonCondition=J,this.button=K,this.label=L,this.instanceName=M,this.eventData=N,this.place=O,this.controlMoveM=P,this.controlMoveC=Q,this.controlMoveMC=R,this.control=S,this.frame=T,this.movieClipEvent=U,this.movie=V,this.movieLinkage=W,this.stringData=X,this.lwfLength=Y},a=I.TextProperty.Align,g=I.MovieClipEvent.ClipEvent,o=I.ButtonCondition.Condition,p=I.Constant,D=I.LObject.Type,q=I.Control.Type,r=I.GraphicObject.Type;var P=function(){};P.END=0,P.PLAY=1,P.STOP=2,P.NEXTFRAME=3,P.PREVFRAME=4,P.GOTOFRAME=5,P.GOTOLABEL=6,P.SETTARGET=7,P.EVENT=8,P.CALL=9,P.INSTANCE_TARGET_ROOT=-1,P.INSTANCE_TARGET_PARENT=-2;var Q=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,J){this.header=a,this.translates=b,this.matrices=c,this.colors=d,this.alphaTransforms=e,this.colorTransforms=f,this.objects=g,this.textures=h,this.textureFragments=i,this.bitmaps=j,this.bitmapExs=k,this.fonts=l,this.textProperties=m,this.texts=n,this.particleDatas=o,this.particles=p,this.programObjects=q,this.graphicObjects=r,this.graphics=s,this.animations=t,this.buttonConditions=u,this.buttons=v,this.labels=w,this.instanceNames=x,this.events=y,this.places=z,this.controlMoveMs=A,this.controlMoveCs=B,this.controlMoveMCs=C,this.controls=D,this.frames=E,this.movieClipEvents=F,this.movies=G,this.movieLinkages=H,this.strings=J,null!=this.header.header?(a=this.header,this.header=a.header,this.translates=a.translates,this.matrices=a.matrices,this.colors=a.colors,this.alphaTransforms=a.alphaTransforms,this.colorTransforms=a.colorTransforms,this.objects=a.objects,this.textures=a.textures,this.textureFragments=a.textureFragments,this.bitmaps=a.bitmaps,this.bitmapExs=a.bitmapExs,this.fonts=a.fonts,this.textProperties=a.textProperties,this.texts=a.texts,this.particleDatas=a.particleDatas,this.particles=a.particles,this.programObjects=a.programObjects,this.graphicObjects=a.graphicObjects,this.graphics=a.graphics,this.animations=a.animations,this.buttonConditions=a.buttonConditions,this.buttons=a.buttons,this.labels=a.labels,this.instanceNames=a.instanceNames,this.events=a.events,this.places=a.places,this.controlMoveMs=a.controlMoveMs,this.controlMoveCs=a.controlMoveCs,this.controlMoveMCs=a.controlMoveMCs,this.controls=a.controls,this.frames=a.frames,this.movieClipEvents=a.movieClipEvents,this.movies=a.movies,this.movieLinkages=a.movieLinkages,this.strings=a.strings,this.stringMap=a.stringMap,this.eventMap=a.eventMap,this.instanceNameMap=a.instanceNameMap,this.movieLinkageMap=a.movieLinkageMap,this.movieLinkageNameMap=a.movieLinkageNameMap,this.programObjectMap=a.programObjectMap,this.labelMap=a.labelMap,this.useScript=a.useScript,this.useTextureAtlas=a.useTextureAtlas):(this.stringMap={},this.eventMap={},this.instanceNameMap={},this.movieLinkageMap={},this.movieLinkageNameMap={},this.programObjectMap={},this.labelMap=[],null!=this.header?(this.useScript=0!==(this.header.option&I.Constant.OPTION_USE_SCRIPT),this.useTextureAtlas=0!==(this.header.option&I.Constant.OPTION_USE_TEXTUREATLAS)):this.useTextureAtlas=this.useScript=!1)};Q.prototype.check=function(){return null!=this.header&&"L"===this.header.id0&&"W"===this.header.id1&&"F"===this.header.id2&&this.header.formatVersion0===I.Constant.FORMAT_VERSION_0&&this.header.formatVersion1===I.Constant.FORMAT_VERSION_1&&this.header.formatVersion2===I.Constant.FORMAT_VERSION_2?!0:!1},Q.prototype.name=function(){return this.strings[this.header.nameStringId]},Q.prototype.replaceTexture=function(a,b){return 0>a||a>=textures.length?!1:(textures[a]=b,!0)},Q.prototype.replaceTextureFragment=function(a,b){return 0>a||a>=textureFragments.length?!1:(textureFragments[a]=b,!0)};var R=function(){};R.prototype.readByte=function(){return this.d.charCodeAt(this.index++)&255},R.prototype.readChar=function(){return String.fromCharCode(this.readByte())},R.prototype.readBytes=function(a){var b;return b=this.d.substr(this.index,a),this.index+=a,b},R.prototype.readInt32=function(){return(this.readByte()<<0)+(this.readByte()<<8)+(this.readByte()<<16)+(this.readByte()<<24)},R.prototype.readSingle=function(){var a,b,c,d,e;return d=this.readByte(),c=this.readByte(),b=this.readByte(),a=this.readByte(),e=(a<<1&255|b>>7)-127,b=(b&127)<<16|c<<8|d,0===b&&-127===e?0:(1-2*(a>>7))*(1+b*Math.pow(2,-23))*Math.pow(2,e)},R.prototype.loadTranslate=function(){return new C(this.readSingle(),this.readSingle())},R.prototype.loadMatrix=function(){return new F(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},R.prototype.loadColor=function(){return new G(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},R.prototype.loadAlphaTransform=function(){return new b(this.readSingle())},R.prototype.loadColorTransform=function(){var a;return a=this.loadColor(),this.loadColor(),new H(a.red,a.green,a.blue,a.alpha)},R.prototype.loadTexture=function(){return new I.Texture(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle())},R.prototype.loadTextureFragment=function(){return new I.TextureFragment(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadBitmap=function(){return new I.Bitmap(this.readInt32(),this.readInt32())},R.prototype.loadBitmapEx=function(){return new I.BitmapEx(this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},R.prototype.loadFont=function(){return new I.Font(this.readInt32(),this.readInt32())},R.prototype.loadTextProperty=function(){return new I.TextProperty(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadText=function(){return new I.Text(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadParticleData=function(){return new I.ParticleData(this.readInt32())},R.prototype.loadParticle=function(){return new I.Particle(this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadProgramObject=function(){return new I.ProgramObject(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadGraphicObject=function(){return new I.GraphicObject(this.readInt32(),this.readInt32())},R.prototype.loadGraphic=function(){return new I.Graphic(this.readInt32(),this.readInt32())},R.prototype.loadObject=function(){return new I.LObject(this.readInt32(),this.readInt32())},R.prototype.loadAnimation=function(){return new I.Animation(this.readInt32(),this.readInt32())},R.prototype.loadButtonCondition=function(){return new I.ButtonCondition(this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadButton=function(){return new I.Button(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadLabel=function(){return new I.Label(this.readInt32(),this.readInt32())},R.prototype.loadInstanceName=function(){return new I.InstanceName(this.readInt32())},R.prototype.loadEvent=function(){return new I.Event(this.readInt32())},R.prototype.loadString=function(){return new I.String(this.readInt32(),this.readInt32())},R.prototype.loadPlace=function(){return new I.Place(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadControlMoveM=function(){return new I.ControlMoveM(this.readInt32(),this.readInt32())},R.prototype.loadControlMoveC=function(){return new I.ControlMoveC(this.readInt32(),this.readInt32())},R.prototype.loadControlMoveMC=function(){return new I.ControlMoveMC(this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadControl=function(){return new I.Control(this.readInt32(),this.readInt32())},R.prototype.loadFrame=function(){return new I.Frame(this.readInt32(),this.readInt32())},R.prototype.loadMovieClipEvent=function(){return new I.MovieClipEvent(this.readInt32(),this.readInt32())},R.prototype.loadMovie=function(){return new I.Movie(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},R.prototype.loadMovieLinkage=function(){return new I.MovieLinkage(this.readInt32(),this.readInt32())},R.prototype.loadItemArray=function(){return new I.ItemArray(this.readInt32(),this.readInt32())},R.prototype.loadHeader=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z;return y=this.readChar(),z=this.readChar(),A=this.readChar(),B=this.readChar(),q=this.readByte(),r=this.readByte(),s=this.readByte(),M=this.readByte(),Z=this.readInt32(),x=this.readInt32(),u=this.readInt32(),R=this.readInt32(),K=this.readInt32(),d=this.readInt32(),S=this.loadItemArray(),c=this.loadItemArray(),Y=this.loadItemArray(),F=this.loadItemArray(),i=this.loadItemArray(),a=this.loadItemArray(),j=this.loadItemArray(),L=this.loadItemArray(),W=this.loadItemArray(),X=this.loadItemArray(),e=this.loadItemArray(),f=this.loadItemArray(),p=this.loadItemArray(),V=this.loadItemArray(),U=this.loadItemArray(),O=this.loadItemArray(),N=this.loadItemArray(),Q=this.loadItemArray(),w=this.loadItemArray(),v=this.loadItemArray(),b=this.loadItemArray(),h=this.loadItemArray(),g=this.loadItemArray(),D=this.loadItemArray(),C=this.loadItemArray(),o=this.loadItemArray(),P=this.loadItemArray(),m=this.loadItemArray(),l=this.loadItemArray(),n=this.loadItemArray(),k=this.loadItemArray(),t=this.loadItemArray(),H=this.loadItemArray(),G=this.loadItemArray(),J=this.loadItemArray(),T=this.loadItemArray(),E=this.readInt32(),new I.Header(y,z,A,B,q,r,s,M,Z,x,u,R,K,d,S,c,Y,F,i,a,j,L,W,X,e,f,p,V,U,O,N,Q,w,v,b,h,g,D,C,o,P,m,l,n,k,t,H,G,J,T,E)},R.prototype.load=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,R,S,T,U,V,W,X,Y,Z;this.d=a,this.index=0,j=this.loadHeader(),h=new Q(j);if(!h.check())return null;w=this.readBytes(j.stringBytes.length),c=this.readBytes(j.animationBytes.length);var $,_,ab;ab=[],k=$=0;for(_=j.translate.length;0>_?$>_:$<_;k=0>_?--$:++$)ab.push(this.loadTranslate());h.translates=ab;var bb,cb,db;db=[],k=bb=0;for(cb=j.matrix.length;0>cb?bb>cb:bb<cb;k=0>cb?--bb:++bb)db.push(this.loadMatrix());h.matrices=db;var eb,fb,gb;gb=[],k=eb=0;for(fb=j.color.length;0>fb?eb>fb:eb<fb;k=0>fb?--eb:++eb)gb.push(this.loadColor());h.colors=gb;var hb,ib,jb;jb=[],k=hb=0;for(ib=j.alphaTransform.length;0>ib?hb>ib:hb<ib;k=0>ib?--hb:++hb)jb.push(this.loadAlphaTransform());h.alphaTransforms=jb;var kb,lb,mb;mb=[],k=kb=0;for(lb=j.colorTransform.length;0>lb?kb>lb:kb<lb;k=0>lb?--kb:++kb)mb.push(this.loadColorTransform());h.colorTransforms=mb;var nb,ob,pb;pb=[],k=nb=0;for(ob=j.objectData.length;0>ob?nb>ob:nb<ob;k=0>ob?--nb:++nb)pb.push(this.loadObject());h.objects=pb;var qb,rb,sb;sb=[],k=qb=0;for(rb=j.texture.length;0>rb?qb>rb:qb<rb;k=0>rb?--qb:++qb)sb.push(this.loadTexture());h.textures=sb;var tb,ub,vb;vb=[],k=tb=0;for(ub=j.textureFragment.length;0>ub?tb>ub:tb<ub;k=0>ub?--tb:++tb)vb.push(this.loadTextureFragment());h.textureFragments=vb;var wb,xb,yb;yb=[],k=wb=0;for(xb=j.bitmap.length;0>xb?wb>xb:wb<xb;k=0>xb?--wb:++wb)yb.push(this.loadBitmap());h.bitmaps=yb;var zb,Ab,Bb;Bb=[],k=zb=0;for(Ab=j.bitmapEx.length;0>Ab?zb>Ab:zb<Ab;k=0>Ab?--zb:++zb)Bb.push(this.loadBitmapEx());h.bitmapExs=Bb;var Cb,Db,Eb;Eb=[],k=Cb=0;for(Db=j.font.length;0>Db?Cb>Db:Cb<Db;k=0>Db?--Cb:++Cb)Eb.push(this.loadFont());h.fonts=Eb;var Fb,Gb,Hb;Hb=[],k=Fb=0;for(Gb=j.textProperty.length;0>Gb?Fb>Gb:Fb<Gb;k=0>Gb?--Fb:++Fb)Hb.push(this.loadTextProperty());h.textProperties=Hb;var Ib,Jb,Kb;Kb=[],k=Ib=0;for(Jb=j.text.length;0>Jb?Ib>Jb:Ib<Jb;k=0>Jb?--Ib:++Ib)Kb.push(this.loadText());h.texts=Kb;var Lb,Mb,Nb;Nb=[],k=Lb=0;for(Mb=j.particleData.length;0>Mb?Lb>Mb:Lb<Mb;k=0>Mb?--Lb:++Lb)Nb.push(this.loadParticleData());h.particleDatas=Nb;var Ob,Pb,Qb;Qb=[],k=Ob=0;for(Pb=j.particle.length;0>Pb?Ob>Pb:Ob<Pb;k=0>Pb?--Ob:++Ob)Qb.push(this.loadParticle());h.particles=Qb;var Rb,Sb,Tb;Tb=[],k=Rb=0;for(Sb=j.programObject.length;0>Sb?Rb>Sb:Rb<Sb;k=0>Sb?--Rb:++Rb)Tb.push(this.loadProgramObject());h.programObjects=Tb;var Ub,Vb,Wb;Wb=[],k=Ub=0;for(Vb=j.graphicObject.length;0>Vb?Ub>Vb:Ub<Vb;k=0>Vb?--Ub:++Ub)Wb.push(this.loadGraphicObject());h.graphicObjects=Wb;var Xb,Yb,Zb;Zb=[],k=Xb=0;for(Yb=j.graphic.length;0>Yb?Xb>Yb:Xb<Yb;k=0>Yb?--Xb:++Xb)Zb.push(this.loadGraphic());h.graphics=Zb;var $b,_b,ac;ac=[],k=$b=0;for(_b=j.animation.length;0>_b?$b>_b:$b<_b;k=0>_b?--$b:++$b)ac.push(this.loadAnimation());var bc,cc,dc;dc=[],k=bc=0;for(cc=j.buttonCondition.length;0>cc?bc>cc:bc<cc;k=0>cc?--bc:++bc)dc.push(this.loadButtonCondition());h.buttonConditions=dc;var ec,fc,gc;gc=[],k=ec=0;for(fc=j.button.length;0>fc?ec>fc:ec<fc;k=0>fc?--ec:++ec)gc.push(this.loadButton());h.buttons=gc;var hc,ic,jc;jc=[],k=hc=0;for(ic=j.label.length;0>ic?hc>ic:hc<ic;k=0>ic?--hc:++hc)jc.push(this.loadLabel());h.labels=jc;var kc,lc,mc;mc=[],k=kc=0;for(lc=j.instanceName.length;0>lc?kc>lc:kc<lc;k=0>lc?--kc:++kc)mc.push(this.loadInstanceName());h.instanceNames=mc;var nc,oc,pc;pc=[],k=nc=0;for(oc=j.eventData.length;0>oc?nc>oc:nc<oc;k=0>oc?--nc:++nc)pc.push(this.loadEvent());h.events=pc;var qc,rc,sc;sc=[],k=qc=0;for(rc=j.place.length;0>rc?qc>rc:qc<rc;k=0>rc?--qc:++qc)sc.push(this.loadPlace());h.places=sc;var tc,uc,vc;vc=[],k=tc=0;for(uc=j.controlMoveM.length;0>uc?tc>uc:tc<uc;k=0>uc?--tc:++tc)vc.push(this.loadControlMoveM());h.controlMoveMs=vc;var wc,xc,yc;yc=[],k=wc=0;for(xc=j.controlMoveC.length;0>xc?wc>xc:wc<xc;k=0>xc?--wc:++wc)yc.push(this.loadControlMoveC());h.controlMoveCs=yc;var zc,Ac,Bc;Bc=[],k=zc=0;for(Ac=j.controlMoveMC.length;0>Ac?zc>Ac:zc<Ac;k=0>Ac?--zc:++zc)Bc.push(this.loadControlMoveMC());h.controlMoveMCs=Bc;var Cc,Dc,Ec;Ec=[],k=Cc=0;for(Dc=j.control.length;0>Dc?Cc>Dc:Cc<Dc;k=0>Dc?--Cc:++Cc)Ec.push(this.loadControl());h.controls=Ec;var Fc,Gc,Hc;Hc=[],k=Fc=0;for(Gc=j.frame.length;0>Gc?Fc>Gc:Fc<Gc;k=0>Gc?--Fc:++Fc)Hc.push(this.loadFrame());h.frames=Hc;var Ic,Jc,Kc;Kc=[],k=Ic=0;for(Jc=j.movieClipEvent.length;0>Jc?Ic>Jc:Ic<Jc;k=0>Jc?--Ic:++Ic)Kc.push(this.loadMovieClipEvent());h.movieClipEvents=Kc;var Lc,Mc,Nc;Nc=[],k=Lc=0;for(Mc=j.movie.length;0>Mc?Lc>Mc:Lc<Mc;k=0>Mc?--Lc:++Lc)Nc.push(this.loadMovie());h.movies=Nc;var Oc,Pc,Qc;Qc=[],k=Oc=0;for(Pc=j.movieLinkage.length;0>Pc?Oc>Pc:Oc<Pc;k=0>Pc?--Oc:++Oc)Qc.push(this.loadMovieLinkage());h.movieLinkages=Qc;var Rc,Sc,Tc;Tc=[],k=Rc=0;for(Sc=j.stringData.length;0>Sc?Rc>Sc:Rc<Sc;k=0>Sc?--Rc:++Rc)Tc.push(this.loadString());h.animations=[],z=0;for(D=ac.length;z<D;z++)b=ac[z],s=b.animationOffset,h.animations.push(this.readAnimation(c.slice(s,s+b.animationLength)));h.strings=[],x=h.stringMap,A=0;for(E=Tc.length;A<E;A++){b=Tc[A],s=b.stringOffset,u=w.slice(s,s+b.stringLength),v="";for(k=0;k<u.length;)d=u.charCodeAt(k),128>d?(v+=String.fromCharCode(d),++k):191<d&&224>d?(e=u.charCodeAt(k+1),v+=String.fromCharCode((d&31)<<6|e&63),k+=2):(e=u.charCodeAt(k+1),f=u.charCodeAt(k+2),g=(d&15)<<12|(e&63)<<6|f&63,v+=String.fromCharCode(g),k+=3);x[v]=h.strings.length,h.strings.push(v)}l=h.instanceNameMap,k=B=0;for(P=h.instanceNames.length;0>P?B>P:B<P;k=0>P?--B:++B)l[h.instanceNames[k].stringId]=k;i=h.eventMap,k=C=0;for(R=h.events.length;0>R?C>R:C<R;k=0>R?--C:++C)i[h.events[k].stringId]=k;q=h.movieLinkageMap,k=J=0;for(S=h.movieLinkages.length;0>S?J>S:J<S;k=0>S?--J:++J)q[h.movieLinkages[k].stringId]=k;r=h.movieLinkageNameMap,k=K=0;for(T=h.movieLinkages.length;0>T?K>T:K<T;k=0>T?--K:++K)r[h.movieLinkages[k].movieId]=h.movieLinkages[k].stringId;t=h.programObjectMap,k=L=0;for(U=h.programObjects.length;0>U?L>U:L<U;k=0>U?--L:++L)t[h.programObjects[k].stringId]=k;n=h.labelMap,V=h.movies,M=0;for(F=V.length;M<F;M++){o=V[M],s=o.labelOffset,p={},W=h.labels.slice(s,s+o.labels),N=0;for(G=W.length;N<G;N++)m=W[N],p[m.stringId]=m.frameNo;n.push(p)}X=h.textures,O=0;for(H=X.length;O<H;O++)y=X[O],y.setFilename(h);Y=h.textureFragments,Z=0;for(I=Y.length;Z<I;Z++)y=Y[Z],y.setFilename(h);return h},R.prototype.readByteFromBytes=function(a,b){var c;return c=a.charCodeAt(b++)&255,[b,c]},R.prototype.readInt32FromBytes=function(a,b){var c,d,e,f;return c=this.readByteFromBytes(a,b),b=c[0],c=c[1],d=this.readByteFromBytes(a,b),b=d[0],d=d[1],e=this.readByteFromBytes(a,b),b=e[0],e=e[1],f=this.readByteFromBytes(a,b),b=f[0],[b,(c<<0)+(d<<8)+(e<<16)+(f[1]<<24)]},R.prototype.readAnimation=function(a){var b,c,d,e,f;b=[];for(d=0;;)switch(c=this.readByteFromBytes(a,d),d=c[0],c=c[1],b.push(c),c){case P.GOTOFRAME:case P.GOTOLABEL:case P.EVENT:case P.CALL:c=this.readInt32FromBytes(a,d),d=c[0],c=c[1],b.push(c);break;case P.SETTARGET:c=this.readInt32FromBytes(a,d),d=c[0],c=c[1],b.push(c);for(f=0;0>c?f>c:f<c;0>c?--f:++f)e=this.readInt32FromBytes(a,d),d=e[0],e=e[1],b.push(e);break;case P.END:return b}};var S=function(){return S.__super__.constructor.apply(this,arguments)};l(S,R),S.prototype.readByte=function(){return this.d[this.index++]},S.prototype.readBytes=function(a){var b,c;b="";for(c=0;0>a?c>a:c<a;0>a?--c:++c)b+=String.fromCharCode(this.d[this.index++]);return b},v=S;var T=function(){this.int32Array=new Int32Array,this.float32Array=new Float32Array};l(T,R),T.prototype.readByte=function(){return this.d[this.index++]},T.prototype.readBytes=function(a){var b,c;b="";for(c=0;0>a?c>a:c<a;0>a?--c:++c)b+=String.fromCharCode(this.d[this.index++]);return b},T.prototype.readInt32=function(){var a;return a=this.dInt32[this.index/4],this.index+=4,a},T.prototype.readSingle=function(){var a;return a=this.dFloat32[this.index/4],this.index+=4,a},T.prototype.load=function(a){return this.d=new Uint8Array(a),this.dInt32=new Int32Array(a),this.dFloat32=new Float32Array(a),T.__super__.load.call(this,this.d)};var U=function(){};U.load=function(a){var b;if(null!=a&&"string"==typeof a)return b=new R,b.load(a)},U.loadArray=function(a){var b;if(null!=a)return b=new v,b.load(a)},U.loadArrayBuffer=function(a){var b;if(null!=a)return b=new T,b.load(a)};var V=function(){};V.calcMatrixToPoint=function(a,b,c){return[c.scaleX*a+c.skew0*b+c.translateX,c.skew1*a+c.scaleY*b+c.translateY]},V.getMatrixDeterminant=function(a){return 0>a.scaleX*a.scaleY-a.skew0*a.skew1},V.syncMatrix=function(a){var b,c,d,e;c=null!=(e=a.matrixId)?e:0,0===(c&p.MATRIX_FLAG)?(b=a.lwf.data.translates[c],e=c=1,d=0,b={scaleX:c,scaleY:e,skew0:0,skew1:0,translateX:b.translateX,translateY:b.translateY}):(c&=~p.MATRIX_FLAG,b=a.lwf.data.matrices[c],d=this.getMatrixDeterminant(b),c=Math.sqrt(b.scaleX*b.scaleX+b.skew1*b.skew1),d&&(c=-c),e=Math.sqrt(b.scaleY*b.scaleY+b.skew0*b.skew0),d=d?Math.atan2(b.skew1,-b.scaleX):Math.atan2(b.skew1,b.scaleX),d=180*(d/Math.PI)),a.property.setMatrix(b,c,e,d)},V.getX=function(a){var b,c;return b=null!=(c=a.matrixId)?c:0,0===(b&p.MATRIX_FLAG)?(a=a.lwf.data.translates[b],a.translateX):(b&=~p.MATRIX_FLAG,a.lwf.data.matrices[b].translateX)},V.getY=function(a){var b,c;return b=null!=(c=a.matrixId)?c:0,0===(b&p.MATRIX_FLAG)?(a=a.lwf.data.translates[b],a.translateY):(b&=~p.MATRIX_FLAG,a.lwf.data.matrices[b].translateY)},V.getScaleX=function(a){var b,c;return b=null!=(c=a.matrixId)?c:0,0===(b&p.MATRIX_FLAG)?1:(b&=~p.MATRIX_FLAG,b=a.lwf.data.matrices[b],a=this.getMatrixDeterminant(b),b=Math.sqrt(b.scaleX*b.scaleX+b.skew1*b.skew1),a&&(b=-b),b)},V.getScaleY=function(a){var b,c;return b=null!=(c=a.matrixId)?c:0,0===(b&p.MATRIX_FLAG)?1:(b&=~p.MATRIX_FLAG,a=a.lwf.data.matrices[b],Math.sqrt(a.scaleY*a.scaleY+a.skew0*a.skew0))},V.getRotation=function(a){var b,c;return b=null!=(c=a.matrixId)?c:0,0===(b&p.MATRIX_FLAG)?0:(b&=~p.MATRIX_FLAG,a=a.lwf.data.matrices[b],a=this.getMatrixDeterminant(a)?Math.atan2(a.skew1,-a.scaleX):Math.atan2(a.skew1,a.scaleX),a=180*(a/Math.PI))},V.syncColorTransform=function(a){var b,c;b=null!=(c=a.colorTransformId)?c:0,0===(b&p.COLORTRANSFORM_FLAG)?(b=a.lwf.data.alphaTransforms[b],b={multi:{red:1,green:1,blue:1,alpha:b.alpha}}):(b&=~p.COLORTRANSFORM_FLAG,b=a.lwf.data.colorTransforms[b]),a.property.setColorTransform(b)},V.getAlpha=function(a){var b,c;return b=null!=(c=a.colorTransformId)?c:0,0===(b&p.COLORTRANSFORM_FLAG)?(a=a.lwf.data.alphaTransforms[b],a.alpha):(b&=~p.COLORTRANSFORM_FLAG,a.lwf.data.colorTransforms[b].alpha)},V.calcMatrixId=function(a,b,c,d){return 0===d?b.set(c):0===(d&p.MATRIX_FLAG)?(a=a.data.translates[d],b.scaleX=c.scaleX,b.skew0=c.skew0,b.translateX=c.scaleX*a.translateX+c.skew0*a.translateY+c.translateX,b.skew1=c.skew1,b.scaleY=c.scaleY,b.translateY=c.skew1*a.translateX+c.scaleY*a.translateY+c.translateY):(d&=~p.MATRIX_FLAG,a=a.data.matrices[d],this.calcMatrix(b,c,a)),b},V.calcMatrix=function(a,b,c){return a.scaleX=b.scaleX*c.scaleX+b.skew0*c.skew1,a.skew0=b.scaleX*c.skew0+b.skew0*c.scaleY,a.translateX=b.scaleX*c.translateX+b.skew0*c.translateY+b.translateX,a.skew1=b.skew1*c.scaleX+b.scaleY*c.skew1,a.scaleY=b.skew1*c.skew0+b.scaleY*c.scaleY,a.translateY=b.skew1*c.translateX+b.scaleY*c.translateY+b.translateY,a},V.rotateMatrix=function(a,b,c,d,e){return d*=c,e*=c,a.scaleX=-b.skew0*c,a.skew0=b.scaleX*c,a.translateX=b.scaleX*d+b.skew0*e+b.translateX,a.skew1=-b.scaleY*c,a.scaleY=b.skew1*c,a.translateY=b.skew1*d+b.scaleY*e+b.translateY,a},V.scaleMatrix=function(a,b,c,d,e){return d*=c,e*=c,a.scaleX=b.scaleX*c,a.skew0=b.skew0*c,a.translateX=b.scaleX*d+b.skew0*e+b.translateX,a.skew1=b.skew1*c,a.scaleY=b.scaleY*c,a.translateY=b.skew1*d+b.scaleY*e+b.translateY,a},V.fitForHeight=function(a,b,c){c/=a.height,a.scaleByStage=c,a.property.scale(c,c),a.property.move((b-a.width*c)/2,0)},V.fitForWidth=function(a,b,c){b/=a.width,a.scaleByStage=b,a.property.scale(b,b),a.property.move(0,(c-a.height*b)/2,0)},V.scaleForHeight=function(a,b){var c;c=b/a.height,a.scaleByStage=c,a.property.scale(c,c)},V.scaleForWidth=function(a,b){var c;c=b/a.width,a.scaleByStage=c,a.property.scale(c,c)},V.copyMatrix=function(a,b){return null!==b?a.set(b):a.clear(),a},V.invertMatrix=function(a,b){var c;c=b.scaleX*b.scaleY-b.skew0*b.skew1,0!==c?(a.scaleX=b.scaleY/c,a.skew0=-b.skew0/c,a.translateX=(b.skew0*b.translateY-b.translateX*b.scaleY)/c,a.skew1=-b.skew1/c,a.scaleY=b.scaleX/c,a.translateY=(b.translateX*b.skew1-b.scaleX*b.translateY)/c):a.clear()},V.calcColorTransformId=function(a,b,c,d){return 0===d?b.set(c):0===(d&p.COLORTRANSFORM_FLAG)?(a=a.data.alphaTransforms[d],b.multi.red=c.multi.red,b.multi.green=c.multi.green,b.multi.blue=c.multi.blue,b.multi.alpha=c.multi.alpha*a.alpha):(d&=~p.COLORTRANSFORM_FLAG,a=a.data.colorTransforms[d],this.calcColorTransform(b,c,a)),b},V.calcColorTransform=function(a,b,c){return a.multi.red=b.multi.red*c.multi.red,a.multi.green=b.multi.green*c.multi.green,a.multi.blue=b.multi.blue*c.multi.blue,a.multi.alpha=b.multi.alpha*c.multi.alpha,a},V.copyColorTransform=function(a,b){return null!==b?a.set(b):a.clear(),a},V.calcColor=function(a,b,c){a.red=b.red*c.multi.red,a.green=b.green*c.multi.green,a.blue=b.blue*c.multi.blue,a.alpha=b.alpha*c.multi.alpha},V.newIntArray=function(){return[]},V.insertIntArray=function(a,b){var c;0===a.length||b>a[a.length-1]?a.push(b):(c=this.locationOfIntArray(a,b,0,a.length-1),a[c]!==b&&a.splice(c,0,b))},V.deleteIntArray=function(a,b){var c;c=this.locationOfIntArray(a,b,0,a.length-1),a[c]===b&&a.splice(c,1)},V.locationOfIntArray=function(a,b,c,d){for(var e;c<=d;)if(e=(c+d)/2>>0,b>a[e])c=e+1;else{if(b>=a[e])return e;d=e-1}return c};var W=function(){};W.prototype.constructBitmap=function(){return null},W.prototype.constructBitmapEx=function(){return null},W.prototype.constructText=function(){return null},W.prototype.constructParticle=function(){return null},W.prototype.init=function(){},W.prototype.beginRender=function(){},W.prototype.endRender=function(){},W.prototype.destruct=function(){},t=function(a,b,c,d){this.lwf=a,this.parent=b,this.type=c,this.objectId=d,this.colorTransformId=this.matrixId=null,this.colorTransformIdChanged=this.matrixIdChanged=!0,this.matrix=new F(0,0,0,0,0,0),this.colorTransform=new H(0,0,0,0),this.execCount=0,this.updated=!1,this.isButton=this.type===D.BUTTON,this.isMovie=this.type===D.MOVIE||this.type===D.ATTACHEDMOVIE,this.isParticle=this.type===D.PARTICLE,this.isProgramObject=this.type===D.PROGRAMOBJECT,this.isText=this.type===D.TEXT},t.prototype.exec=function(a,b){null==a&&(a=0),null==b&&(b=0),this.matrixId!==a&&(this.matrixIdChanged=!0,this.matrixId=a),this.colorTransformId!==b&&(this.colorTransformIdChanged=!0,this.colorTransformId=b)},t.prototype.update=function(a,b){this.updated=!0,null!==a&&(V.calcMatrixId(this.lwf,this.matrix,a,this.dataMatrixId),this.matrixIdChanged=!1),null!==b&&(V.copyColorTransform(this.colorTransform,b),this.colorTransformIdChanged=!1),this.lwf.renderObject()},t.prototype.render=function(a,b){var c,d,e;null!=this.renderer&&(d=this.lwf.renderingIndex,e=this.lwf.renderingIndexOffsetted,c=this.lwf.renderingCount,b!==Number.MIN_VALUE&&(d=e-b+c),this.renderer.render(this.matrix,this.colorTransform,d,c,a)),this.lwf.renderObject()},t.prototype.inspect=function(a,b,c,d){var e,f,g;f=this.lwf.renderingIndex,g=this.lwf.renderingIndexOffsetted,e=this.lwf.renderingCount,d!==Number.MIN_VALUE&&(f=g+d+e),a(this,b,c,f),this.lwf.renderObject()},t.prototype.destroy=function(){this.renderer&&(this.renderer.destruct(),this.renderer=null),this.lwf=this.parent=null};var X=function(a,b,e){var f,g,h,i,j,k,l;X.__super__.constructor.call(this,a,b,D.GRAPHIC,e),e=a.data.graphics[e],j=e.graphicObjects,this.displayList=[],h=a.data.graphicObjects;for(i=
l=0;0>j?l>j:l<j;i=0>j?--l:++l)if(f=h[e.graphicObjectId+i],g=f.graphicObjectId,-1!==g){switch(f.graphicObjectType){case r.BITMAP:k=new c(a,b,g);break;case r.BITMAPEX:k=new d(a,b,g);break;case r.TEXT:k=new B(a,b,g)}k.exec(),this.displayList[i]=k}};l(X,t),X.prototype.update=function(a,b){var c,d,e,f;f=this.displayList,d=0;for(e=f.length;d<e;d++)c=f[d],c.update(a,b)},X.prototype.render=function(a,b){var c,d,e,f;if(a){f=this.displayList,d=0;for(e=f.length;d<e;d++)c=f[d],c.render(a,b)}},X.prototype.destroy=function(){var a,b,c,d;d=this.displayList,b=0;for(c=d.length;b<c;b++)a=d[b],a.destroy();this.displayList=null},s=X;var Y=function(a,b,c){Y.__super__.constructor.call(this,a,b,D.BITMAP,c),this.dataMatrixId=a.data.bitmaps[c].matrixId,this.renderer=a.rendererFactory.constructBitmap(a,c,this)};l(Y,t),c=Y;var Z=function(a,b,c){Z.__super__.constructor.call(this,a,b,D.BITMAPEX,c),this.dataMatrixId=a.data.bitmapExs[c].matrixId,this.renderer=a.rendererFactory.constructBitmapEx(a,c,this)};l(Z,t),d=Z;var $=function(a,b,c){$.__super__.constructor.call(this,a,b,D.TEXT,c),this.dataMatrixId=a.data.texts[c].matrixId,this.renderer=a.rendererFactory.constructText(a,c,this)};l($,t),B=$;var _=function(a,b,c){_.__super__.constructor.call(this,a,b,D.PARTICLE,c),this.dataMatrixId=a.data.particles[c].matrixId,this.renderer=a.rendererFactory.constructParticle(a,c,this)};l(_,t),_.prototype.update=function(a,b){_.__super__.update.call(this,a,b),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},y=_;var ab=function(a,b,c){ab.__super__.constructor.call(this,a,b,D.PROGRAMOBJECT,c),b=a.data.programObjects[c],this.dataMatrixId=b.matrixId,a=a.getProgramObjectConstructor(c),null!=a&&(this.renderer=a(this,c,b.width,b.height))};l(ab,t),ab.prototype.update=function(a,b){ab.__super__.update.call(this,a,b),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},A=ab;var bb=function(a,b,c,d,e){bb.__super__.constructor.call(this,a,b,c,d),this.linkInstance=this.nextInstance=this.prevInstance=null,this.instanceId=e<a.data.instanceNames.length?e:-1,0<=this.instanceId&&(c=a.getInstanceNameStringId(this.instanceId),-1!==c&&(this.name=a.data.strings[c],null!=b&&(b[this.name]=this)),a=this.lwf.getInstance(this.instanceId),null!=a&&(a.prevInstance=this),this.nextInstance=a,this.lwf.setInstance(this.instanceId,this))};l(bb,t),bb.prototype.destroy=function(){var a;return this.type!==D.ATTACHEDMOVIE&&0<=this.instanceId&&(a=this.lwf.getInstance(this.instanceId),a===this&&this.lwf.setInstance(this.instanceId,this.nextInstance),null!=this.nextInstance&&(this.nextInstance.prevInstance=this.prevInstance),null!=this.prevInstance&&(this.prevInstance.nextInstance=this.nextInstance)),null!=this.name&&"undefined"!=typeof parent&&null!==parent&&delete parent[this.name],this.linkInstance=this.nextInstance=this.prevInstance=null,bb.__super__.destroy.apply(this,arguments)},bb.prototype.linkButton=function(){},bb.prototype.getFullName=function(){var a,b,c;c=a="";for(b=this;null!=b;){if(null==b.name)return null;a=b.name+c+a,c=".",b=b.parent}return a},t=bb;var cb=function(a,b,c,d,e,f){null==e&&(e=null),null==f&&(f=null),cb.__super__.constructor.call(this,a,b,D.BUTTON,c,d),this.matrixId=e,this.colorTransformId=f,this.invert=new F,this.hitY=this.hitX=Number.MIN_VALUE,0>c?this.height=this.width=0:(this.data=a.data.buttons[c],this.dataMatrixId=this.data.matrixId,this.width=this.data.width,this.height=this.data.height),this.handler=a.getButtonEventHandlers(this),null!=this.handler&&this.handler.call("load",this)};l(cb,t),cb.prototype.setHandlers=function(a){null!=this.handler?this.handler.concat(a):this.handler=a},cb.prototype.exec=function(a,b){null==a&&(a=0),null==b&&(b=0),cb.__super__.exec.call(this,a,b),this.enterFrame()},cb.prototype.update=function(a,b){cb.__super__.update.call(this,a,b),null!=this.handler&&this.handler.call("update",this)},cb.prototype.render=function(){null!=this.handler&&this.handler.call("render",this)},cb.prototype.destroy=function(){this.lwf.clearFocus(this),this.lwf.clearPressed(this),null!=this.handler&&this.handler.call("unload",this),cb.__super__.destroy.apply(this,arguments)},cb.prototype.linkButton=function(){this.buttonLink=this.lwf.buttonHead,this.lwf.buttonHead=this},cb.prototype.checkHit=function(a,b){var c,d;return V.invertMatrix(this.invert,this.matrix),d=V.calcMatrixToPoint(a,b,this.invert),c=d[0],d=d[1],0<=c&&c<this.data.width&&0<=d&&d<this.data.height?(this.hitX=c,this.hitY=d,!0):(this.hitY=this.hitX=Number.MIN_VALUE,!1)},cb.prototype.enterFrame=function(){null!=this.handler&&this.handler.call("enterFrame",this)},cb.prototype.rollOver=function(){null!=this.handler&&this.handler.call("rollOver",this),this.playAnimation(o.ROLLOVER)},cb.prototype.rollOut=function(){null!=this.handler&&this.handler.call("rollOut",this),this.playAnimation(o.ROLLOUT)},cb.prototype.press=function(){null!=this.handler&&this.handler.call("press",this),this.playAnimation(o.PRESS)},cb.prototype.release=function(){null!=this.handler&&this.handler.call("release",this),this.playAnimation(o.RELEASE)},cb.prototype.keyPress=function(a){null!=this.handler&&this.handler.call("keyPress",this),this.playAnimation(o.KEYPRESS,a)},cb.prototype.playAnimation=function(a,b){var c,d,e,f;null==b&&(b=0),d=this.lwf.data.buttonConditions,c=e=0;for(f=this.data.conditions;0>f?e>f:e<f;c=0>f?--e:++e)c=d[this.data.conditionId+c],0!==(c.condition&a)&&(a!==o.KEYPRESS||c.keyCode===b)&&this.lwf.playAnimation(c.animationId,this.parent,this)},cb.prototype.addEventHandler=function(a,b){switch(a){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":this.lwf.interactive=!0,null==this.handler&&this.setHandlers(new f),this.handler.addHandler(a,b)}},cb.prototype.removeEventHandler=function(a,b){switch(a){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.removeHandler(a,b)}},cb.prototype.clearEventHandler=function(a){null==a&&(a=null);switch(a){case null:null!=this.handler&&this.handler.clear();break;case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.clear(a)}},cb.prototype.setEventHandler=function(a,b){this.clearEventHandler(a),this.addEventHandler(a,b)},e=cb;var db=function(a,b){this.parent=a,this.child=b,this.lwf=this.parent.lwf};l(db,e),db.prototype.checkHit=function(a,b){return null!==this.child.inputPoint(a,b)?!0:!1},db.prototype.rollOver=function(){},db.prototype.rollOut=function(){null!=this.child.focus&&(this.child.focus.rollOut(),this.child.clearFocus(this.child.focus))},db.prototype.press=function(){this.child.inputPress()},db.prototype.release=function(){this.child.inputRelease()},db.prototype.keyPress=function(a){this.child.inputKeyPress(a)};var eb=function(a){this.lwf=a,this.matrix=new F,this.colorTransform=new H,this.scaleY=this.scaleX=1,this.rotation=0,this.hasColorTransform=this.hasMatrix=!1,this.clearRenderingOffset()};eb.prototype.clear=function(){this.scaleY=this.scaleX=1,this.rotation=0,this.matrix.clear(),this.colorTransform.clear(),(this.hasMatrix||this.hasColorTransform)&&this.lwf.setPropertyDirty(),this.hasColorTransform=this.hasMatrix=!1,this.clearRenderingOffset()},eb.prototype.move=function(a,b){this.matrix.translateX+=a,this.matrix.translateY+=b,this.hasMatrix=!0,this.lwf.setPropertyDirty()},eb.prototype.moveTo=function(a,b){this.matrix.translateX=a,this.matrix.translateY=b,this.hasMatrix=!0,this.lwf.setPropertyDirty()},eb.prototype.rotate=function(a){this.rotateTo(this.rotation+a)},eb.prototype.rotateTo=function(a){this.rotation=a,this.setScaleAndRotation()},eb.prototype.scale=function(a,b){this.scaleX*=a,this.scaleY*=b,this.setScaleAndRotation()},eb.prototype.scaleTo=function(a,b){this.scaleX=a,this.scaleY=b,this.setScaleAndRotation()},eb.prototype.setScaleAndRotation=function(){var a,b;b=this.rotation*Math.PI/180,0===b?(a=1,b=0):(a=Math.cos(b),b=Math.sin(b)),this.matrix.scaleX=this.scaleX*a,this.matrix.skew0=this.scaleY*-b,this.matrix.skew1=this.scaleX*b,this.matrix.scaleY=this.scaleY*a,this.hasMatrix=!0,this.lwf.setPropertyDirty()},eb.prototype.setMatrix=function(a,b,c,d){this.scaleX=null!=b?b:1,this.scaleY=null!=c?c:1,this.rotation=null!=d?d:0,this.matrix.set(a),this.hasMatrix=!0,this.lwf.setPropertyDirty()},eb.prototype.setAlpha=function(a){this.colorTransform.multi.alpha=a,this.hasColorTransform=!0,this.lwf.setPropertyDirty()},eb.prototype.setColorTransform=function(a){this.colorTransform.set(a),this.hasColorTransform=!0,this.lwf.setPropertyDirty()},eb.prototype.setRenderingOffset=function(a){this.renderingOffset=a,this.hasRenderingOffset=!0},eb.prototype.clearRenderingOffset=function(){this.renderingOffset=Number.MIN_VALUE,this.hasRenderingOffset=!1};var fb=function(a,b,c,d,e,f,h,i){var j;null==e&&(e=null),null==f&&(f=null),null==h&&(h=!1),null==i&&(i=null),fb.__super__.constructor.call(this,a,b,h?D.ATTACHEDMOVIE:D.MOVIE,c,d),this.matrixId=e,this.colorTransformId=f,this.data=a.data.movies[c],this.totalFrames=this.data.frames,this.instanceTail=this.instanceHead=null,this.lastControls=this.lastControlOffset=this.animationPlayedFrame=this.execedFrame=this.currentFrameInternal=-1,this.lastHasButton=!1,this.lastControlAnimationOffset=-1,this.postLoaded=this.skipped=!1,this.playing=this.visible=this.active=!0,this.attachMoviePostExeced=this.attachMovieExeced=this.overriding=this.jumped=!1,this.postExecCount=this.movieExecCount=-1,this.eventHandlers={},this.property=new eb(a),"undefined"!=typeof this.__defineGetter__?(this.__defineGetter__("x",function(){return this.getX()}),this.__defineSetter__("x",function(a){return this.setX(a)}),this.__defineGetter__("y",function(){return this.getY()}),this.__defineSetter__("y",function(a){return this.setY(a)}),this.__defineGetter__("scaleX",function(){return this.getScaleX()}),this.__defineSetter__("scaleX",function(a){return this.setScaleX(a)}),this.__defineGetter__("scaleY",function(){return this.getScaleY()}),this.__defineSetter__("scaleY",function(a){return this.setScaleY(a)}),this.__defineGetter__("rotation",function(){return this.getRotation()}),this.__defineSetter__("rotation",function(a){return this.setRotation(a)}),this.__defineGetter__("alpha",function(){return this.getAlphaProperty()}),this.__defineSetter__("alpha",function(a){return this.setAlphaProperty(a)}),this.__defineGetter__("currentFrame",function(){return this.currentFrameInternal+1})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(this,"x",{get:function(){return this.getX()},set:function(a){return this.setX(a)}}),Object.defineProperty(this,"y",{get:function(){return this.getY()},set:function(a){return this.setY(a)}}),Object.defineProperty(this,"scaleX",{get:function(){return this.getScaleX()},set:function(a){return this.setScaleX(a)}}),Object.defineProperty(this,"scaleY",{get:function(){return this.getScaleY()},set:function(a){return this.setScaleY(a)}}),Object.defineProperty(this,"rotation",{get:function(){return this.getRotation()},set:function(a){return this.setRotation(a)}}),Object.defineProperty(this,"alpha",{get:function(){return this.getAlphaProperty()},set:function(a){return this.setAlphaProperty(a)}}),Object.defineProperty(this,"currentFrame",{get:function(){return this.currentFrameInternal+1}})),this.matrix0=new F,this.matrix1=new F,this.colorTransform0=new H,this.colorTransform1=new H,this.blendMode="normal",this.displayList=[],this.depth=this.attachName=null,this.hasButton=!1,this.getMovieFunctions(),c===this.lwf.data.header.rootMovieId&&(b=null!=(j=this.lwf.functions)?j.init:void 0,null!=b&&b.call(this)),null!=this.loadFunc&&this.loadFunc.call(this),this.playAnimation(g.LOAD),this.handler=null!=i?i:a.getMovieEventHandlers(this),null!=this.handler&&this.handler.call("load",this),a.execMovieCommand()};l(fb,t),fb.prototype.getMovieFunctions=function(){var a;a=this.lwf.getMovieFunctions(this.objectId),this.loadFunc=a[0],this.postLoadFunc=a[1],this.unloadFunc=a[2],this.enterFrameFunc=a[3]},fb.prototype.setHandlers=function(a){null!=this.handler?this.handler.concat(a):this.handler=a},fb.prototype.play=function(){return this.playing=!0,this},fb.prototype.stop=function(){return this.playing=!1,this},fb.prototype.nextFrame=function(){return this.jumped=!0,this.stop(),++this.currentFrameInternal,this},fb.prototype.prevFrame=function(){return this.jumped=!0,this.stop(),--this.currentFrameInternal,this},fb.prototype.gotoFrame=function(a){return this.gotoFrameInternal(a-1)},fb.prototype.gotoFrameInternal=function(a){return this.jumped=!0,this.stop(),this.currentFrameInternal=a,this},fb.prototype.setVisible=function(a){return this.visible=a,this},fb.prototype.globalToLocal=function(a){var b;return b=new F,V.invertMatrix(b,this.matrix),a=V.calcMatrixToPoint(a.x,a.y,b),new z(a[0],a[1])},fb.prototype.localToGlobal=function(a){return a=V.calcMatrixToPoint(a.x,a.y,this.matrix),new z(a[0],a[1])},fb.prototype.getDepth=function(a){return 0===a.length?0:a[a.length-1]+1},fb.prototype.reorderList=function(a,b,c,d,e,f){var g;V.insertIntArray(b,d),c[d]=e;if(a){a=0,d={};for(g in c)e=c[g],f(e,a),b[a]=a,d[a]=e,++a;c=d}return c},fb.prototype.deleteAttachedMovie=function(a,b,c,d){var e,f;null==c&&(c=!0),null==d&&(d=!0),e=b.attachName,f=b.depth,delete a.attachedMovies[e],delete a.attachedMovieList[f],V.deleteIntArray(a.attachedMovieListKeys,f),d&&delete a.detachedMovies[e],delete a[e];if(c)return b.destroy()},fb.prototype.attachMovie=function(a,b,c){var d,e,f,g,h,i,j,k,l;null==c&&(c=null);if(a instanceof u)return attachLWF(a,b,c);null==c&&(c={}),d=c.depth,j=null!=(e=c.reorder)?e:!1,f=c.load,i=c.postLoad,k=c.unload,e=c.enterFrame,l=c.update,c=c.render;if(a instanceof fb&&a.lwf===this.lwf)g=a,this.deleteAttachedMovie(g.parent,g,!1);else{if("string"!=typeof a)return null;if(h=this.lwf.searchMovieLinkage(this.lwf.getStringId(a)),-1===h)return null}return null==this.attachedMovies&&(this.attachedMovies={},this.detachedMovies={},this.attachedMovieList={},this.attachedMovieListKeys=V.newIntArray()),a=this.attachedMovies[b],null!=a&&this.deleteAttachedMovie(this,a),j||(a=this.attachedMovieList[d],null!=a&&this.deleteAttachedMovie(this,a)),a=new x(f,i,k,e,l,c),null!=g?g.setHandlers(handler):(g=new fb(this.lwf,this,h,-1,0,0,!0,a),this.attachMovieExeced&&g.exec(),this.attachMoviePostExeced&&g.postExec(!0)),g.attachName=b,null==d&&(d=this.getDepth(this.attachedMovieListKeys)),g.depth=d,g.name=b,this.attachedMovies[b]=g,this.attachedMovieList=this.reorderList(j,this.attachedMovieListKeys,this.attachedMovieList,g.depth,g,function(a,b){return a.depth=b}),this[b]=g},fb.prototype.swapAttachedMovieDepth=function(a,b){var c,d;null==this.attachedMovies||a===b||(c=this.attachedMovieList[a],d=this.attachedMovieList[b],null!=c?(c.depth=b,this.attachedMovieList[b]=c,V.insertIntArray(this.attachedMovieListKeys,b)):(delete this.attachedMovieList[b],V.deleteIntArray(this.attachedMovieListKeys,b)),null!=d?(d.depth=a,this.attachedMovieList[a]=d,V.insertIntArray(this.attachedMovieListKeys,a)):(delete this.attachedMovieList[a],V.deleteIntArray(this.attachedMovieListKeys,a)))},fb.prototype.getAttachedMovie=function(a){if(null==this.attachedMovies)return null;switch(typeof a){case"string":return this.attachedMovies[a];case"number":return this.attachedMovieList[a]}},fb.prototype.searchAttachedMovie=function(a,b){var c,d;null==b&&(b=!0),c=this.getAttachedMovie(a);if(null!=c)return c;if(!b)return null;for(d=this.instanceHead;null!==d;){if(d.isMovie&&(c=d.searchAttachedMovie(a,b),null!==c))return c;d=d.linkInstance}return null},fb.prototype.detachMovie=function(a){var b;if(null!=this.detachedMovies)switch(typeof a){case"string":this.detachedMovies[a]=!0;break;case"number":a=null!=(b=this.attachedMovieList)?b[a]:void 0,null!=(null!=a?a.attachName:void 0)&&(this.detachedMovies[a.attachName]=!0);break;case typeof fb:null!=(null!=a?a.attachName:void 0)&&(this.detachedMovies[a.attachName]=!0)}},fb.prototype.detachFromParent=function(){this.type===D.ATTACHEDMOVIE&&(this.active=!1,null!=this.parent&&this.parent.detachMovie(this))},fb.prototype.removeMovieClip=function(){null!=this.attachName?null!=this.parent&&this.parent.detachMovie(this):null!=this.lwf.attachName&&null!=this.parent&&this.parent.detachLWF(this)},fb.prototype.execDetachHandler=function(a){a=a.child,null!=a.detachHandler?a.detachHandler(a)&&a.destroy():a.destroy(),a.parent=null,a.detachHandler=null,a.attachName=null},fb.prototype.deleteAttachedLWF=function(a,b,c,d){var e,f;null==c&&(c=!0),null==d&&(d=!0),e=b.child.attachName,f=b.child.depth,delete a.attachedLWFs[e],delete a.attachedLWFList[f],V.deleteIntArray(a.attachedLWFListKeys,f),d&&delete a.detachedLWFs[e],delete a[e];if(c)return this.execDetachHandler(b)},fb.prototype.attachLWF=function(a,b,c){var d,e,f;null==c&&(c=null),null==c&&(c={}),d=c.depth,f=null!=(e=c.reorder)?e:!1,c=c.detach,null==this.attachedLWFs&&(this.attachedLWFs={},this.detachedLWFs={},this.attachedLWFList={},this.attachedLWFListKeys=V.newIntArray()),null!=a.parent&&(e=a.parent.attachedLWFs[a.attachName],this.deleteAttachedLWF(a.parent,e,!1)),e=this.attachedLWFs[b],null!=e&&this.deleteAttachedLWF(this,e),f||(e=this.attachedLWFList[d],null!=e&&this.deleteAttachedLWF(this,e)),e=new db(this,a),a.interactive&&(this.lwf.interactive=!0),a.parent=this,a.rootMovie.parent=this,a.detachHandler=c,a.attachName=b,null==d&&(d=this.getDepth(this.attachedLWFListKeys)),a.depth=d,this.attachedLWFs[b]=e,this.attachedLWFList=this.reorderList(f,this.attachedLWFListKeys,this.attachedLWFList,a.depth,e,function(a,b){return a.child.depth=b}),this[b]=a.rootMovie,null!=a.lwfInstanceId&&delete this.lwf.loadedLWFs[a.lwfInstanceId],this.lwf.isLWFAttached=!0},fb.prototype.swapAttachedLWFDepth=function(a,b){var c,d;null==this.attachedLWFs||a===b||(c=this.attachedLWFList[a],d=this.attachedLWFList[b],null!=c?(c.child.depth=b,this.attachedLWFList[b]=c,V.insertIntArray(this.attachedLWFListKeys,b)):(delete this.attachedLWFList[b],V.deleteIntArray(this.attachedLWFListKeys,b)),null!=d?(d.child.depth=a,this.attachedLWFList[a]=d,V.insertIntArray(this.attachedLWFListKeys,a)):(delete this.attachedLWFList[a],V.deleteIntArray(this.attachedLWFListKeys,a)))},fb.prototype.swapDepths=function(a){a instanceof fb?null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,a.depth):this.lwf===a.lwf&&null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,a.lwf.depth):null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,a):null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,a)},fb.prototype.getAttachedLWF=function(a){var b,c;if(null==this.attachedLWFs)return null;switch(typeof a){case"string":return null!=(b=this.attachedLWFs[a])?b.child:void 0;case"number":return null!=(c=this.attachedLWFList[a])?c.child:void 0}},fb.prototype.searchAttachedLWF=function(a,b){var c,d;null==b&&(b=!0),c=this.getAttachedLWF(a);if(null!=c)return c;if(!b)return null;for(d=this.instanceHead;null!==d;){if(d.isMovie&&(c=d.searchAttachedLWF(a,b),null!==c))return c;d=d.linkInstance}return null},fb.prototype.detachLWF=function(a){var b,c;if(null!=this.detachedLWFs)switch(typeof a){case"string":this.detachedLWFs[a]=!0;break;case"number":a=null!=(b=this.attachedLWFList)?b[a]:void 0,null!=(null!=a?null!=(c=a.child)?c.attachName:void 0:void 0)&&(this.detachedLWFs[a.child.attachName]=!0);break;case typeof u:null!=(null!=a?a.attachName:void 0)&&(this.detachedLWFs[a.attachName]=!0)}},fb.prototype.detachAllLWFs=function(){var a,b,c;if(null!=this.detachedLWFs)for(a in c=this.attachedLWFs,c)b=c[a],this.detachedLWFs[b.child.attachName]=!0},fb.prototype.execObject=function(a,b,f,g,h){var i,j;if(-1!==b){i=this.lwf.data,b=i.objects[b],i=b.objectId,j=this.displayList[a],null!=j&&(j.type!==b.objectType||j.objectId!==i||j.isMovie&&j.instanceId!==h)&&(j.destroy(),j=null);if(null==j)switch(b.objectType){case D.BUTTON:j=new e(this.lwf,this,i,h,f,g);break;case D.GRAPHIC:j=new s(this.lwf,this,i);break;case D.MOVIE:j=new fb(this.lwf,this,i,h,f,g);break;case D.BITMAP:j=new c(this.lwf,this,i);break;case D.BITMAPEX:j=new d(this.lwf,this,i);break;case D.TEXT:j=new B(this.lwf,this,i);break;case D.PARTICLE:j=new y(this.lwf,this,i);break;case D.PROGRAMOBJECT:j=new A(this.lwf,this,i)}if(j.isMovie||j.isButton)j.linkInstance=null,null===this.instanceHead?this.instanceHead=j:this.instanceTail.linkInstance=j,this.instanceTail=j,j.isButton&&(this.hasButton=!0);this.displayList[a]=j,j.execCount=this.movieExecCount,j.exec(f,g)}},fb.prototype.override=function(a,b){this.overriding=!0,V.copyMatrix(this.matrix,a),V.copyColorTransform(this.colorTransform,b),this.lwf.isPropertyDirty=!0},fb.prototype.exec=function(a,b){null==a&&(a=0),null==b&&(b=0),this.attachMoviePostExeced=this.attachMovieExeced=!1,fb.__super__.exec.call(this,a,b)},fb.prototype.postExec=function(a){var b,c,d,e,f,h,i,j,k;this.hasButton=!1;if(this.active){this.execedFrame=-1,i=this.postExecCount===this.lwf.execCount;for(a&&this.playing&&!this.jumped&&!i&&++this.currentFrameInternal;;){if(0>this.currentFrameInternal||this.currentFrameInternal>=this.totalFrames)this.currentFrameInternal=0;if(this.currentFrameInternal===this.execedFrame)break;this.execedFrame=this.currentFrameCurrent=this.currentFrameInternal,e=this.lwf.data,f=e.frames[this.data.frameOffset+this.currentFrameCurrent];if(this.lastControlOffset===f.controlOffset&&this.lastControls===f.controls)if(d=this.lastControlAnimationOffset,this.skipped){for(h=this.instanceHead;null!==h;)h.isMovie?(h.attachMovieExeced=!1,h.attachMoviePostExeced=!1):h.isButton&&h.enterFrame(),h=h.linkInstance;this.hasButton=this.lastHasButton}else{b=j=0;for(k=this.data.depths;0>k?j>k:j<k;b=0>k?--j:++j)h=this.displayList[b],null!=h&&(i||(h.matrixIdChanged=!1,h.colorTransformIdChanged=!1),h.isMovie?(h.attachMovieExeced=!1,h.attachMoviePostExeced=!1):h.isButton&&(h.enterFrame(),this.hasButton=!0));this.lastHasButton=this.hasButton,this.skipped=!0}else{++this.movieExecCount,this.instanceTail=this.instanceHead=null,this.lastControlOffset=f.controlOffset,this.lastControls=f.controls,d=-1,h=j=0;for(k=f.controls;0>k?j>k:j<k;h=0>k?--j:++j)switch(b=e.controls[f.controlOffset+h],b.controlType){case q.MOVE:h=e.places[b.controlId],this.execObject(h.depth,h.objectId,h.matrixId,0,h.instanceId);break;case q.MOVEM:b=e.controlMoveMs[b.controlId],h=e.places[b.placeId],this.execObject(h.depth,h.objectId,b.matrixId,0,h.instanceId);break;case q.MOVEC:b=e.controlMoveCs[b.controlId],h=e.places[b.placeId],this.execObject(h.depth,h.objectId,h.matrixId,b.colorTransformId,h.instanceId);break;case q.MOVEMC:b=e.controlMoveMCs[b.controlId],h=e.places[b.placeId],this.execObject(h.depth,h.objectId,b.matrixId,b.colorTransformId,h.instanceId);break;case q.ANIMATION:-1===d&&(d=h)}this.lastControlAnimationOffset=d,this.lastHasButton=this.hasButton,b=j=0;for(k=this.data.depths;0>k?j>k:j<k;b=0>k?--j:++j)h=this.displayList[b],null!=h&&h.execCount!==this.movieExecCount&&(h.destroy(),this.displayList[b]=null)}this.attachMovieExeced=!0;if(null!=this.attachedMovies){k=this.attachedMovieListKeys,h=0;for(j=k.length;h<j;h++)b=k[h],b=this.attachedMovieList[b],b.exec()}for(h=this.instanceHead;null!==h;)h.isMovie&&(b=h,b.postExec(a),!this.hasButton&&b.hasButton&&(this.hasButton=!0)),h=h.linkInstance;this.attachMoviePostExeced=!0;if(null!=this.attachedMovies){b=this.detachedMovies;for(c in b)b=this.attachedMovies[c],null!=b&&this.deleteAttachedMovie(this,b,!0,!1);this.detachedMovies={},k=this.attachedMovieListKeys,j=0;for(h=k.length;j<h;j++)b=k[j],b=this.attachedMovieList[b],b.postExec(a),!this.hasButton&&b.hasButton&&(this.hasButton=!0)}null!=this.attachedLWFs&&(this.hasButton=!0),this.postLoaded||(this.postLoaded=!0,null!=this.postLoadFunc&&this.postLoadFunc.call(this),null!=this.handler&&this.handler.call("postLoad",this));if(-1!==d&&this.execedFrame===this.currentFrameInternal&&(b=this.animationPlayedFrame===this.currentFrameCurrent&&!this.jumped,!b)){h=j=d;for(k=f.controls;d>k?j>k:j<k;h=d>k?--j:++j)b=e.controls[f.controlOffset+h],this.lwf.playAnimation(b.controlId,this)}this.animationPlayedFrame=this.currentFrameCurrent,this.currentFrameCurrent===this.currentFrameInternal&&(this.jumped=!1)}null!=this.enterFrameFunc&&this.enterFrameFunc.call(this),this.playAnimation(g.ENTERFRAME),null!=this.handler&&this.handler.call("enterFrame",this),this.postExecCount=this.lwf.execCount}},fb.prototype.updateObject=function(a,b,c,d,e){return b=a.isMovie&&a.property.hasMatrix?b:d||!a.updated||a.matrixIdChanged?V.calcMatrixId(this.lwf,this.matrix1,b,a.matrixId):null,c=a.isMovie&&a.property.hasColorTransform?c:e||!a.updated||a.colorTransformIdChanged?V.calcColorTransformId(this.lwf,this.colorTransform1,c,a.colorTransformId):null,a.update(b,c)},fb.prototype.update=function(a,b){var c,d,e,f,g,h,i;if(this.active){this.overriding?d=g=!0:(g=this.matrix.setWithComparing(a),d=this.colorTransform.setWithComparing(b)),null!=this.handler&&this.handler.call("update",this),this.property.hasMatrix?(g=!0,a=V.calcMatrix(this.matrix0,this.matrix,this.property.matrix)):a=this.matrix,this.property.hasColorTransform?(d=!0,b=V.calcColorTransform(this.colorTransform0,this.colorTransform,this.property.colorTransform)):b=this.colorTransform,e=f=0;for(h=this.data.depths;0>h?f>h:f<h;e=0>h?--f:++f)e=this.displayList[e],null!=e&&this.updateObject(e,a,b,g,d);if(null!=this.attachedMovies||null!=this.attachedLWFs){if(null!=this.attachedMovies){i=this.attachedMovieListKeys,h=0;for(e=i.length;h<e;h++)f=i[h],f=this.attachedMovieList[f],this.updateObject(f,a,b,g,d)}if(null!=this.attachedLWFs){d=this.detachedLWFs;for(c in d)d=this.attachedLWFs[c],null!=d&&this.deleteAttachedLWF(this,d,!0,!1);this.detachedLWFs={},h=this.attachedLWFListKeys,c=0;for(g=h.length;c<g;c++)f=h[c],d=this.attachedLWFList[f],this.lwf.renderObject(d.child.exec(this.lwf.thisTick,a,b))}}}},fb.prototype.linkButton=function(){var a,b,c,d;if(this.visible&&this.active&&this.hasButton){if(null!=this.attachedLWFs){d=this.attachedLWFListKeys,c=0;for(a=d.length;c<a;c++)b=d[c],b=this.attachedLWFList[b],b.linkButton()}if(null!=this.attachedMovies){d=this.attachedMovieListKeys,c=0;for(a=d.length;c<a;c++)b=d[c],b=this.attachedMovieList[b],b.hasButton&&b.linkButton()}a=b=0;for(c=this.data.depths;0>c?b>c:b<c;a=0>c?--b:++b)a=this.displayList[a],null!=a&&(a.isButton?a.linkButton():a.isMovie&&a.hasButton&&a.linkButton())}},fb.prototype.render=function(a,b){var c,d,e,f,g,h;if(!this.visible||!this.active)a=!1;f=e=!1;if("normal"!==this.blendMode)switch(this.blendMode){case"add":this.lwf.beginBlendMode(this.blendMode),e=!0;break;case"erase":case"layer":this.lwf.beginMaskMode(this.blendMode),f=!0}null!=this.handler&&this.handler.call("render",this),this.property.hasRenderingOffset&&(this.lwf.renderOffset(),b=this.property.renderingOffset),b===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),d=c=0;for(g=this.data.depths;0>g?c>g:c<g;d=0>g?--c:++c)d=this.displayList[d],null!=d&&d.render(a,b);if(null!=this.attachedMovies){h=this.attachedMovieListKeys,g=0;for(d=h.length;g<d;g++)c=h[g],c=this.attachedMovieList[c],c.render(a,b)}if(null!=this.attachedLWFs){h=this.attachedLWFListKeys,g=0;for(d=h.length;g<d;g++)c=h[g],c=this.attachedLWFList[c],c=c.child,c.setAttachVisible(a),this.lwf.renderObject(c.render(this.lwf.renderingIndex,this.lwf.renderingCount,b))}e&&this.lwf.endBlendMode(),f&&this.lwf.endMaskMode()},fb.prototype.inspect=function(a,b,c){var d,e,f,g,h;this.property.hasRenderingOffset&&(this.lwf.renderOffset(),e=this.property.renderingOffset),e===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),a(this,b,c,e),++b,c=f=0;for(g=this.data.depths;0>g?f>g:f<g;c=0>g?--f:++f)d=this.displayList[c],null!=d&&d.inspect(a,b,c,e);if(null!=this.attachedMovies){h=this.attachedMovieListKeys,f=0;for(g=h.length;f<g;f++)d=h[f],d=this.attachedMovieList[d],d.inspect(a,b,c++,e)}if(null!=this.attachedLWFs){h=this.attachedLWFListKeys,f=0;for(g=h.length;f<g;f++)d=h[f],d=this.attachedLWFList[d],d=d.child,this.lwf.renderObject(d.inspect(a,b,c++,e))}},fb.prototype.destroy=function(){var a,b,c,d,e;e=this.displayList,c=0;for(d=e.length;c<d;c++)b=e[c],null!=b&&b.destroy();if(null!=this.attachedMovies){c=this.attachedMovies;for(a in c)b=c[a],b.destroy();this.attachedMovieListKeys=this.attachedMovieList=this.detachedMovies=this.attachedMovies=null}if(null!=this.attachedLWFs){c=this.attachedLWFs;for(a in c)b=c[a],this.execDetachHandler(b);this.attachedLWFListKeys=this.attachedLWFList=this.detachedLWFs=this.attachedLWFs=null}null!=this.unloadFunc&&this.unloadFunc.call(this),this.playAnimation(g.UNLOAD),null!=this.handler&&this.handler.call("unload",this),this.property=this.displayList=this.instanceTail=this.instanceHead=null,fb.__super__.destroy.apply(this,arguments)},fb.prototype.playAnimation=function(a){var b,c,d,e;c=this.lwf.data.movieClipEvents,b=d=0;for(e=this.data.clipEvents;0>e?d>e:d<e;b=0>e?--d:++d)b=c[this.data.clipEventId+b],0!==(b.clipEvent&a)&&this.lwf.playAnimation(b.animationId,this)},fb.prototype.dispatchEvent=function(a){var b,c,d;switch(a){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":null!=this.handler&&this.handler.call(a,this);break;default:b=this.eventHandlers[a];if(null==b)return!1;var e;e=[],c=0;for(d=b.length;c<d;c++)a=b[c],e.push(a);b=e,c=0;for(d=b.length;c<d;c++)a=b[c],null!=a&&a.call(this)}return!0},fb.prototype.addEventHandler=function(a,b){var c;switch(a){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":null==this.handler&&this.setHandlers(new x),this.handler.addHandler(a,b);break;default:null==(c=this.eventHandlers)[a]&&(c[a]=[]),this.eventHandlers[a].push(b)}},fb.prototype.removeEventHandler=function(a,b){var c,d;switch(a){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":null!=this.handler&&this.handler.removeHandler(a,b);break;default:c=this.eventHandlers[a];if(null==c)break;for(d=0;d<c.length;)c[d]===b?c.splice(d,1):++d;0===c.length&&delete this.eventHandlers[a]}},fb.prototype.clearEventHandler=function(a){null==a&&(a=null);switch(a){case null:null!=this.handler&&this.handler.clear(),this.eventHandlers={};break;case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":null!=this.handler&&this.handler.clear(a);break;default:delete this.eventHandlers[a]}},fb.prototype.setEventHandler=function(a,b){this.clearEventHandler(a),this.addEventHandler(a,b)},fb.prototype.searchFrame=function(a){return this.lwf.searchFrame(this,a)},fb.prototype.gotoLabel=function(a){return"string"==typeof a&&(a=this.lwf.getStringId(a)),this.gotoFrame(this.lwf.searchFrame(this,a)),this},fb.prototype.gotoAndStop=function(a){return"string"==typeof a?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(a))):this.gotoFrame(a),this.stop(),this},fb.prototype.gotoAndPlay=function(a){return"string"==typeof a?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(a))):this.gotoFrame(a),this.play(),this},fb.prototype.searchMovieInstance=function(a,b){var c,d;null==b&&(b=!0),"string"==typeof a&&(a=this.lwf.getStringId(a));for(d=this.instanceHead;null!==d;){if(d.isMovie&&this.lwf.getInstanceNameStringId(d.instanceId)===a)return d;if(b&&d.isMovie&&(c=d.searchMovieInstance(a,b),null!==c))return c;d=d.linkInstance}return null},fb.prototype.searchMovieInstanceByInstanceId=function(a,b){var c,d;for(d=this.instanceHead;null!==d;){if(d.isMovie&&d.instanceId===a)return d;if(b&&d.isMovie&&(c=d.searchMovieInstanceByInstanceId(a,b),null!==c))return c;d=d.linkInstance}return null},fb.prototype.searchButtonInstance=function(a,b){var c,d;null==b&&(b=!0),"string"==typeof a&&(a=this.lwf.getStringId(a));for(d=this.instanceHead;null!==d;){if(d.isButton&&this.lwf.getInstanceNameStringId(d.instanceId)===a)return d;if(b&&d.isMovie&&(c=d.searchButtonInstance(a,b),null!==c))return c;d=d.linkInstance}return null},fb.prototype.searchButtonInstanceByInstanceId=function(a,b){var c,d;for(d=this.instanceHead;null!==d;){if(d.isButton&&d.instanceId===a)return d;if(b&&d.isMovie&&(c=d.searchMovieInstanceByInstanceId(a,b),null!==c))return c;d=d.linkInstance}return null},fb.prototype.move=function(a,b){return this.property.hasMatrix||V.syncMatrix(this),this.property.move(a,b),this},fb.prototype.moveTo=function(a,b){return this.property.hasMatrix||V.syncMatrix(this),this.property.moveTo(a,b),this},fb.prototype.rotate=function(a){return this.property.hasMatrix||V.syncMatrix(this),this.property.rotate(a),this},fb.prototype.rotateTo=function(a){return this.property.hasMatrix||V.syncMatrix(this),this.property.rotateTo(a),this},fb.prototype.scale=function(a,b){return this.property.hasMatrix||V.syncMatrix(this),this.property.scale(a,b),this},fb.prototype
.scaleTo=function(a,b){return this.property.hasMatrix||V.syncMatrix(this),this.property.scaleTo(a,b),this},fb.prototype.setMatrix=function(a,b,c,d){return null==c&&(c=1),null==d&&(d=0),this.property.setMatrix(a,scalex,c,d),this},fb.prototype.setAlpha=function(a){return this.property.hasColorTransform||V.syncColorTransform(this),this.property.setAlpha(a),this},fb.prototype.setColorTransform=function(a){return this.property.setColorTransform(a),this},fb.prototype.setRenderingOffset=function(a){return this.property.setRenderingOffset(a),this},fb.prototype.getX=function(){return this.property.hasMatrix?this.property.matrix.translateX:V.getX(this)},fb.prototype.setX=function(a){this.property.hasMatrix||V.syncMatrix(this),this.property.moveTo(a,this.property.matrix.translateY)},fb.prototype.getY=function(){return this.property.hasMatrix?this.property.matrix.translateY:V.getY(this)},fb.prototype.setY=function(a){this.property.hasMatrix||V.syncMatrix(this),this.property.moveTo(this.property.matrix.translateX,a)},fb.prototype.getScaleX=function(){return this.property.hasMatrix?this.property.scaleX:V.getScaleX(this)},fb.prototype.setScaleX=function(a){this.property.hasMatrix||V.syncMatrix(this),this.property.scaleTo(a,this.property.scaleY)},fb.prototype.getScaleY=function(){return this.property.hasMatrix?this.property.scaleY:V.getScaleY(this)},fb.prototype.setScaleY=function(a){this.property.hasMatrix||V.syncMatrix(this),this.property.scaleTo(this.property.scaleX,a)},fb.prototype.getRotation=function(){return this.property.hasMatrix?this.property.rotation:V.getRotation(this)},fb.prototype.setRotation=function(a){this.property.hasMatrix||V.syncMatrix(this),this.property.rotateTo(a)},fb.prototype.getAlphaProperty=function(){return this.property.hasColorTransform?this.property.colorTransform.multi.alpha:V.getAlpha(this)},fb.prototype.setAlphaProperty=function(a){this.property.hasColorTransform||V.syncColorTransform(this),this.property.setAlpha(a)},w=fb,J=function(){this.clear()},J.prototype.clear=function(a){var b,c,d;null==a&&(a=null);if(null!=a)null!=this[a]&&(this[a]=[]);else{d=this.types,b=0;for(c=d.length;b<c;b++)a=d[b],this[a]=[]}},J.prototype.add=function(a){var b,c,d,e,f;f=this.types,d=0;for(e=f.length;d<e;d++)c=f[d],b=a[c],null!=b&&this[c].push(b)},J.prototype.concat=function(a){var b,c,d,e,f,g,h,i;i=this.types,e=0;for(g=i.length;e<g;e++){d=i[e],c=a[d],f=0;for(h=c.length;f<h;f++)b=c[f],this[d].push(b)}},J.prototype.addHandler=function(a,b){null!=b&&this[a].push(b)},J.prototype.removeInternal=function(a,b){var c;for(c=0;c<a.length;)a[c]===b?a.splice(c,1):++c},J.prototype.remove=function(a){var b,c,d,e,f;f=this.types,d=0;for(e=f.length;d<e;d++)c=f[d],b=a[c],null!=b&&this.removeInternal(this[c],b)},J.prototype.removeHandler=function(a,b){null!=b&&this.removeInternal(this[a],b)},J.prototype.call=function(a,b){var c,d,e,f;d=this[a];if(null!=d&&0<d.length){var g;g=[],e=0;for(f=d.length;e<f;e++)c=d[e],g.push(c);d=g,e=0;for(f=d.length;e<f;e++)c=d[e],c.call(b)}};var gb=function(){this.types=hb,gb.__super__.constructor.apply(this,arguments)},hb;l(gb,J),hb="load postLoad unload enterFrame update render".split(" "),x=gb;var ib=function(){this.types=jb,ib.__super__.constructor.apply(this,arguments)},jb;l(ib,J),jb="load unload enterFrame update render press release rollOver rollOut keyPress".split(" "),f=ib;var J=function(a,b,c,d){null==b&&(b=null),null==c&&(c=null),this.privateData=null!=d?d:null,this.data=a,null!=c&&(this.functions=c()),this.width=this.data.header.width,this.height=this.data.header.height,this.backgroundColor=this.data.header.backgroundColor,this.name=this.data.strings[this.data.header.nameStringId],this.interactive=0<this.data.buttonConditions.length,this.lwfInstanceId=this.url=null,this.frameRate=this.data.header.frameRate,this.execLimit=3,this.tick=1/this.frameRate,this.roundOffTick=this.tick*kb,this.thisTick=this.time=0,this.attachVisible=!0,this.execCount=0,this.isLWFAttached=this.isPropertyDirty=this.isExecDisabled=!1,this.interceptByNotAllowOrDenyButtons=!0,this.intercepted=!1,this.scaleByStage=1,this.pointY=this.pointX=Number.MIN_VALUE,this.pressing=!1,this.buttonHead=null,this.blendModes=[],this.maskModes=[],this._tweens=null,!this.interactive&&1===this.data.frames.length&&this.disableExec(),this.property=new eb(this),this.instances=[],this.execHandlers=null,this.eventHandlers=[],this.genericEventHandlers=[],this.movieEventHandlers=[],this.buttonEventHandlers=[],this.movieCommands={},this.programObjectConstructors=[],this.loadedLWFs={},this.depth=this.attachName=this.parent=null,this.matrix=new F,this.matrixIdentity=new F,this.colorTransform=new H,this.colorTransformIdentity=new H,this.setRendererFactory(b),this.init()},kb;kb=.05,J.prototype.setRendererFactory=function(a){null==a&&(a=null),null==a&&(a=new W),this.rendererFactory=a,this.rendererFactory.init(this)},J.prototype.setFrameRate=function(a){0!==a&&(this.frameRate=a,this.tick=1/this.frameRate)},J.prototype.setPreferredFrameRate=function(a,b){null==b&&(b=2),0!==frameRate&&(this.execLimit=Math.ceil(this.frameRate/a)+b)},J.prototype.fitForHeight=function(a,b){V.fitForHeight(this,a,b)},J.prototype.fitForWidth=function(a,b){V.fitForWidth(this,a,b)},J.prototype.scaleForHeight=function(a){V.scaleForHeight(this,a)},J.prototype.scaleForWidth=function(a){V.scaleForWidth(this,a)},J.prototype.getStageSize=function(){var a;return a=this.rendererFactory.getStageSize(),{width:a[0],height:a[1]}},J.prototype.renderOffset=function(){this.renderingIndexOffsetted=0},J.prototype.clearRenderOffset=function(){this.renderingIndexOffsetted=this.renderingIndex},J.prototype.renderObject=function(a){return null==a&&(a=1),this.renderingIndex+=a,this.renderingIndexOffsetted+=a,this.renderingIndex},J.prototype.beginBlendMode=function(a){this.blendModes.unshift(a),this.rendererFactory.setBlendMode(a)},J.prototype.endBlendMode=function(){this.blendModes.shift(),this.rendererFactory.setBlendMode(0<this.blendModes.length?this.blendModes[0]:"normal")},J.prototype.beginMaskMode=function(a){this.maskModes.unshift(a),this.rendererFactory.setMaskMode(a)},J.prototype.endMaskMode=function(){this.maskModes.shift(),this.rendererFactory.setMaskMode(0<this.maskModes.length?this.maskModes[0]:"normal")},J.prototype.setAttachVisible=function(a){this.attachVisible=a},J.prototype.clearFocus=function(a){this.focus===a&&(this.focus=null)},J.prototype.clearPressed=function(a){this.pressed===a&&(this.pressed=null)},J.prototype.clearIntercepted=function(){this.intercepted=!1},J.prototype.init=function(){this.progress=this.time=0,this.instances=[],this.pressed=this.focus=null,this.movieCommands={},this.rootMovieStringId=this.getStringId("_root"),null!=this.rootMovie&&this.rootMovie.destroy(),this.rootMovie=new w(this,null,this.data.header.rootMovieId,this.searchInstanceId(this.rootMovieStringId))},J.prototype.calcMatrix=function(a){var b;return b=this.property,b.hasMatrix?null!=a?V.calcMatrix(this.matrix,a,b.matrix):b.matrix:null!=a?a:this.matrixIdentity},J.prototype.calcColorTransform=function(a){var b;return b=this.property,b.hasColorTransform?null!=a?V.calcColorTransform(this.colorTransform,a,b.colorTransform):b.colorTransform:null!=a?a:this.colorTransformIdentity},J.prototype.exec=function(a,b,c){var d,e,f,g,h,i,j;null==a&&(a=0),null==b&&(b=null),null==c&&(c=null);if(null!=this.rootMovie){f=!1,d=this.progress;if(this.isExecDisabled&&null===this._tweens)this.executedForExecDisabled||(++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(!0),f=this.executedForExecDisabled=!0);else{h=!0,this.thisTick=a,0===a?this.progress=this.tick:0>a?(this.progress=this.tick,h=!1):0===this.time?(this.time+=this.tick,this.progress+=this.tick):(this.time+=a,this.progress+=a),g=this.execHandlers;if(null!=g){i=0;for(j=g.length;i<j;i++)e=g[i],e.call(this)}for(e=this.execLimit;this.progress>=this.tick-this.roundOffTick;){if(0>--e){this.progress=0;break}this.progress-=this.tick,++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(h),f=!0}this.progress<this.roundOffTick&&(this.progress=0),this.buttonHead=null,this.interactive&&this.rootMovie.hasButton&&this.rootMovie.linkButton()}return(f||this.isLWFAttached||this.isPropertyDirty||null!=b||null!=c)&&this.update(b,c),!this.execDisabled&&0>a&&(this.progress=d),this.renderingCount}},J.prototype.forceExec=function(a,b){return null==a&&(a=null),null==b&&(b=null),this.exec(0,a,b)},J.prototype.forceExecWithoutProgress=function(a,b){return null==a&&(a=null),null==b&&(b=null),this.exec(-1,a,b)},J.prototype.update=function(a,b){var c,d;null==a&&(a=null),null==b&&(b=null),d=this.calcMatrix(a),c=this.calcColorTransform(b),this.renderingIndexOffsetted=this.renderingIndex=0,this.rootMovie.update(d,c),this.renderingCount=this.renderingIndex,this.thisTick=0,this.isPropertyDirty=!1},J.prototype.render=function(a,b,c){var d;null==a&&(a=0),null==b&&(b=0),null==c&&(c=Number.MIN_VALUE);if(null!=this.rootMovie)return d=this.renderingCount,0<b&&(this.renderingCount=b),this.renderingIndexOffsetted=this.renderingIndex=a,this.property.hasRenderingOffset&&(this.renderOffset(),c=this.property.renderingOffset),this.rendererFactory.beginRender(this),this.rootMovie.render(this.attachVisible,c),this.rendererFactory.endRender(this),this.renderingCount=d},J.prototype.inspect=function(a,b,c,d,e,f){var g;return null==b&&(b=0),null==c&&(c=0),null==d&&(d=0),null==e&&(e=0),null==f&&(f=Number.MIN_VALUE),g=this.renderingCount,0<e&&(this.renderingCount=e),this.renderingIndexOffsetted=this.renderingIndex=d,this.property.hasRenderingOffset&&(this.renderOffset(),f=this.property.renderingOffset),this.rootMovie.inspect(a,b,c,f),this.renderingCount=g},J.prototype.destroy=function(){var a,b,c,d;if(null!=this.rootMovie){null!=this.stopTweens&&this.stopTweens(),d=this.loadedLWFs;for(a in d)b=d[a],b.destroy();this.loadedLWFs=null,this.rootMovie.destroy(),this.rootMovie=null,a=null!=(c=this.functions)?c.destroy:void 0,null!=a&&a.call(this),this.functions=null,null!=this.rendererFactory&&(c=this.rendererFactory.resourceCache,null!=c&&c.unloadLWF(this),this.rendererFactory.destruct(),this.rendererFactory=null),this.programObjectConstructors=this.movieCommands=this.buttonEventHandlers=this.movieEventHandlers=this.genericEventHandlers=this.eventHandlers=this.execHandlers=this.instances=this.buttonHead=this.property=null}},J.prototype.getInstanceNameStringId=function(a){return 0>a||a>=this.data.instanceNames.length?-1:this.data.instanceNames[a].stringId},J.prototype.getStringId=function(a){return a=this.data.stringMap[a],null!=a?a:-1},J.prototype.searchInstanceId=function(a){return 0>a||a>=this.data.strings.length?-1:(a=this.data.instanceNameMap[a],null!=a?a:-1)},J.prototype.searchFrame=function(a,b){var c;return"string"==typeof b&&(b=this.getStringId(b)),0>b||b>=this.data.strings.length?-1:(c=this.data.labelMap[a.objectId][b],null!=c?c+1:-1)},J.prototype.getMovieLabels=function(a){return null==a?null:this.data.labelMap[a.objectId]},J.prototype.searchMovieLinkage=function(a){return 0>a||a>=this.data.strings.length?-1:(a=this.data.movieLinkageMap[a],null!=a?this.data.movieLinkages[a].movieId:-1)},J.prototype.getMovieLinkageName=function(a){return a=this.data.movieLinkageNameMap[a],null!=a?this.data.strings[a]:null},J.prototype.searchMovieInstance=function(a){var b,c,d,e;if("string"==typeof a){b=a;if(-1!==b.indexOf(".")){c=b.split(".");if(c[0]!==this.data.strings[this.rootMovieStringId])return null;a=this.rootMovie,d=0;for(e=c.length;d<e;d++)if(b=c[d],a=a.searchMovieInstance(b,!1),null==a)return null;return a}a=this.getStringId(a)}return this.searchMovieInstanceByInstanceId(this.searchInstanceId(a))},J.prototype.searchMovieInstanceByInstanceId=function(a){"string"==typeof a&&(a=this.searchInstanceId(this.getStringId(a)));if(0>a||a>=this.data.instanceNames.length)return null;for(a=this.instances[a];null!=a;){if(a.isMovie)return a;a=a.nextInstance}return null},J.prototype.searchButtonInstance=function(a){var b,c,d,e;if("string"==typeof a){b=a;if(-1!==b.indexOf(".")){c=b.split(".");if(c[0]!==this.data.strings[this.rootMovieStringId])return null;b=this.rootMovie,a=d=1;for(e=c.length;1>e?d>e:d<e;a=1>e?--d:++d){if(a===c.length-1)return b.searchButtonInstance(c[a],!1);b=b.searchButtonInstance(c[a],!1);if(null==b)break}return null}a=this.getStringId(a)}return this.searchButtonInstanceByInstanceId(this.searchInstanceId(a))},J.prototype.searchButtonInstanceByInstanceId=function(a){"string"==typeof a&&(a=this.searchInstanceId(this.getStringId(a)));if(0>a||a>=this.data.instanceNames.length)return null;for(a=this.instances[a];null!=a;){if(a.isButton)return a;a=a.nextInstance}return null},J.prototype.searchEventId=function(a){return"string"==typeof a&&(a=this.getStringId(a)),0>a||a>=this.data.strings.length?-1:(a=this.data.eventMap[a],null!=a?a:-1)},J.prototype.searchProgramObjectId=function(a){return"string"==typeof a&&(a=this.getStringId(a)),0>a||a>=this.data.strings.length?-1:(a=this.data.programObjectMap[a],null!=a?a:-1)},J.prototype.getInstance=function(a){return this.instances[a]},J.prototype.setInstance=function(a,b){this.instances[a]=b},J.prototype.addExecHandler=function(a){null==this.execHandlers&&(this.execHandlers=[]),this.execHandlers.push(a)},J.prototype.removeExecHandler=function(a){var b,c;b=this.execHandlers;if(null!=b)for(c=0;c<b.length;)b[c]===a?b.splice(c,1):++c},J.prototype.clearExecHandler=function(){this.execHandlers=null},J.prototype.setExecHandler=function(a){this.clearExecHandler(),this.addExecHandler(a)},J.prototype.addEventHandler=function(a,b){var c,d;c="string"==typeof a?this.searchEventId(a):a,0>c||c>=this.data.events.length?(null==(c=this.genericEventHandlers)[a]&&(c[a]=[]),this.genericEventHandlers[a].push(b)):(null==(d=this.eventHandlers)[c]&&(d[c]=[]),this.eventHandlers[c].push(b))},J.prototype.removeEventHandler=function(a,b){var c,d,e,f,g;c="string"==typeof a?this.searchEventId(a):a;if(0>c||c>=this.data.events.length){if(d=this.genericEventHandlers[a],null!=d){c=[];for(e in d)f=d[e],f===b&&c.push(e);f=0;for(g=c.length;f<g;f++)e=c[f],delete d[e]}}else if(d=this.eventHandlers[c],null!=d){for(e=0;e<d.length;)d[e]===b?d.splice(e,1):++e;0===d.length&&delete this.eventHandlers[c]}},J.prototype.clearEventHandler=function(a){var b;b="string"==typeof a?this.searchEventId(a):a,0>b||b>=this.data.events.length?this.genericEventHandlers[a]=null:this.eventHandlers[b]=null},J.prototype.setEventHandler=function(a,b){this.clearEventHandler(a),this.addEventHandler(a,b)},J.prototype.getProgramObjectConstructor=function(a){return"string"==typeof a&&(a=this.searchProgramObjectId(this.getStringId(a))),0>a||a>=this.data.programObjects.length?null:this.programObjectConstructors[a]},J.prototype.setProgramObjectConstructor=function(a,b){"string"==typeof a&&(a=this.searchProgramObjectId(this.getStringId(a))),0>a||a>=this.data.programObjects.length||(this.programObjectConstructors[a]=b)},J.prototype.getMovieEventHandlers=function(a){var b;return"string"==typeof a?(b=this.searchInstanceId(this.getStringId(a)),0<=b&&b<this.data.instanceNames.length?this.movieEventHandlers[b]:null==this.movieEventHandlersByFullName?null:this.movieEventHandlersByFullName[a]):null!=this.movieEventHandlersByFullName&&(b=a.getFullName(),null!=b&&(b=this.movieEventHandlersByFullName[b],null!=b))?b:this.movieEventHandlers[a.instanceId]},J.prototype.addMovieEventHandler=function(a,b){var c,d;d=this.searchInstanceId(this.getStringId(a));if(0<=d&&d<this.data.instanceNames.length)c=this.movieEventHandlers[d],null==c&&(c=new x,this.movieEventHandlers[d]=c),d=this.searchMovieInstanceByInstanceId(d);else{if(-1===a.indexOf("."))return;null==this.movieEventHandlersByFullName&&(this.movieEventHandlersByFullName=[]),c=this.movieEventHandlersByFullName[a],null==c&&(c=new x,this.movieEventHandlersByFullName[a]=c),d=this.searchMovieInstance(a)}c.add(b),null!=d&&d.setHandlers(c)},J.prototype.removeMovieEventHandler=function(a,b){var c;c=this.getMovieEventHandlers(a),null!=c&&c.remove(b),c=this.searchMovieInstance(a),null!=(null!=c?c.handler:void 0)&&c.handler.remove(b)},J.prototype.clearMovieEventHandler=function(a,b){var c;null==b&&(b=null),c=this.getMovieEventHandlers(a),null!=c&&c.clear(b),c=this.searchMovieInstance(a),null!=(null!=c?c.handler:void 0)&&c.handler.clear(b)},J.prototype.setMovieEventHandler=function(a,b){this.clearMovieEventHandler(a),this.addMovieEventHandler(a,b)},J.prototype.getButtonEventHandlers=function(a){var b;return"string"==typeof a?(b=this.searchInstanceId(this.getStringId(a)),0<=b&&b<this.data.instanceNames.length?this.buttonEventHandlers[b]:null==this.buttonEventHandlersByFullName?null:this.buttonEventHandlersByFullName[a]):null!=this.buttonEventHandlersByFullName&&(b=a.getFullName(),null!=b&&(b=this.buttonEventHandlersByFullName[b],null!=b))?b:this.buttonEventHandlers[a.instanceId]},J.prototype.addButtonEventHandler=function(a,b){var c,d;this.interactive=!0,c=this.searchInstanceId(this.getStringId(a));if(0<=c&&c<this.data.instanceNames.length)d=this.buttonEventHandlers[c],null==d&&(d=new f,this.buttonEventHandlers[c]=d),c=this.searchButtonInstanceByInstanceId(c);else{if(-1===a.indexOf("."))return;null==this.buttonEventHandlersByFullName&&(this.buttonEventHandlersByFullName=[]),d=this.buttonEventHandlersByFullName[a],null==d&&(d=new f,this.buttonEventHandlersByFullName[a]=d),c=this.searchButtonInstance(a)}d.add(b),null!=c&&c.setHandlers(d)},J.prototype.removeButtonEventHandler=function(a,b){var c;c=this.getButtonEventHandlers(a),null!=c&&c.remove(b),c=this.searchButtonInstance(a),null!=(null!=c?c.handler:void 0)&&c.handler.remove(b)},J.prototype.clearButtonEventHandler=function(a,b){var c;null==b&&(b=null),c=this.getButtonEventHandlers(a),null!=c&&c.clear(b),c=this.searchButtonInstance(a),null!=("undefined"!==typeof buffon&&null!==buffon?buffon.handler:void 0)&&c.handler.clear(b)},J.prototype.setButtonEventHandler=function(a,b){this.clearButtonEventHandler(a),this.addButtonEventHandler(a,b)},J.prototype.execMovieCommand=function(){var a,b,c,d,e,f,g,h,i;b=[],i=this.movieCommands;for(c in i){f=i[c],a=!0,d=this.rootMovie,g=0;for(h=c.length;g<h;g++)if(e=c[g],d=d.searchMovieInstance(e),null==d){a=!1;break}a&&(f(d),b.push(c))}a=0;for(d=b.length;a<d;a++)c=b[a],delete this.movieCommands[c]},J.prototype.setMovieCommand=function(a,b){var c;c=a.slice(0),this.movieCommands[c]=b,this.execMovieCommand()},J.prototype.searchAttachedMovie=function(a){return this.rootMovie.searchAttachedMovie(a)},J.prototype.searchAttachedLWF=function(a){return this.rootMovie.searchAttachedLWF(a)},J.prototype.addAllowButton=function(a){return a=this.searchInstanceId(this.getStringId(a)),0>a?!1:(null==this.allowButtonList&&(this.allowButtonList={}),this.allowButtonList[a]=!0)},J.prototype.removeAllowButton=function(a){return null==this.allowButtonList?!1:(a=this.searchInstanceId(this.getStringId(a)),0>a?!1:(delete this.allowButtonList[a],!0))},J.prototype.clearAllowButton=function(){this.allowButtonList=null},J.prototype.addDenyButton=function(a){return a=this.searchInstanceId(this.getStringId(a)),0>a?!1:(null==this.denyButtonList&&(this.denyButtonList={}),this.denyButtonList[a]=!0)},J.prototype.denyAllButtons=function(){var a,b,c;null==this.denyButtonList&&(this.denyButtonList={}),a=b=0;for(c=this.data.instanceNames.length;0>c?b>c:b<c;a=0>c?--b:++b)this.denyButtonList[a]=!0},J.prototype.removeDenyButton=function(a){return null==this.denyButtonList?!1:(a=this.searchInstanceId(this.getStringId(a)),0>a?!1:(delete this.denyButtonList[a],!0))},J.prototype.clearDenyButton=function(){this.denyButtonList=null},J.prototype.disableExec=function(){this.isExecDisabled=!0,this.executedForExecDisabled=!1},J.prototype.enableExec=function(){this.isExecDisabled=!1},J.prototype.setPropertyDirty=function(){this.isPropertyDirty=!0,null!=this.parent&&this.parent.lwf.setPropertyDirty()},J.prototype.getMovieFunctions=function(a){var b,c,d,e,f;return c=this.getMovieLinkageName(a),a=null!=(d=this.functions)?d[c+"_load"]:void 0,d=null!=(e=this.functions)?e[c+"_postLoad"]:void 0,e=null!=(b=this.functions)?b[c+"_unload"]:void 0,b=null!=(f=this.functions)?f[c+"_enterFrame"]:void 0,[a,d,e,b]},J.prototype.playAnimation=function(a,b,c){var d,e,f,g,h,i,j;f=0,a=this.data.animations[a];for(g=b;;)switch(d=a[f++],d){case P.END:return;case P.PLAY:g.play();break;case P.STOP:g.stop();break;case P.NEXTFRAME:g.nextFrame();break;case P.PREVFRAME:g.prevFrame();break;case P.GOTOFRAME:g.gotoFrameInternal(a[f++]);break;case P.GOTOLABEL:g.gotoFrame(this.searchFrame(g,a[f++]));break;case P.SETTARGET:g=b,d=a[f++];if(0!==d)for(h=0;0>d?h>d:h<d;0>d?--h:++h)switch(e=a[f++],e){case P.INSTANCE_TARGET_ROOT:g=this.rootMovie;break;case P.INSTANCE_TARGET_PARENT:g=g.parent,null==this.target&&(g=this.rootMovie);break;default:g=g.searchMovieInstanceByInstanceId(e,!1),null==g&&(g=b)}break;case P.EVENT:d=a[f++],e=this.eventHandlers[d];if(null!=e){h=0;for(i=e.length;h<i;h++)d=e[h],d(b,c)}break;case P.CALL:d=a[f++],d=null!=(j=this.functions)?j[this.data.strings[d]]:void 0,null!=d&&d.call(b)}},J.prototype.dispatchEvent=function(a,b,c){var d,e,f;null==b&&(b=this.rootMovie),null==c&&(c=null),d="string"==typeof a?this.searchEventId(a):a,d=0>d||d>=this.data.events.length?this.genericEventHandlers[a]:this.eventHandlers[d];if(null==d)return!1;var g;g=[],e=0;for(f=d.length;e<f;e++)a=d[e],g.push(a);d=g,e=0;for(f=d.length;e<f;e++)a=d[e],null!=a&&a(b,c);return!0},J.prototype.inputPoint=function(a,b){var c,d;if(null==this.rootMovie)return null;this.intercepted=!1;if(!this.interactive)return null;this.pointX=a,this.pointY=b,d=!1;for(c=this.buttonHead;null!=c;){if(c.checkHit(a,b)){if(null!=this.allowButtonList){if(null==this.allowButtonList[c.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}c=c.buttonLink;continue}}else if(null!=this.denyButtonList&&null!=this.denyButtonList[c.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}c=c.buttonLink;continue}d=!0,this.focus!==c&&(null!=this.focus&&this.focus.rollOut(),this.focus=c,this.focus.rollOver());break}c=c.buttonLink}return!d&&null!=this.focus&&(this.focus.rollOut(),this.focus=null),this.focus},J.prototype.inputPress=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!0,null!=this.focus&&(this.pressed=this.focus,this.focus.press()))},J.prototype.inputRelease=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!1,null!=this.focus&&this.pressed===this.focus&&(this.focus.release(),this.pressed=null))},J.prototype.inputKeyPress=function(a){var b;if(null!=this.rootMovie&&this.interactive)for(b=this.buttonHead;null!=b;)b.keyPress(a),b=b.buttonLink},u=J,"undefined"!=typeof global&&(null==global.LWF&&(global.LWF={}),global.LWF.Color=G,global.LWF.ColorTransform=H,global.LWF.Format=I,global.LWF.LWF=u,global.LWF.Loader=U,global.LWF.Matrix=F,global.LWF.Movie=w,global.LWF.Point=z,global.LWF.Property=eb),u.prototype.addAllowButton=u.prototype.addAllowButton,u.prototype.addButtonEventHandler=u.prototype.addButtonEventHandler,u.prototype.addButtonEventListener=u.prototype.addButtonEventHandler,u.prototype.addDenyButton=u.prototype.addDenyButton,u.prototype.addEventHandler=u.prototype.addEventHandler,u.prototype.addEventListener=u.prototype.addEventHandler,u.prototype.addMovieEventHandler=u.prototype.addMovieEventHandler,u.prototype.addMovieEventListener=u.prototype.addMovieEventHandler,u.prototype.clearAllowButton=u.prototype.clearAllowButton,u.prototype.clearButtonEventHandler=u.prototype.clearButtonEventHandler,u.prototype.clearButtonEventListener=u.prototype.clearButtonEventHandler,u.prototype.clearDenyButton=u.prototype.clearDenyButton,u.prototype.clearEventHandler=u.prototype.clearEventHandler,u.prototype.clearEventListener=u.prototype.clearEventHandler,u.prototype.clearMovieEventHandler=u.prototype.clearMovieEventHandler,u.prototype.clearMovieEventListener=u.prototype.clearMovieEventHandler,u.prototype.denyAllButtons=u.prototype.denyAllButtons,u.prototype.destroy=u.prototype.destroy,u.prototype.dispatchEvent=u.prototype.dispatchEvent,u.prototype.exec=u.prototype.exec,u.prototype.fitForHeight=u.prototype.fitForHeight,u.prototype.fitForWidth=u.prototype.fitForWidth,u.prototype.forceExec=u.prototype.forceExec,u.prototype.forceExecWithoutProgress=u.prototype.forceExecWithoutProgress,u.prototype.getStageSize=u.prototype.getStageSize,u.prototype.getStringId=u.prototype.getStringId,u.prototype.init=u.prototype.init,u.prototype.inputKeyPress=u.prototype.inputKeyPress,u.prototype.inputPoint=u.prototype.inputPoint,u.prototype.inputPress=u.prototype.inputPress,u.prototype.inputRelease=u.prototype.inputRelease,u.prototype.inspect=u.prototype.inspect,u.prototype.removeAllowButton=u.prototype.removeAllowButton,u.prototype.removeButtonEventHandler=u.prototype.removeButtonEventHandler,u.prototype.removeButtonEventListener=u.prototype.removeButtonEventHandler,u.prototype.removeDenyButton=u.prototype.removeDenyButton,u.prototype.removeEventHandler=u.prototype.removeEventHandler,u.prototype.removeEventListener=u.prototype.removeEventHandler,u.prototype.removeMovieEventHandler=u.prototype.removeMovieEventHandler,u.prototype.removeMovieEventListener=u.prototype.removeMovieEventHandler,u.prototype.render=u.prototype.render,u.prototype.scaleForHeight=u.prototype.scaleForHeight,u.prototype.scaleForWidth=u.prototype.scaleForWidth,u.prototype.searchAttachedLWF=u.prototype.searchAttachedLWF,u.prototype.searchAttachedMovie=u.prototype.searchAttachedMovie,u.prototype.searchEventId=u.prototype.searchEventId,u.prototype.searchFrame=u.prototype.searchFrame,u.prototype.searchProgramObjectId=u.prototype.searchProgramObjectId,u.prototype.setButtonEventHandler=u.prototype.setButtonEventHandler,u.prototype.setButtonEventListener=u.prototype.setButtonEventHandler,u.prototype.setEventHandler=u.prototype.setEventHandler,u.prototype.setEventListener=u.prototype.setEventHandler,u.prototype.setFrameRate=u.prototype.setFrameRate,u.prototype.setMovieCommand=u.prototype.setMovieCommand,u.prototype.setMovieEventHandler=u.prototype.setMovieEventHandler,u.prototype.setMovieEventListener=u.prototype.setMovieEventHandler,u.prototype.setProgramObjectConstructor=u.prototype.setProgramObjectConstructor,u.prototype.setRendererFactory=u.prototype.setRendererFactory,U.load=U.load,Q.prototype.check=Q.prototype.check,Q.prototype.name=Q.prototype.name,t.prototype.getFullName=t.prototype.getFullName,e.prototype.addEventHandler=e.prototype.addEventHandler,e.prototype.addEventListener=e.prototype.addEventHandler,e.prototype.clearEventHandler=e.prototype.clearEventHandler,e.prototype.clearEventListener=e.prototype.clearEventHandler,e.prototype.dispatchEvent=e.prototype.dispatchEvent,e.prototype.removeEventHandler=e.prototype.removeEventHandler,e.prototype.removeEventListener=e.prototype.removeEventHandler,e.prototype.setEventHandler=e.prototype.setEventHandler,e.prototype.setEventListener=e.prototype.setEventHandler,w.prototype.addEventHandler=w.prototype.addEventHandler,w.prototype.addEventListener=w.prototype.addEventHandler,w.prototype.attachLWF=w.prototype.attachLWF,w.prototype.attachMovie=w.prototype.attachMovie,w.prototype.clearEventHandler=w.prototype.clearEventHandler,w.prototype.clearEventListener=w.prototype.clearEventHandler,w.prototype.detachFromParent=w.prototype.detachFromParent,w.prototype.detachLWF=w.prototype.detachLWF,w.prototype.detachMovie=w.prototype.detachMovie,w.prototype.dispatchEvent=w.prototype.dispatchEvent,w.prototype.getAttachedLWF=w.prototype.getAttachedLWF,w.prototype.getAttachedMovie=w.prototype.getAttachedMovie,w.prototype.globalToLocal=w.prototype.globalToLocal,w.prototype.gotoAndPlay=w.prototype.gotoAndPlay,w.prototype.gotoAndStop=w.prototype.gotoAndStop,w.prototype.gotoFrame=w.prototype.gotoFrame,w.prototype.gotoLabel=w.prototype.gotoLabel,w.prototype.inspect=w.prototype.inspect,w.prototype.localToGlobal=w.prototype.localToGlobal,w.prototype.move=w.prototype.move,w.prototype.moveTo=w.prototype.moveTo,w.prototype.nextFrame=w.prototype.nextFrame,w.prototype.override=w.prototype.override,w.prototype.play=w.prototype.play,w.prototype.prevFrame=w.prototype.prevFrame,w.prototype.removeEventHandler=w.prototype.removeEventHandler,w.prototype.removeEventListener=w.prototype.removeEventHandler,w.prototype.removeMovieClip=w.prototype.removeMovieClip,w.prototype.rotate=w.prototype.rotate,w.prototype.rotateTo=w.prototype.rotateTo,w.prototype.scale=w.prototype.scale,w.prototype.scaleTo=w.prototype.scaleTo,w.prototype.searchAttachedLWF=w.prototype.searchAttachedLWF,w.prototype.searchAttachedMovie=w.prototype.searchAttachedMovie,w.prototype.searchMovieInstance=w.prototype.searchMovieInstance,w.prototype.searchMovieInstanceByInstanceId=w.prototype.searchMovieInstanceByInstanceId,w.prototype.setAlpha=w.prototype.setAlpha,w.prototype.setColorTransform=w.prototype.setColorTransform,w.prototype.setEventHandler=w.prototype.setEventHandler,w.prototype.setEventListener=w.prototype.setEventHandler,w.prototype.setMatrix=w.prototype.setMatrix,w.prototype.setRenderingOffset=w.prototype.setRenderingOffset,w.prototype.setVisible=w.prototype.setVisible,w.prototype.stop=w.prototype.stop,w.prototype.swapAttachedLWFDepth=w.prototype.swapAttachedLWFDepth,w.prototype.swapAttachedMovieDepth=w.prototype.swapAttachedMovieDepth,w.prototype.swapDepths=w.prototype.swapDepths,eb.prototype.clear=eb.prototype.clear,eb.prototype.move=eb.prototype.move,eb.prototype.moveTo=eb.prototype.moveTo,eb.prototype.rotate=eb.prototype.rotate,eb.prototype.rotateTo=eb.prototype.rotateTo,eb.prototype.scale=eb.prototype.scale,eb.prototype.scaleTo=eb.prototype.scaleTo,eb.prototype.setAlpha=eb.prototype.setAlpha,eb.prototype.setColorTransform=eb.prototype.setColorTransform,eb.prototype.setMatrix=eb.prototype.setMatrix,F.prototype.clear=F.prototype.clear,F.prototype.set=F.prototype.set,G.prototype.set=G.prototype.set,H.prototype.clear=H.prototype.clear,H.prototype.set=H.prototype.set;var lb=function(a,b){this.factory=a,this.node=b,this.node.style.position="absolute",this.node.style.webkitTransformOrigin="0px 0px",this.node.style.display="block",this.factory.stage.parentNode.appendChild(this.node),this.matrix=new F(0,0,0,0,0,0),this.zIndex=this.alpha=-1,this.visible=!0};lb.prototype.destruct=function(){this.factory.stage.parentNode.removeChild(this.node)},lb.prototype.update=function(){},lb.prototype.render=function(a,b,c,d,e){if(this.visible===e){if(!1===e)return}else{this.visible=e;if(!1===e){this.node.style.visibility="hidden";return}this.node.style.visibility="visible"}if(this.matrix.setWithComparing(a)||this.alpha!==b.multi.alpha||this.zIndex!==c)this.alpha=b.multi.alpha,this.zIndex=c,b=this.node.style,b.zIndex=this.zIndex,b.opacity=this.alpha,a=this.matrix,b.webkitTransform=this.use3D?"matrix3d("+(""+a.scaleX+","+a.skew1+",0,0,")+(""+a.skew0+","+a.scaleY+",0,0,")+"0,0,1,0,"+(""+a.translateX+","+a.translateY+",0,1)"):"matrix("+(""+a.scaleX+","+a.skew1+","+a.skew0+","+a.scaleY+",")+(""+a.translateX+","+a.translateY+")")};var mb=function(){this.cache={},this.lwfInstanceIndex=0},nb;nb=null,mb.get=function(){return null!=nb?nb:nb=new this},mb.prototype.clear=function(){var a,b,c,d,e;d=this.cache;for(b in d)for(c in a=d[b],e=a.instances,e)a=e[c],a.destroy();return this.cache={}},mb.prototype.getTextureURL=function(a,b,c){var d,e,f;return b=null!=(e=null!=(f=a.imagePrefix)?f:a.prefix)?e:"",e=null!=(d=a.imageSuffix)?d:"",d=a.imageMap,c=c.filename,"function"==typeof d?(a=d.call(a,c),null!=a&&(c=a)):"object"==typeof d&&(a=d[c],null!=a&&(c=a)),c.match(/^\//)||(c=b+c),c=c.replace(/(\.png|\.jpg)/i,e+"$1")},mb.prototype.checkTextures=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a._alphaMap={},a._rgbMap={},a._textures=[],g=/_atlas_(.*)_info_([0-9])_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)/i,q=b.textures,o=0;for(p=q.length;o<p;o++)(i=q[o],d=i.filename.match(/^(.*)_rgb_([0-9a-f]{6})(.*)$/i),null!=d)?(e=i.filename.match(g),null!=e?(f=e[1],h="1"===e[2]?!0:!1,j=parseInt(e[3],10),k=parseInt(e[4],10),l=parseInt(e[5],10),c=parseInt(e[6],10),m=parseInt(e[7],10),e=parseInt(e[8],10)):(f=d[1]+d[3],h=!1,k=j=0,c=l=null,e=m=0),d=d[2],null==(n=a._rgbMap)[f]&&(n[f]=[]),a._rgbMap[f].push({filename:i.filename,rgb:d,rotated:h,u:j,v:k,w:l,h:c,x:m,y:e})):(a._textures.push(i),d=i.filename.match(/^(.*)_withalpha(.*\.)jpg(.*)$/i),null!=d&&(c=""+d[1]+"_alpha"+d[2]+"png"+d[3],c=new I.TextureReplacement(c),a._textures.push(c),a._alphaMap[i.filename]=[i,c],a._alphaMap[c.filename]=[i,c]))},mb.prototype.onloaddata=function(a,b,c){null!=b&&b.check()?(a.name=b.name(),this.checkTextures(a,b),c=a.lwf,this.cache[c].data=b,a.total=a._textures.length+1,b.useScript&&a.total++,a.loadedCount=1,null!=a.onprogress&&a.onprogress.call(a,a.loadedCount,a.total),b.useScript?this.loadJS(a,b):this.loadImages(a,b)):(a.error.push({url:c,reason:"dataError"}),a.onload.call
(a,null))},mb.prototype.loadLWF=function(a){var b,c,d;d=c=a.lwf,d.match(/^\//)||(d=(null!=(b=a.prefix)?b:"")+d),a.error=[];if(null!=this.cache[c]&&(b=this.cache[c].data,null!=b)){a.name=b.name(),this.checkTextures(a,b),a.total=a._textures.length+1,a.loadedCount=1,"undefined"!=typeof onprogress&&null!==onprogress&&onprogress.call(a,a.loadedCount,a.total),this.loadImages(a,b);return}this.cache[c]={},this.loadLWFData(a,d)},mb.prototype.dispatchOnloaddata=function(a,b,c,d,e,f){var g,h,i,j,k,l=this;if(c){i=null,h=document.getElementsByTagName("script"),c=/(^|.*\/lwf_cocos2d.js)$/i,g=j=0;for(k=h.length;0>k?j>k:j<k;g=0>k?--j:++j)if(""!==h[g].src&&(g=h[g].src.split("?")[0],g=g.match(c),null!=g)){i=g[1];break}if(null!=i){var m=i,n;n=new Worker(m),n.onmessage=function(c){return f=new Q(c.data),n=n.onmessage=n.onerror=null,l.onloaddata(a,f,b)},n.onerror=function(){return a.error.push({url:m,reason:"error"}),n=n.onmessage=n.onerror=null,a.onload.call(a,null)},e&&"base64"!==f.type?n.webkitPostMessage(f.data):n.postMessage(f.data)}}null==i&&("base64"===f.type?(f=global.LWF.Base64.atobArray(f.data),f=(new global.LWF.Zlib.Inflate(f)).decompress(),f=U.loadArray(f)):f=d?U.loadArrayBuffer(f.data):U.load(f.data),this.onloaddata(a,f,b))},mb.prototype.loadLWFData=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=this;f=a.onload,j=i=!1,"undefined"!=typeof Worker&&(null==a.worker||a.worker)&&(i=!0,"undefined"!=typeof Worker.prototype.webkitPostMessage&&(j=!0)),d=b.match(/([^\/]+)\.lwf\.js/i),null!=d?(e=d[1].toLowerCase(),c=document.getElementsByTagName("head")[0],g=document.createElement("script"),g.type="text/javascript",g.charset="UTF-8",g.onabort=function(){return a.error.push({url:b,reason:"abort"}),c.removeChild(g),g=g.onload=g.onabort=g.onerror=null,f.call(a,null)},g.onerror=function(){return a.error.push({url:b,reason:"error"}),c.removeChild(g),g=g.onload=g.onabort=g.onerror=null,f.call(a,null)},g.onload=function(){var d,k,l;return d=null!=(k=global.LWF)?null!=(l=k.DataScript)?l[e]:void 0:void 0,c.removeChild(g),g=g.onload=g.onabort=g.onerror=null,null!=d?(d={type:"base64",data:d},m.dispatchOnloaddata(a,b,i,h,j,d)):(a.error.push({url:b,reason:"error"}),f.call(a,null))},g.src=b,c.appendChild(g),d=a.lwf,null==(l=this.cache[d]).scripts&&(l.scripts=[]),this.cache[d].scripts.push(g)):(k=new XMLHttpRequest,k.open("GET",b,!0),"string"==typeof k.responseType&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Int32Array&&"undefined"!=typeof Float32Array&&(!i||j)?(h=!0,k.responseType="arraybuffer"):(h=!1,k.overrideMimeType("text/plain; charset=x-user-defined")),k.onabort=function(){return a.error.push({url:b,reason:"abort"}),k=k.onabort=k.onerror=k.onreadystatechange=null,f.call(a,null)},k.onerror=function(){return a.error.push({url:b,reason:"error"}),k=k.onabort=k.onerror=k.onreadystatechange=null,f.call(a,null)},k.onreadystatechange=function(){var c;if(4===k.readyState){if(0===k.status||200<=k.status&&300>k.status)return c=h?{type:"arraybuffer",data:k.response}:{type:"text",data:k.responseText},m.dispatchOnloaddata(a,b,i,h,j,c),k=k.onabort=k.onerror=k.onreadystatechange=null;a.error.push({url:b,reason:"error"}),k=k.onabort=k.onerror=k.onreadystatechange=null,f.call(a,null)}},k.send(null))},mb.prototype.loadJS=function(a,b){var c,d,e,f,g,h,i,j=this;c=a.lwf,g=null!=(h=a.js)?h:c.replace(/\.lwf(\.js)?/i,".js"),g.match(/^\//)||(g=(null!=(i=a.prefix)?i:"")+g),d=a.onload,e=a.onprogress,f=document.createElement("script"),f.type="text/javascript",f.charset="UTF-8",f.onabort=function(){return delete j.cache[c],a.error.push({url:g,reason:"abort"}),f=f.onload=f.onabort=f.onerror=null,d.call(a,null)},f.onerror=function(){return delete j.cache[c],a.error.push({url:g,reason:"error"}),f=f.onload=f.onabort=f.onerror=null,d.call(a,null)},f.onload=function(){return a.loadedCount++,null!=e&&e.call(a,a.loadedCount,a.total),f=f.onload=f.onabort=f.onerror=null,j.loadImages(a,b)},f.src=g,document.getElementsByTagName("head")[0].appendChild(f),null==(h=this.cache[c]).scripts&&(h.scripts=[]),this.cache[c].scripts.push(f)},mb.prototype.loadImagesCallback=function(a,b,c){a.loadedCount++,null!=a.onprogress&&a.onprogress.call(a,a.loadedCount,a.total),a.loadedCount===a.total&&(delete a._alphaMap,delete a._rgbMap,delete a._textures,0<a.error.length?(delete this.cache[a.lwf],a.onload.call(a,null)):this.newLWF(a,b,c))},mb.prototype.generateImages=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;a=a._rgbMap[c.filename];if(null!=a){k=d.width/c.width,q=0;for(r=a.length;q<r;q++){j=a[q],o=Math.round(j.x*k),p=Math.round(j.y*k),l=Math.round(j.u*k),m=Math.round(j.v*k),n=Math.round((null!=(s=j.w)?s:d.width)*k),f=Math.round((null!=(t=j.h)?t:d.height)*k),j.rotated?(h=f,g=n):(h=n,g=f),this.constructor===mb?(i="canvas_"+j.filename.replace(/[\.-]/g,"_"),e=document.getCSSCanvasContext("2d",i,n,f),c=e.canvas,c.name=i):(c=document.createElement("canvas"),c.width=n,c.height=f,e=c.getContext("2d")),e.fillStyle="#"+j.rgb,e.fillRect(0,0,n,f),e.globalCompositeOperation="destination-in";if(j.rotated)i=new F,V.rotateMatrix(i,new F,1,o,p+f),e.setTransform(i.scaleX,i.skew1,i.skew0,i.scaleY,i.translateX,i.translateY);else if(0!==o||0!==p)i=new F,V.scaleMatrix(i,new F,1,o,yy),e.setTransform(i.scaleX,i.skew1,i.skew0,i.scaleY,i.translateX,i.translateY);e.drawImage(d,l,m,h,g,0,0,h,g),e.globalCompositeOperation="source-over",b[j.filename]=c}}},mb.prototype.loadImages=function(a,b){var c,d,e,f,g,h,i,j=this;c={};if(0===b.textures.length)this.newLWF(a,c,b);else{i=a._textures,f=function(d,e){var f;return f=new Image,f.onabort=function(){return a.error.push({url:e,reason:"abort"}),f=f.onload=f.onabort=f.onerror=null,j.loadImagesCallback(a,c,b)},f.onerror=function(){return a.error.push({url:e,reason:"error"}),f=f.onload=f.onabort=f.onerror=null,j.loadImagesCallback(a,c,b)},f.onload=function(){var e,g,h,i,k,l,m;return c[d.filename]=f,e=a._alphaMap[d.filename],null!=e?(k=e[0],e=e[1],l=c[k.filename],g=c[e.filename],null!=l&&null!=g&&(j.constructor===mb?(m="canvas_"+k.filename.replace(/[\.-]/g,"_"),i=document.getCSSCanvasContext("2d",m,l.width,l.height),h=i.canvas,h.name=m):(h=document.createElement("canvas"),h.width=l.width,h.height=l.height,i=h.getContext("2d")),i.drawImage(l,0,0,l.width,l.height),i.globalCompositeOperation="destination-in",i.drawImage(g,0,0,l.width,l.height),i.globalCompositeOperation="source-over",delete c[k.filename],delete c[e.filename],c[k.filename]=h,j.generateImages(a,c,k,h))):j.generateImages(a,c,d,f),f=f.onload=f.onabort=f.onerror=null,j.loadImagesCallback(a,c,b)},f.src=e},g=0;for(h=i.length;g<h;g++)d=i[g],e=this.getTextureURL(a,b,d),f(d,e)}},mb.prototype.newFactory=function(a,b,c){var d,e;return new WebkitCSSRendererFactory(c,this,b,a.stage,null!=(d=a.textInSubpixel)?d:!1,null!=(e=a.use3D)?e:!0)},mb.prototype.onloadLWF=function(a,b){var c;c=b.rendererFactory,null!=a.setBackgroundColor?c.setBackgroundColor(a.setBackgroundColor):a.useBackgroundColor&&c.setBackgroundColor(b),a.fitForHeight?c.fitForHeight(b):a.fitForWidth&&c.fitForWidth(b),a.onload.call(a,b)},mb.prototype.newLWF=function(a,b,c){var d,e,f,g;d=this.cache[a.lwf],b=this.newFactory(a,b,c),c.useScript&&(e=null!=(f=global.LWF)?null!=(g=f.Script)?g[c.name()]:void 0:void 0),c=new u(c,b,e,a.privateData),c.url=a.lwf,c.lwfInstanceId=++this.lwfInstanceIndex,null==d.instances&&(d.instances={}),d.instances[c.lwfInstanceId]=c,d=a.parentLWF,null!=d&&(d.loadedLWFs[c.lwfInstanceId]=c),null!=a.preferredFrameRate&&(null!=a.execLimit?c.setPreferredFrameRate(a.preferredFrameRate,a.execLimit):c.setPreferredFrameRate(a.preferredFrameRate)),this.onloadLWF(a,c)},mb.prototype.unloadLWF=function(a){var b,c,d,e,f,g,h,i,j;b=this.cache[a.url];if(null!=b){a.lwfInstanceId&&delete b.instances[a.lwfInstanceId],c=!0,i=b.instances;for(e in i){c=!1;break}if(c){try{d=document.getElementsByTagName("head")[0],j=b.scripts,g=0;for(h=j.length;g<h;g++)f=j[g],d.removeChild(f)}catch(k){}delete this.cache[a.url]}}},mb.prototype.loadLWFs=function(a,b){var c,d,e,f,g,h,i,j,k;d=a.length,e=0,c=null,h=function(a){return g.onload=function(f){null!=a&&a(f),0<g.error.length&&(null==c&&(c=[]),c=c.concat(g.error)),++e;if(d===e)return b(c)}},k=[],i=0;for(j=a.length;i<j;i++)g=a[i],f=g.onload,h(f),k.push(this.loadLWF(g));return k},mb.prototype.getCache=function(){return this.cache},mb.prototype.setParticleConstructor=function(a){this.particleConstructor=a},mb.prototype.setDOMElementConstructor=function(a){this.domElementConstructor=a},("undefined"==typeof window||null===window)&&"undefined"!=typeof self&&null!==self&&(self.onmessage=function(a){return"undefined"!=typeof self.webkitPostMessage&&"object"==typeof a.data?(a=U.loadArrayBuffer(a.data),self.webkitPostMessage(a)):(a=a.data,"L"===a[0]&&"W"===a[1]&&"F"===a[2]?a=U.load(a):(a=global.LWF.Base64.atobArray(a),a=(new global.LWF.Zlib.Inflate(a)).decompress(),a=U.loadArray(a)),"undefined"!=typeof self.webkitPostMessage?self.webkitPostMessage(a):self.postMessage(a)),self.close()});var ob=function(a,b,c,d){var e,f;this.resourceCache=b,this.cache=c,this.textInSubpixel=d,this.bitmapContexts=[],f=a.bitmaps,d=0;for(e=f.length;d<e;d++)c=f[d],-1!==c.textureFragmentId&&(b=new I.BitmapEx,b.matrixId=c.matrixId,b.textureFragmentId=c.textureFragmentId,b.u=0,b.v=0,b.w=1,b.h=1,this.bitmapContexts.push(new h(this,a,b)));this.bitmapExContexts=[],e=a.bitmapExs,c=0;for(d=e.length;c<d;c++)b=e[c],-1!==b.textureFragmentId&&this.bitmapExContexts.push(new h(this,a,b));this.textContexts=[],e=a.texts,c=0;for(d=e.length;c<d;c++)b=e[c],this.textContexts.push(new m(this,a,b));this.particleContexts=[],e=a.particles,c=0;for(d=e.length;c<d;c++)b=e[c],this.particleContexts.push(new j(this,a,b));this.lwfNode=null};ob.prototype.destruct=function(){var a,b,c,d;d=this.bitmapContexts,b=0;for(c=d.length;b<c;b++)a=d[b],a.destruct();d=this.bitmapExContexts,b=0;for(c=d.length;b<c;b++)a=d[b],a.destruct();d=this.textContexts,b=0;for(c=d.length;b<c;b++)a=d[b],a.destruct()},ob.prototype.init=function(a){var b,c,d,e,f,g,h=this;if(!this.setupedDomElementConstructor){this.setupedDomElementConstructor=!0,f=a.data.programObjects,g=[],d=0;for(e=f.length;d<e;d++)b=f[d],c=a.data.strings[b.stringId],b=c.match(/^DOM_(.*)/),null!=b?(b=b[1],g.push(function(b){return a.setProgramObjectConstructor(c,function(a,c,d,e){return c=h.resourceCache.domElementConstructor,null==c?null:(a=c(a,b,d,e),null==a?null:new lb(h,a))})}(b))):g.push(void 0);return g}},ob.prototype.beginRender=function(){},ob.prototype.endRender=function(){},ob.prototype.setBlendMode=function(){},ob.prototype.setMaskMode=function(){},ob.prototype.constructBitmap=function(a,b){var c;if(c=this.bitmapContexts[b])return new i(c)},ob.prototype.constructBitmapEx=function(a,b){var c;if(c=this.bitmapExContexts[b])return new i(c)},ob.prototype.constructText=function(a,b,c){if(b=this.textContexts[b])return new n(a,b,c)},ob.prototype.constructParticle=function(a,b){var c;if(c=this.particleContexts[b])return new k(c)},ob.prototype.convertColor=function(a,b,c){V.calcColor(a,b,c),a.red=Math.round(255*a.red),a.green=Math.round(255*a.green),a.blue=Math.round(255*a.blue),a.alpha=Math.round(255*a.alpha)},ob.prototype.getSize=function(){var a,b;return null!=this.lwfNode&&(a=this.lwfNode.getContentSize(),b=a.width,a=a.height),0===b&&0===a&&(a="undefined"!=typeof cc.Director.getInstance().winSizeInPixels?cc.Director.getInstance().winSizeInPixels():cc.Director.getInstance().getWinSizeInPixels(),b=a.width,a=a.height),[b,a]},ob.prototype.fitForHeight=function(a){var b,c;b=this.getSize(),c=b[0],b=b[1],0!==b&&b!==a.data.header.height&&a.fitForHeight(c,b)},ob.prototype.fitForWidth=function(a){var b,c;b=this.getSize(),c=b[0],b=b[1],0!==c&&c!==a.data.header.width&&a.fitForWidth(c,b)},ob.prototype.scaleForHeight=function(a){var b,c;b=this.getSize(),c=b[0],b=b[1],0!==b&&b!==a.data.header.height&&a.scaleForHeight(c,b)},ob.prototype.scaleForWidth=function(a){var b,c;b=this.getSize(),c=b[0],b=b[1],0!==c&&c!==a.data.header.width&&a.scaleForWidth(c,b)},ob.prototype.setBackgroundColor=function(a){"number"!=typeof a&&"string"==typeof a&&parseInt(a,16)},t=function(a,b,c){this.factory=a,this.data=b,this.fragment=b.textureFragments[c.textureFragmentId],b=b.textures[this.fragment.textureId],a=this.factory.cache[b.filename],this.texture2d=cc.TextureCache.getInstance().textureForKey(a),a="undefined"!=typeof this.texture2d.getPixelsWide?this.texture2d.getPixelsWide()/b.width:this.texture2d.width/b.width,this.scale=1/(b.scale*a),this.fragment.rotated?(c=this.fragment.h,b=this.fragment.w):(c=this.fragment.w,b=this.fragment.h),this.imageHeight=this.fragment.h*a,this.rect=cc.rect(this.fragment.u,this.fragment.v,c,b)},t.prototype.destruct=function(){},h=t,t=function(a){this.context=a,a=this.context.fragment,this.matrix=new F(0,0,0,0,0,0);if(a.rotated||0!==a.x||0!==a.y||1!==this.context.scale)this.matrixForAtlas=new F;this.bitmap=cc.LWFBitmap.lwfBitmapWithTexture(this.context.texture2d,this.context.rect),this.visible=!0,this.alpha=1,this.z=-1},t.prototype.destruct=function(){return this.bitmap.removeFromParentAndCleanup(!0)},t.prototype.render=function(a,b,c,d,e){var f,g;this.z!==c&&(-1===this.z?this.context.factory.lwfNode.addChild(this.bitmap,c):this.bitmap.getParent().reorderChild(this.bitmap,c),this.z=c);if(this.matrix.setWithComparing(a)){a=this.matrix,c=this.context.fragment,f=c.x,g=c.y,d=this.context.scale;if(c.rotated)a=V.rotateMatrix(this.matrixForAtlas,a,d,f,g+c.h);else if(1!==d||0!==f||0!==g)a=V.scaleMatrix(this.matrixForAtlas,a,d,f,g);this.bitmap.setMatrix(a)}if(this.alpha!==b.multi.alpha||this.visible!==e)return this.alpha=b.multi.alpha,this.visible=e,this.bitmap.setOpacity(this.visible?255*this.alpha:0)},i=t,t=function(a,b,c){this.factory=a,this.data=b,this.text=c,this.str=this.data.strings[this.text.stringId],this.textProperty=this.data.textProperties[this.text.textPropertyId],a=this.data.fonts[this.textProperty.fontId],this.textColor=this.data.colors[this.text.colorId],this.name=this.data.strings[this.text.nameStringId],this.fontName='"'+this.data.strings[a.stringId]+'",sans-serif'},t.prototype.destruct=function(){},m=t,t=function(b,c,d){var e;this.lwf=b,this.context=c,this.textObject=d,this.str=null!=(e=this.textObject.parent[this.context.name])?e:this.context.str,null!=this.str&&(this.str=this.str+""),this.matrix=new F(0,0,0,0,0,0),this.matrixForScale=new F,this.color=new G,this.color3B=cc.c3b();switch(this.context.textProperty.align&a.ALIGN_MASK){case a.RIGHT:b=cc.TEXT_ALIGNMENT_RIGHT;break;case a.CENTER:b=cc.TEXT_ALIGNMENT_CENTER;break;default:b=cc.TEXT_ALIGNMENT_LEFT}switch(this.context.textProperty.align&a.VERTICAL_MASK){case a.VERTICAL_BOTTOM:d=cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM;break;case a.VERTICAL_MIDDLE:d=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;break;default:d=cc.VERTICAL_TEXT_ALIGNMENT_TOP}c=this.lwf.scaleByStage,this.label=cc.LWFLabel.create("",this.context.fontName,this.context.textProperty.fontHeight*c,cc.size(this.context.text.width*c,this.context.text.height*c),b,d),this.z=-1,this.textRendered=!1},t.prototype.destruct=function(){this.label.removeFromParentAndCleanup(!0)},t.prototype.render=function(a,b,c,d,e){var f,g;if(e){this.z!==c&&(-1===this.z?this.context.factory.lwfNode.addChild(this.label,c):this.label.getParent().reorderChild(this.label,c),this.z=c),g=this.color.red,f=this.color.green,e=this.color.blue,this.context.factory.convertColor(this.color,this.context.textColor,b),b=this.color3B,b.r=this.color.red,b.g=this.color.green,b.b=this.color.blue,d=this.color.alpha,c=!1;if(g!==this.color.red||f!==this.color.green||e!==this.color.blue||d!==this.color.alpha)this.label.setOpacity(d),c=!0;e=!1,d=this.textObject.parent[this.context.name],null!=d&&(d=d+""),null!=d&&d!==this.str&&(e=!0,this.str=d),(!this.textRendered||c||e)&&this.renderText(b),this.matrix.setWithComparing(a)&&(a=V.scaleMatrix(this.matrixForScale,this.matrix,1/this.lwf.scaleByStage,0,0),this.context.factory.textInSubpixel||(a.translateX=Math.round(a.translateX),a.translateY=Math.round(a.translateY)),this.label.setMatrix(a))}else this.label.setOpacity(0)},t.prototype.renderText=function(a){this.textRendered=!0,this.label.setColor(a),this.label.setString(this.str)},n=t,t=function(a,b,c){this.factory=a,this.data=b,this.name=b.strings[b.particleDatas[c.particleDataId].stringId],this.plist=this.factory.resourceCache.particlePrefix+this.name+this.factory.resourceCache.particleSuffix},t.prototype.destruct=function(){},j=t,t=function(a){this.context=a,this.matrix=new F,this.particle=cc.LWFParticle.create(this.context.plist),this.visible=!0,this.alpha=1,this.z=-1},t.prototype.destruct=function(){return this.particle.removeFromParentAndCleanup(!0)},t.prototype.update=function(){},t.prototype.render=function(a,b,c,d,e){this.z!==c&&(-1===this.z?this.context.factory.lwfNode.addChild(this.particle,c):this.particle.getParent().reorderChild(this.particle,c),this.z=c),this.matrix.setWithComparing(a)&&this.particle.setMatrix(this.matrix);if(this.alpha!==b.multi.alpha||this.visible!==e)return this.alpha=b.multi.alpha,this.visible=e,this.particle.setOpacity(this.visible?255*this.alpha:0)},k=t;var pb=function(){pb.__super__.constructor.apply(this,arguments),this.particlePrefix="res/",this.particleSuffix=".plist"};l(pb,mb),pb.prototype.loadLWFNode=function(a){a._loadLWF=!0,this.loadLWF(a)},pb.prototype.loadLWFNodes=function(a,b){var c,d,e;d=0;for(e=a.length;d<e;d++)c=a[d],c._loadLWF=!0;this.loadLWFs(a,b)},pb.prototype.newFactory=function(a,b,c){var d;return new ob(c,this,b,null!=(d=a.textInSubpixel)?d:!1)},pb.prototype.loadLWFData=function(a,b){var c;return"undefined"==typeof XMLHttpRequest?(c=cc.loadFileIntoMemory(cc.FileUtils.sharedFileUtils().fullPathFromRelativePath(b)),c=U.loadArrayBuffer(c),this.onloaddata(a,c,b)):pb.__super__.loadLWFData.apply(this,arguments)},pb.prototype.onloadLWF=function(a,b){var c,d;null!=a._loadLWF?(d=cc.LWFNode.lwfNodeWithLWF(b),c=a.contentSize,null!=c&&d.setContentSize(c),c=b.rendererFactory,a.fitForHeight?c.fitForHeight(b):a.fitForWidth&&c.fitForWidth(b),delete a._loadLWF,a.onload.call(a,d)):a.onload.call(a,b)},pb.prototype.onLoadImage=function(){var a,b,c;this.loadedCount++,null!=this.onprogress&&this.onprogress.call(this,this.loadedCount,this.total),this.loadedCount===this.total&&(a=this._cache,b=this._data,c=this._imageCache,delete this._cache,delete this._data,delete this._imageCache,a.newLWF(this,c,b))},pb.prototype.loadImages=function(a,b){var c,d,e,f,g,h,i,j,k,l;e=null!=(f=null!=(h=a.imagePrefix)?h:a.prefix)?f:"",f=null!=(c=a.imageSuffix)?c:"",c={},a._cache=this,a._data=b,a._imageCache=c,j=b.textures,h=0;for(i=j.length;h<i;h++)g=j[h],d=g.filename,g=null!=(k=null!=(l=a.imageMap)?l[d]:void 0)?k:d,g.match(/^\//)||(g=e+g),g=g.replace(/(\.png|\.jpg)$/i,f+"$1"),c[d]=g,d=cc.TextureCache.getInstance(),"undefined"!=typeof d.addImageAsync?d.addImageAsync(g,a,this.onLoadImage):(d.addImage(g),this.onLoadImage.call(a))},pb.prototype.unloadLWF=function(a){var b,c,d;pb.__super__.unloadLWF.apply(this,arguments);if(null==this.cache[a.url])for(b in d=a.renderFactory.cache,d)c=d[b],c.match(/\.(png|jpg)$/i)&&cc.TextureCache.getInstance().removeTextureForKey(c)},pb.prototype.setParticlePath=function(a,b){this.particlePrefix=a,this.particleSuffix=b},l=pb,"undefined"!=typeof global&&(global.LWF.Cocos2dRendererFactory=ob,global.LWF.Cocos2dResourceCache=l,global.LWF.ResourceCache=l,"undefined"!=typeof cc&&(cc.LWF=global.LWF)),ob.prototype.convertColor=ob.prototype.convertColor,ob.prototype.fitForHeight=ob.prototype.fitForHeight,ob.prototype.fitForWidth=ob.prototype.fitForWidth,ob.prototype.scaleForHeight=ob.prototype.scaleForWidth,ob.prototype.scaleForStage=ob.prototype.scaleForWidth,ob.prototype.setBackgroundColor=ob.prototype.setBackgroundColor,l.prototype.clear=l.prototype.clear,l.prototype.getCache=l.prototype.getCache,l.prototype.loadLWF=l.prototype.loadLWF,l.prototype.loadLWFs=l.prototype.loadLWFs,l.prototype.unloadLWF=l.prototype.unloadLWF,l.prototype.setParticleConstructor=l.prototype.setParticleConstructor,l.prototype.setDOMElementConstructor=l.prototype.setDOMElementConstructor,"undefined"!=typeof cc&&null!==cc&&(cc.LWFBitmap=cc.Sprite.extend({_m_lwf_matrix:null,ctor:function(){return cc.associateWithNative(this,cc.Sprite)},initWithTexture:function(a,b){var c;return c=this._super(a,b),this.setAnchorPoint(cc.p(0,1)),c},setMatrix:function(a){"undefined"!=typeof this._super?this._super({a:a.scaleX,b:a.skew1,c:a.skew0,d:a.scaleY,tx:a.translateX,ty:a.translateY}):this._m_lwf_matrix=a},transform:function(a){var b;a=null!=a?a:cc.renderContext,b=this._m_lwf_matrix,a.transform(b.scaleX,b.skew1,b.skew0,b.scaleY,b.translateX,b.translateY-cc.canvas.height)}}),cc.LWFBitmap.lwfBitmapWithTexture=function(a,b){var c;return c=new cc.LWFBitmap,c.initWithTexture(a,b)?c:null},cc.LWFLabel=cc.LabelTTF.extend({_m_lwf_matrix:null,ctor:function(){return cc.associateWithNative(this,cc.LabelTTF)},initWithString:function(a){return a="undefined"!=typeof this._super?this._super(a):this.initWithStringFontNameFontSize(a[0],a[1],a[2]),this.setAnchorPoint(cc.p(0,1)),a},setMatrix:function(a){"undefined"!=typeof this._super?this._super({a:a.scaleX,b:a.skew1,c:a.skew0,d:a.scaleY,tx:a.translateX,ty:a.translateY}):this._m_lwf_matrix=a},transform:function(a){var b;a=null!=a?a:cc.renderContext,b=this._m_lwf_matrix,a.transform(b.scaleX,b.skew1,b.skew0,b.scaleY,b.translateX,b.translateY-cc.canvas.height)}}),cc.LWFLabel.create=function(){var a;return a=new cc.LWFLabel,a.initWithString(arguments)?a:null},cc.LWFParticle=cc.ParticleSystem.extend({_m_lwf_matrix:null,ctor:function(){return cc.associateWithNative(this,cc.ParticleSystem)},setMatrix:function(a){"undefined"!=typeof this._super?this._super({a:a.scaleX,b:a.skew1,c:a.skew0,d:a.scaleY,tx:a.translateX,ty:a.translateY}):this._m_lwf_matrix=a},transform:function(a){var b;a=null!=a?a:cc.renderContext,b=this._m_lwf_matrix,a.transform(b.scaleX,b.skew1,b.skew0,b.scaleY,b.translateX,b.translateY-cc.canvas.height)}}),cc.LWFParticle.create=function(a){var b;return b=new cc.LWFParticle,b.initWithFile(a)?b:null},cc.LWFNode=cc.Node.extend({_m_lwf:null,_m_targetedDelegateAdded:!1,ctor:function(){return cc.associateWithNative(this,cc.Node)},initWithLWF:function(a){return"undefined"!=typeof this.init&&this.init(),a.rendererFactory.lwfNode=this,this._m_lwf=a,this.scheduleUpdate(),!0},cleanup:function(){this._super(),this._m_lwf.destroy()},getLWF:function(){return this._m_lwf},update:function(a){this._super(a),this._m_lwf.exec(a),this._m_lwf.render()},onEnter:function(){var a;return this._m_lwf.interactive&&(a=cc.Director.getInstance(),"undefined"!=typeof a.getTouchDispatcher&&(a.getTouchDispatcher().addTargetedDelegate(this,0,!0),this._m_targetedDelegateAdded=!0)),this._super()},onExit:function(){return this._m_targetedDelegateAdded&&cc.Director.getInstance().getTouchDispatcher().removeDelegate(this),this._super()},onTouchBegan:function(a,b){return this.onTouchMoved(a,b),this._m_lwf.inputPress(),!0},onTouchMoved:function(a){a=this.convertTouchToNodeSpace(a),a=cc.Director.getInstance().convertToGL(a),this._m_lwf.inputPoint(a.x,a.y)},onTouchEnded:function(a,b){this.onTouchMoved(a,b),this._m_lwf.inputRelease()}}),cc.LWFNode.lwfNodeWithLWF=function(a){var b;return b=new cc.LWFNode,b.initWithLWF(a)?b:null})}.call(this),function(){var a={Tween:function(b){this.lwf=b.lwf,this.object=b,this.valuesStart={},this.valuesEnd={},this.delayTime=this.duration=0,this.startTime=null,this.easingFunction=a.Easing.Linear.None,this.interpolationFunction=a.Interpolation.Linear,this.chainedTweens=[],this.onStartCallback=null,this.onStartCallbackFired=!1,this.onCompleteCallback=this.onUpdateCallback=null,null===this.lwf._tweens&&(this.lwf._tweens=[],"lwf"===this.lwf._tweenMode?this.lwf.addExecHandler(a._tweenExecHandler):this.lwf.addMovieEventHandler("_root",{enterFrame:a._tweenMovieHandler})),this.to=function(a,b){return void 0!==b&&(this.duration=b*this.lwf.tick),this.valuesEnd=a,this},this.start=function(){this.lwf._tweens.push(this),this.onStartCallbackFired=!1,this.startTime=this.lwf.time,this.startTime+=this.delayTime;for(var a in this.valuesEnd)if(null!==this.object[a]){if(this.valuesEnd[a]instanceof Array){if(0===this.valuesEnd[a].length)continue;this.valuesEnd[a]=[this.object[a]].concat(this.valuesEnd[a])}this.valuesStart[a]=this.object[a]}return this},this.stop=function(){var a=this.lwf._tweens.indexOf(this);return-1!==a&&(this.lwf._tweens.splice(a,1),0==this.lwf._tweens.length&&this.stopTweens()),this},this.delay=function(a){return this.delayTime=a*this.lwf.tick,this},this.easing=function(a){return this.easingFunction=a,this},this.interpolation=function(a){return this.interpolationFunction=a,this},this.chain=function(b){return"undefined"!=typeof b&&null!==b?(this.chainedTweens.push(b),this):(b=new a.Tween(this.object),this.chainedTweens.push(b),b)},this.onStart=function(a){return this.onStartCallback=a,this},this.onUpdate=function(a){return this.onUpdateCallback=a,this},this.onComplete=function(a){return this.onCompleteCallback=a,this},this.update=function(a){if(a<this.startTime)return!0;!1===this.onStartCallbackFired&&(null!==this.onStartCallback&&this.onStartCallback.call(this.object),this.onStartCallbackFired=!0);var b=(a-this.startTime)/(0<this.duration?this.duration:this.lwf.tick),b=1<b?1:b,c=this.easingFunction(b),d;for(d in this.valuesStart){var e=this.valuesStart[d],f=this.valuesEnd[d];this.object[d]=f instanceof Array?this.interpolationFunction(f,c):e+(f-e)*c}null!==this.onUpdateCallback&&this.onUpdateCallback.call(this.object,c);if(1==b){null!==this.onCompleteCallback&&this.onCompleteCallback.call(this.object),b=0;for(c=this.chainedTweens.length;b<c;b++)this.chainedTweens[b].start(a);return!1}return!0},this.to=this.to,this.start=this.start,this.stop=this.stop,this.delay=this.delay,this.easing=this.easing,this.interpolation=this.interpolation,this.chain=this.chain,this.onStart=this.onStart,this.onUpdate=this.onUpdate,this.onComplete=this.onComplete,this.update=this.update},Easing:{Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?.5*a*a:-0.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){var b,c=.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=.1):b=.4*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*(a-=1))*Math.sin((a-b)*2*Math.PI/.4)))},Out:function(a){var b,c=.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=.1):b=.4*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*a)*Math.sin((a-b)*2*Math.PI/.4)+1)},InOut:function(a){var b,c=.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=.1):b=.4*Math.asin(1/c)/(2*Math.PI),1>(a*=2)?-0.5*c*Math.pow(2,10*(a-=1))*Math.sin((a-b)*2*Math.PI/.4):.5*c*Math.pow(2,-10*(a-=1))*Math.sin((a-b)*2*Math.PI/.4)+1)}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return--a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(b){return 1-a.Easing.Bounce.Out(1-b)},Out:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(b){return.5>b?.5*a.Easing.Bounce.In(2*b):.5*a.Easing.Bounce.Out(2*b-1)+.5}}}},b=[1];a.Interpolation={Linear:function(b,c){var d=b.length-1,e=d*c,f=Math.floor(e),g=a.Interpolation.Utils.Linear;return 0>c?g(b[0],b[1],e):1<c?g(b[d],b[d-1],d-e):g(b[f],b[f+1>d?d:f+1],e-f)},Bezier:function(b,c){var d=0,e=b.length-1,f=Math.pow,g=a.Interpolation.Utils.Bernstein,h;for(h=0;h<=e;h++)d+=f(1-c,e-h)*f(c,h)*b[h]*g(e,h);return d},CatmullRom:function(b,c){var d=b.length-1,e=d*c,f=Math.floor(e),g=a.Interpolation.Utils.CatmullRom;return b[0]===b[d]?(0>c&&(f=Math.floor(e=d*(1+c))),g(b[(f-1+d)%d],b[f],b[(f+1)%d],b[(f+2)%d],e-f)):0>c?b[0]-(g(b[0],b[0],b[1],b[1],-e)-b[0]):1<c?b[d]-(g(b[d],b[d],b[d-1],b[d-1],e-d)-b[d]):g(b[f?f-1:0],b[f],b[d<f+1?d:f+1],b[d<f+2?d:f+2],e-f)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(b,c){var d=a.Interpolation.Utils.Factorial;return d(b)/d(c)/d(b-c)},Factorial:function(a){var c=1,d;if(b[a])return b[a];for(d=a;1<d;d--)c*=d;return b[a]=c},CatmullRom:function(a,b,c,d,e){a=.5*(c-a),d=.5*(d-b);var f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}}};var c=global.LWF.LWF.prototype;c.setTweenMode=function(a){this._tweenMode=a},c.stopTweens=function(){null!==this._tweens&&(this._tweens=null,this.removeExecHandler(a._tweenExecHandler),this.removeMovieEventHandler("_root",{enterFrame:a._tweenMovieHandler}))},c.stopTweens=c.stopTweens,a._tweenUpdater=function(){if(null!==this._tweens){for(var a=0,b=this._tweens.length,c=this.time;a<b;)this._tweens[a].update(c)?a++:(this._tweens.splice(a,1),b--);0==this._tweens.length&&this.stopTweens()}},a._tweenExecHandler=function(){a._tweenUpdater.call(this)},a._tweenMovieHandler=function(){a._tweenUpdater.call(this.lwf)},c=global.LWF.Movie.prototype,c.addTween=function(){return new a.Tween(this)},c.stopTweens=function(){if("undefined"==typeof this.lwf||null===this.lwf||null===this.lwf._tweens)return this;for(var a=this.lwf._tweens,b=0,c=a.length;b<c;)a[b]._object===this?(a.splice(b,1),c--):b++;return 0==a.length&&this.lwf.stopTweens(),this},global.LWF.Tween=a.Tween,global.LWF.Tween.Easing=a.Easing,c=global.LWF.Tween.Easing,c.Linear=a.Easing.Linear,c.Linear.None=a.Easing.Linear.None,c.Quadratic=a.Easing.Quadratic,c.Quadratic.In=a.Easing.Quadratic.In,c.Quadratic.Out=a.Easing.Quadratic.Out,c.Quadratic.InOut=a.Easing.Quadratic.InOut,c.Cubic=a.Easing.Cubic,c.Cubic.In=a.Easing.Cubic.In,c.Cubic.Out=a.Easing.Cubic.Out,c.Cubic.InOut=a.Easing.Cubic.InOut,c.Quartic=a.Easing.Quartic,c.Quartic.In=a.Easing.Quartic.In,c.Quartic.Out=a.Easing.Quartic.Out,c.Quartic.InOut=a.Easing.Quartic.InOut,c.Quintic=a.Easing.Quintic,c.Quintic.In=a.Easing.Quintic.In,c.Quintic.Out=a.Easing.Quintic.Out,c.Quintic.InOut=a.Easing.Quintic.InOut,c.Sinusoidal=a.Easing.Sinusoidal,c.Sinusoidal.In=a.Easing.Sinusoidal.In,c.Sinusoidal.Out=a.Easing.Sinusoidal.Out,c.Sinusoidal.InOut=a.Easing.Sinusoidal.InOut,c.Exponential=a.Easing.Exponential,c.Exponential.In=a.Easing.Exponential.In,c.Exponential.Out=a.Easing.Exponential.Out,c.Exponential.InOut=a.Easing.Exponential.InOut,c.Circular=a.Easing.Circular,c.Circular.In=a.Easing.Circular.In,c.Circular.Out=a.Easing.Circular.Out,c.Circular.InOut=a.Easing.Circular.InOut,c.Elastic=a.Easing.Elastic,c.Elastic.In=a.Easing.Elastic.In,c.Elastic.Out=a.Easing.Elastic.Out,c.Elastic.InOut=a.Easing.Elastic.InOut,c.Back=a.Easing.Back,c.Back.In=a.Easing.Back.In,c.Back.Out=a.Easing.Back.Out,c.Back.InOut=a.Easing.Back.InOut,c.Bounce=a.Easing.Bounce,c.Bounce.In=a.Easing.Bounce.In,c.Bounce.Out=a.Easing.Bounce.Out,c.Bounce.InOut=a.Easing.Bounce.InOut,global.LWF.Tween.Interpolation=a.Interpolation,c=global.LWF.Tween.Interpolation,c.Linear=a.Interpolation.Linear,c.Bezier=a.Interpolation.Bezier,c.CatmullRom=a.Interpolation.CatmullRom,c.Utils=a.Interpolation.Utils,c.Utils.Linear=a.Interpolation.Utils.Linear,c.Utils.Bernstein=a.Interpolation.Utils.Bernstein,c.Utils.Factorial=a.Interpolation.Utils.Factorial,c.Utils.CatmullRom=a.Interpolation.Utils.CatmullRom}.call(this),function(){var a={Character:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RangeError:"INVALID_CHARACTER_ERR",btoaArray:{}},b=a.btoaArray,c=a.Character,d=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(c.length),e,f;e=0;for(f=d.length;e<f;++e)d[e]=c.charCodeAt(e);b.CharacterTable=d,a.atobArray=function(b){for(var c=0,d=0,e=b.length,f,g=0,h=0,i=a.atobArray.DecodeTable,j;"="===b.charAt(e-1);)--e;f=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(3*((e+3)/4|0)-[0,0,2,1][e%4]);if(1===e%4||0<b.length&&0===e)throw Error(a.RangeError);for(;d<e;){j=b.charCodeAt(d++),j=256>j?i[j]:-1;if(-1===j)throw Error(a.RangeError);c=(c<<6)+j,h+=6,8<=h&&(h-=8,j=c>>h,f[g++]=j,c^=j<<h)}return f},b=a.atobArray,d=a.btoaArray.CharacterTable
,c=new("undefined"!=typeof Int16Array?Int16Array:Array)(256),e=d instanceof Array?d:Array.prototype.slice.call(d);for(d=0;255>d;++d)c[d]=e.indexOf(d);b.DecodeTable=c,global.LWF.Base64=a}.call(this),function(){var a={},b=!1;"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&(b=!0),a.CompressionMethod={DEFLATE:8,RESERVED:15},a.Adler32=function(b){return"string"==typeof b&&(b=a.Util.stringToByteArray(b)),a.Adler32.update(1,b)},a.Adler32.update=function(b,c){for(var d=b&65535,e=b>>>16&65535,f=c.length,g,h=0;0<f;){g=f>a.Adler32.OptimizationParameter?a.Adler32.OptimizationParameter:f,f-=g;do d+=c[h++],e+=d;while(--g);d%=65521,e%=65521}return(e<<16|d)>>>0},a.Adler32.OptimizationParameter=1024,a.Huffman={},a.Huffman.buildHuffmanTable=function(a){var c=a.length,d=0,e=Number.POSITIVE_INFINITY,f,g,h,i,j,k,l,m,n;for(m=0;m<c;++m)a[m]>d&&(d=a[m]),a[m]<e&&(e=a[m]);f=1<<d,g=new(b?Uint32Array:Array)(f),h=1,i=0;for(j=2;h<=d;){for(m=0;m<c;++m)if(a[m]===h){k=0,l=i;for(n=0;n<h;++n)k=k<<1|l&1,l>>=1;for(n=k;n<f;n+=j)g[n]=h<<16|m;++i}++h,i<<=1,j<<=1}return[g,d,e]};var c=a.Huffman.buildHuffmanTable;a.RawInflate=function(c,d){this.blocks=[],this.bufferSize=32768,this.bitsbuflen=this.bitsbuf=this.ip=this.totalpos=0,this.input=b?new Uint8Array(c):c,this.bfinal=!1,this.bufferType=a.RawInflate.BufferType.ADAPTIVE,this.resize=!1;if(d||!(d={}))d.index&&(this.ip=d.index),d.bufferSize&&(this.bufferSize=d.bufferSize),d.bufferType&&(this.bufferType=d.bufferType),d.resize&&(this.resize=d.resize);switch(this.bufferType){case a.RawInflate.BufferType.BLOCK:this.op=a.RawInflate.MaxBackwardLength,this.output=new(b?Uint8Array:Array)(a.RawInflate.MaxBackwardLength+this.bufferSize+a.RawInflate.MaxCopyLength);break;case a.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new(b?Uint8Array:Array)(this.bufferSize),this.expandBuffer=this.expandBufferAdaptive,this.concatBuffer=this.concatBufferDynamic,this.decodeHuffman=this.decodeHuffmanAdaptive;break;default:throw Error("invalid inflate mode")}},a.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},a.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();return this.concatBuffer()},a.RawInflate.MaxBackwardLength=32768,a.RawInflate.MaxCopyLength=258;var d=a.RawInflate,e;e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],e=b?new Uint16Array(e):e,d.Order=e,d=a.RawInflate,e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],e=b?new Uint16Array(e):e,d.LengthCodeTable=e,d=a.RawInflate,e=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],e=b?new Uint8Array(e):e,d.LengthExtraTable=e,d=a.RawInflate,e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],e=b?new Uint16Array(e):e,d.DistCodeTable=e,d=a.RawInflate,e=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],e=b?new Uint8Array(e):e,d.DistExtraTable=e,d=a.RawInflate,e=new(b?Uint8Array:Array)(288);var f,g;f=0;for(g=e.length;f<g;++f)e[f]=143<f?255<f?279<f?8:7:9:8;e=c(e),d.FixedLiteralLengthTable=e,d=a.RawInflate,e=new(b?Uint8Array:Array)(30),f=0;for(g=e.length;f<g;++f)e[f]=5;e=c(e),d.FixedDistanceTable=e,a.RawInflate.prototype.parseBlock=function(){var a=this.readBits(3);a&1&&(this.bfinal=!0),a>>>=1;switch(a){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw Error("unknown BTYPE: "+a)}},a.RawInflate.prototype.readBits=function(a){for(var b=this.bitsbuf,c=this.bitsbuflen,d=this.input,e=this.ip,f;c<a;){f=d[e++];if(void 0===f)throw Error("input buffer is broken");b|=f<<c,c+=8}return f=b&(1<<a)-1,this.bitsbuf=b>>>a,this.bitsbuflen=c-a,this.ip=e,f},a.RawInflate.prototype.readCodeByTable=function(a){var b=this.bitsbuf,c=this.bitsbuflen,d=this.input,e=this.ip,f=a[0];a=a[1];for(var g;c<a;){g=d[e++];if(void 0===g)throw Error("input buffer is broken");b|=g<<c,c+=8}return d=f[b&(1<<a)-1],f=d>>>16,this.bitsbuf=b>>f,this.bitsbuflen=c-f,this.ip=e,d&65535},a.RawInflate.prototype.parseUncompressedBlock=function(){var c=this.input,d=this.ip,e=this.output,f=this.op,g,h,i,j=e.length;this.bitsbuflen=this.bitsbuf=0,g=c[d++];if(void 0===g)throw Error("invalid uncompressed block header: LEN (first byte)");h=g,g=c[d++];if(void 0===g)throw Error("invalid uncompressed block header: LEN (second byte)");h|=g<<8,g=c[d++];if(void 0===g)throw Error("invalid uncompressed block header: NLEN (first byte)");i=g,g=c[d++];if(void 0===g)throw Error("invalid uncompressed block header: NLEN (second byte)");if(h===~(i|g<<8))throw Error("invalid uncompressed block header: length verify");if(d+h>c.length)throw Error("input buffer is broken");switch(this.bufferType){case a.RawInflate.BufferType.BLOCK:for(;f+h>e.length;){g=j-f,h-=g;if(b)e.set(c.subarray(d,d+g),f),f+=g,d+=g;else for(;g--;)e[f++]=c[d++];this.op=f,e=this.expandBuffer(),f=this.op}break;case a.RawInflate.BufferType.ADAPTIVE:for(;f+h>e.length;)e=this.expandBuffer({fixRatio:2});break;default:throw Error("invalid inflate mode")}if(b)e.set(c.subarray(d,d+h),f),f+=h,d+=h;else for(;h--;)e[f++]=c[d++];this.ip=d,this.op=f,this.output=e},a.RawInflate.prototype.parseFixedHuffmanBlock=function(){this.decodeHuffman(a.RawInflate.FixedLiteralLengthTable,a.RawInflate.FixedDistanceTable)},a.RawInflate.prototype.parseDynamicHuffmanBlock=function(){function d(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=this.readCodeByTable(b),d){case 16:for(d=3+this.readBits(2);d--;)c[f++]=e;break;case 17:for(d=3+this.readBits(3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+this.readBits(7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var e=this.readBits(5)+257,f=this.readBits(5)+1,g=this.readBits(4)+4,h=new(b?Uint8Array:Array)(a.RawInflate.Order.length),i;for(i=0;i<g;++i)h[a.RawInflate.Order[i]]=this.readBits(3);g=c(h),h=new(b?Uint8Array:Array)(e),i=new(b?Uint8Array:Array)(f),this.decodeHuffman(c(d.call(this,e,g,h)),c(d.call(this,f,g,i)))},a.RawInflate.prototype.decodeHuffman=function(b,c){var d=this.output,e=this.op;this.currentLitlenTable=b;for(var f=d.length-a.RawInflate.MaxCopyLength,g,h,i;256!==(g=this.readCodeByTable(b));)if(256>g)e>=f&&(this.op=e,d=this.expandBuffer(),e=this.op),d[e++]=g;else{g-=257,i=a.RawInflate.LengthCodeTable[g],0<a.RawInflate.LengthExtraTable[g]&&(i+=this.readBits(a.RawInflate.LengthExtraTable[g])),g=this.readCodeByTable(c),h=a.RawInflate.DistCodeTable[g],0<a.RawInflate.DistExtraTable[g]&&(h+=this.readBits(a.RawInflate.DistExtraTable[g])),e>=f&&(this.op=e,d=this.expandBuffer(),e=this.op);for(;i--;)d[e]=d[e++ -h]}for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=e},a.RawInflate.prototype.decodeHuffmanAdaptive=function(b,c){var d=this.output,e=this.op;this.currentLitlenTable=b;for(var f=d.length,g,h,i;256!==(g=this.readCodeByTable(b));)if(256>g)e>=f&&(d=this.expandBuffer(),f=d.length),d[e++]=g;else{g-=257,i=a.RawInflate.LengthCodeTable[g],0<a.RawInflate.LengthExtraTable[g]&&(i+=this.readBits(a.RawInflate.LengthExtraTable[g])),g=this.readCodeByTable(c),h=a.RawInflate.DistCodeTable[g],0<a.RawInflate.DistExtraTable[g]&&(h+=this.readBits(a.RawInflate.DistExtraTable[g])),e+i>f&&(d=this.expandBuffer(),f=d.length);for(;i--;)d[e]=d[e++ -h]}for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=e},a.RawInflate.prototype.expandBuffer=function(){var c=new(b?Uint8Array:Array)(this.op-a.RawInflate.MaxBackwardLength),d=this.op-a.RawInflate.MaxBackwardLength,e,f,g=this.output;if(b)c.set(g.subarray(a.RawInflate.MaxBackwardLength,c.length));else{e=0;for(f=c.length;e<f;++e)c[e]=g[e+a.RawInflate.MaxBackwardLength]}this.blocks.push(c),this.totalpos+=c.length;if(b)g.set(g.subarray(d,d+a.RawInflate.MaxBackwardLength));else for(e=0;e<a.RawInflate.MaxBackwardLength;++e)g[e]=g[d+e];return this.op=a.RawInflate.MaxBackwardLength,g},a.RawInflate.prototype.expandBufferAdaptive=function(a){var c=this.input.length/this.ip+1|0,d=this.input,e=this.output;return a&&("number"==typeof a.fixRatio&&(c=a.fixRatio),"number"==typeof a.addRatio&&(c+=a.addRatio)),2>c?(a=(d.length-this.ip)/this.currentLitlenTable[2],a=258*(a/2)|0,a=a<e.length?e.length+a:e.length<<1):a=e.length*c,b?(a=new Uint8Array(a),a.set(e)):a=e,this.output=a},a.RawInflate.prototype.concatBuffer=function(){var c=0,d=this.output,e=this.blocks,f,g=new(b?Uint8Array:Array)(this.totalpos+(this.op-a.RawInflate.MaxBackwardLength)),h,i,j,k;if(0===e.length)return b?this.output.subarray(a.RawInflate.MaxBackwardLength,this.op):this.output.slice(a.RawInflate.MaxBackwardLength,this.op);h=0;for(i=e.length;h<i;++h){f=e[h],j=0;for(k=f.length;j<k;++j)g[c++]=f[j]}h=a.RawInflate.MaxBackwardLength;for(i=this.op;h<i;++h)g[c++]=d[h];return this.blocks=[],this.buffer=g},a.RawInflate.prototype.concatBufferDynamic=function(){var a,c=this.op;return b?this.resize?(a=new Uint8Array(c),a.set(this.output.subarray(0,c))):a=this.output.subarray(0,c):(this.output.length>c&&(this.output.length=c),a=this.output),this.buffer=a},a.Inflate=function(b,c){var d,e;this.input=b,this.ip=0;if(c||!(c={}))c.index&&(this.ip=c.index),c.verify&&(this.verify=c.verify);d=b[this.ip++],e=b[this.ip++];switch(d&15){case a.CompressionMethod.DEFLATE:this.method=a.CompressionMethod.DEFLATE;break;default:throw Error("unsupported compression method")}if(0!==((d<<8)+e)%31)throw Error("invalid fcheck flag:"+((d<<8)+e)%31);if(e&32)throw Error("fdict flag is not supported");this.rawinflate=new a.RawInflate(b,{index:this.ip,bufferSize:c.bufferSize,bufferType:c.bufferType,resize:c.resize})},a.Inflate.BufferType=a.RawInflate.BufferType,a.Inflate.prototype.decompress=function(){var b=this.input,c;c=this.rawinflate.decompress(),this.ip=this.rawinflate.ip;if(this.verify&&(b=(b[this.ip++]<<24|b[this.ip++]<<16|b[this.ip++]<<8|b[this.ip++])>>>0,b!==a.Adler32(c)))throw Error("invalid adler-32 checksum");return c},global.LWF.Zlib=a}.call(this)}).call(this);